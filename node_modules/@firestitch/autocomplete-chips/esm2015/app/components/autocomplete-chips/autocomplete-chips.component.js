import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, ElementRef, EventEmitter, forwardRef, HostBinding, HostListener, Input, Output, TemplateRef, ViewChild, ContentChildren, QueryList, ViewChildren, } from '@angular/core';
import { MatFormField } from '@angular/material/form-field';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { MatAutocompleteTrigger } from '@angular/material/autocomplete';
import { BACKSPACE, DELETE } from '@angular/cdk/keycodes';
import { isEqual, random } from 'lodash-es';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { Subject, of, timer } from 'rxjs';
import { takeUntil, switchMap, tap, debounce, filter } from 'rxjs/operators';
import { getObjectValue } from '../../helpers/get-object-value';
import { DataType } from '../../interfaces/data-type';
import { FsAutocompleteObjectDirective } from '../../directives/autocomplete-object/autocomplete-object.directive';
import { FsAutocompleteChipsNoResultsDirective } from '../../directives/autocomplete-no-results/autocomplete-no-results.directive';
import { FsAutocompleteChipsStaticDirective } from './../../directives/static-template/static-template.directive';
import { FsAutocompleteChipSuffixDirective } from './../../directives/chip-suffix/chip-suffix.directive';
import { FsAutocompleteChipsSuffixDirective } from './../../directives/chips-suffix/chips-suffix.directive';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/form-field";
import * as i2 from "@angular/material/chips";
import * as i3 from "@angular/material/icon";
import * as i4 from "@angular/material/autocomplete";
import * as i5 from "@angular/material/core";
import * as i6 from "@angular/material/radio";
import * as i7 from "@firestitch/label";
import * as i8 from "@angular/common";
import * as i9 from "@angular/cdk/drag-drop";
export class FsAutocompleteChipsComponent {
    constructor(_cdRef) {
        this._cdRef = _cdRef;
        this.fetch = null;
        this.readonly = false;
        this.size = 'large';
        this.placeholder = '';
        this.chipImage = 'image';
        this.allowObject = true;
        this.delay = 200;
        this.invalidTextMessage = '';
        this.removable = true;
        this.allowClear = true;
        this.color = '';
        this.background = '';
        this.orderable = false;
        this.limit = 0;
        this.initOnClick = false;
        this.fetchOnFocus = true;
        this.multiple = true;
        this.compareWith = (o1, o2) => {
            return isEqual(o1, o2);
        };
        this.panelWidth = null;
        this.selected = new EventEmitter();
        this.removed = new EventEmitter();
        this.reordered = new EventEmitter();
        this.clearEvent = new EventEmitter();
        this.formWrapper = true;
        this.input = null;
        this.dummyInput = null;
        this.autocompleteTrigger = null;
        this.formField = null;
        this.objectTemplate = null;
        this.chipSuffixTemplate = null;
        this.chipsSuffixTemplate = null;
        this.noResultsTemplate = null;
        this.staticTemplates = null;
        this.textData = {};
        this.disabled = false;
        this.dataType = DataType;
        this.keyword = null;
        this.noResults = false;
        this.name = 'autocomplete_'.concat(random(1, 9999999));
        this._model = [];
        this.inited = false;
        this._keyword$ = new Subject();
        this._fetch$ = new Subject();
        this._destroy$ = new Subject();
        this._onTouched = () => { };
        this._onChange = (value) => { };
        this.panelClass = '';
    }
    set panelClass(value) {
        this.panelClasses = [
            ...['fs-account-picker-autocomplete', 'fs-autocomplete-chips-panel'],
            value,
        ].join(' ');
    }
    ;
    set setDisabled(value) {
        this.disabled = value;
    }
    dragStart(e) {
        e.preventDefault();
    }
    ;
    get model() {
        return this._model;
    }
    get inputEl() {
        return this.input ? this.input.nativeElement : null;
    }
    registerOnChange(fn) { this._onChange = fn; }
    registerOnTouched(fn) { this._onTouched = fn; }
    ngOnInit() {
        this.inited = !this.initOnClick;
        this._listenFetch();
        this._listenKeywordChange();
    }
    init(options = { focus: true }) {
        if (!this.disabled) {
            this.inited = true;
            this._cdRef.markForCheck();
            if (options.focus) {
                this.focus({ delay: 200 });
            }
        }
    }
    drop(event) {
        const previousIndex = event.previousContainer.data.index;
        const index = event.container.data.index;
        moveItemInArray(this._model, previousIndex, index);
        this.reordered.emit({
            item: this._model[index],
            from: previousIndex,
            to: index,
            items: this._model,
        });
        this._updateModel(this._model);
    }
    selectAll() {
        this.data.forEach((selected) => {
            if (selected.type === DataType.Object) {
                this._addObject(selected);
            }
            if (selected.type === DataType.Text) {
                this._addText(selected.data);
            }
        });
    }
    inputed(event) {
        if (this.readonly || this.disabled) {
            return;
        }
        this._keyword$.next(event);
    }
    keyDown(event) {
        if (this.readonly || this.disabled || ['Enter', 'ArrowDown', 'ArrowUp'].indexOf(event.code) !== -1) {
            return;
        }
        if (event.code === 'Tab') {
            const activeOption = this.autocompleteTrigger.activeOption;
            if (activeOption) {
                if (activeOption.value.type === DataType.Object) {
                    this._addObject(activeOption.value);
                    this.selected.emit(activeOption.value);
                }
                else if (activeOption.value.type === DataType.Text) {
                    this._addText(this.keyword);
                    this.selected.emit(this.keyword);
                }
            }
        }
        this._clearData();
    }
    chipClick(event) {
        this.focus();
    }
    chipKeyDown(event, index) {
        if (event.keyCode === BACKSPACE || event.keyCode === DELETE) {
            if (this.multiple) {
                this.model.splice(index, 1);
                this._updateModel(this.model);
            }
            else {
                this._updateModel([]);
            }
        }
    }
    chipRemoved(event, item) {
        event.stopPropagation();
        event.stopImmediatePropagation();
        this._model = this.model
            .filter((modelItem) => modelItem !== item);
        this._updateModel(this._model);
        this.removed.emit(item);
        this.unfocus();
    }
    focus(options = { delay: 0 }) {
        setTimeout(() => {
            this.inputEl.focus();
        }, options.delay); // Hack: Delay to wait for animation to finish
    }
    unfocus() {
        setTimeout(() => {
            if (this.dummyInput) {
                this.dummyInput.nativeElement.focus();
            }
        });
    }
    clearClick(event) {
        event.stopPropagation();
        this.clear(true);
        this.clearEvent.emit();
    }
    clear(closePanel = true) {
        if (closePanel) {
            this.closePanel();
        }
        this._clearInput();
        this.noResults = false;
        this._updateModel([]);
    }
    closePanel() {
        if (this.autocompleteTrigger) {
            this.autocompleteTrigger.closePanel();
        }
    }
    closed() {
        setTimeout(() => {
            this._close();
            if (this.initOnClick) {
                // Wait for keyDown() to fire to process
                this.inited = false;
                this._cdRef.markForCheck();
            }
            this._clearData();
        });
    }
    focused(e) {
        this._clearInput();
        if (this.fetchOnFocus) {
            this._fetch();
            this.autocompleteTrigger.openPanel();
        }
    }
    optionClick(event, value, refocus = false) {
        event.stopPropagation();
        event.preventDefault();
        // Clear input before close to prevent adding text item which was not selected
        if (!refocus) {
            this._clearInput();
        }
        if (this.multiple) {
            this._select(value, { fetch: !this.fetchOnFocus });
            if (!refocus) {
                this.closePanel();
            }
        }
        else {
            this._select(value, { fetch: false });
            this._close();
            this.closePanel();
        }
    }
    optionSelected(event) {
        if (!event.option.value) {
            return;
        }
        this._select(event.option.value);
        this._clearData();
        this._clearInput();
    }
    writeValue(value) {
        if (value) {
            value = Array.isArray(value) ? value : [value];
            value = value.map((item) => {
                return typeof item === 'object' ?
                    this._createObjectItem(item) :
                    this._createTextItem(item, true);
            });
        }
        else {
            value = [];
        }
        this._model = value;
        this._cdRef.markForCheck();
    }
    staticClick(event, index) {
        event.stopPropagation();
        event.preventDefault();
        const staticDirective = this.staticDirectives.toArray()[index];
        staticDirective.click.emit(event);
        if (this.inputEl) {
            this.inputEl.blur();
        }
    }
    ngOnDestroy() {
        this._destroy$.next();
        this._destroy$.complete();
    }
    _clearData() {
        this.data = null;
    }
    _clearInput() {
        if (this.inputEl) {
            this.inputEl.value = '';
        }
        this.textData = {};
        this.keyword = '';
    }
    _select(selected, options = {}) {
        if (!this.multiple) {
            this._model = [];
        }
        if (this.data) {
            const index = this.data.indexOf(selected);
            if (index !== -1) {
                this.data.splice(index, 1);
            }
        }
        const value = this.allowObject && this.allowText ? selected : selected.data;
        if (selected.type === DataType.Object) {
            if (!this._model.includes(value)) {
                this._addObject(selected);
                this.selected.emit(selected);
            }
        }
        if (selected.type === DataType.Text) {
            if (!this._model.includes(value)) {
                this._addText(selected.data);
                this.selected.emit(selected.data);
            }
        }
        if (options.fetch !== false) {
            this._fetch();
            setTimeout(() => {
                if (this.autocompleteTrigger) {
                    this.autocompleteTrigger.updatePosition();
                }
            });
        }
    }
    _createTextItem(data, valid) {
        return {
            data,
            type: DataType.Text,
            valid,
        };
    }
    _createObjectItem(data) {
        return {
            data,
            type: DataType.Object,
            image: getObjectValue(data, this.chipImage),
            icon: getObjectValue(data, this.chipIcon),
            iconColor: getObjectValue(data, this.chipIconColor) || this.chipIconColor,
            class: getObjectValue(data, this.chipClass) || this.chipClass,
            background: getObjectValue(data, this.chipBackground) || this.chipBackground,
            color: getObjectValue(data, this.chipColor) || this.chipColor
        };
    }
    _validateText(text) {
        return String(text).trim().length && (!this.validateText || this.validateText(text));
    }
    _updateModel(value) {
        this._model = value;
        const model = this._model.map((item) => {
            if (!this.allowText || !this.allowObject) {
                return item.data;
            }
            return item;
        });
        this._onChange(this.multiple ? model : model[0]);
        this._onTouched();
    }
    _addObject(object) {
        this._updateModel([...this._model, object]);
    }
    _addText(text) {
        if (this._validateText(text)) {
            const textObject = this._createTextItem(text, true);
            this._updateModel([...this._model, textObject]);
        }
    }
    _close() {
        this._clearInput();
    }
    _fetch() {
        this._fetch$.next(null);
    }
    _listenKeywordChange() {
        this._keyword$
            .pipe(filter(() => this.inited), tap((e) => {
            if (e.data === ',') {
                this._select({
                    type: DataType.Text,
                    data: this.keyword,
                });
                this._clearInput();
            }
            else {
                this.keyword = this.inputEl ? this.inputEl.value.trim() : '';
            }
            this.data = null;
        }), debounce(() => {
            let delay = 0;
            if (this.keyword.length && this.allowObject) {
                delay = this.delay;
            }
            return timer(delay);
        }), takeUntil(this._destroy$))
            .subscribe(() => {
            this._fetch$.next(this.keyword);
        });
    }
    _listenFetch() {
        this._fetch$
            .pipe(filter(() => this.inited), switchMap((keyword) => {
            if (this.allowText) {
                this.textData = this._createTextItem(keyword, this._validateText(keyword));
            }
            if (this.allowObject) {
                this.noResults = false;
                return this._doFetchByKeyword(keyword);
            }
            return of([]);
        }), takeUntil(this._destroy$))
            .subscribe(() => {
            this._cdRef.markForCheck();
        });
    }
    _doFetchByKeyword(keyword) {
        return this.fetch(keyword)
            .pipe(tap((response) => {
            if (!Array.isArray(response)) {
                return;
            }
            this.data = response.map(data => {
                return this._createObjectItem(data);
            });
            if (this.multiple) {
                this.data = this.data.filter((item) => {
                    return !this.model.some((model) => {
                        return this.compareWith(model.data, item.data);
                    });
                });
            }
            else {
                const selected = this.data.find((item) => {
                    return this.model.some((model) => {
                        return this.compareWith(model.data, item.data);
                    });
                });
                if (selected) {
                    selected.selected = true;
                }
            }
            this.noResults = !this.data.length;
        }));
    }
}
FsAutocompleteChipsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: FsAutocompleteChipsComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
FsAutocompleteChipsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: FsAutocompleteChipsComponent, selector: "fs-autocomplete-chips", inputs: { fetch: "fetch", readonly: "readonly", size: "size", placeholder: "placeholder", chipImage: "chipImage", chipBackground: "chipBackground", chipColor: "chipColor", chipIcon: "chipIcon", chipIconColor: "chipIconColor", chipClass: "chipClass", hint: "hint", allowText: "allowText", allowObject: "allowObject", delay: "delay", validateText: "validateText", invalidTextMessage: "invalidTextMessage", removable: "removable", allowClear: "allowClear", color: "color", background: "background", orderable: "orderable", limit: "limit", initOnClick: "initOnClick", fetchOnFocus: "fetchOnFocus", multiple: "multiple", panelClass: "panelClass", compareWith: "compareWith", setDisabled: ["disabled", "setDisabled"], panelWidth: "panelWidth" }, outputs: { selected: "selected", removed: "removed", reordered: "reordered", clearEvent: "clear" }, host: { listeners: { "dragstart": "dragStart($event)" }, properties: { "class.fs-form-wrapper": "this.formWrapper" } }, providers: [{
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => FsAutocompleteChipsComponent),
            multi: true
        }], queries: [{ propertyName: "objectTemplate", first: true, predicate: FsAutocompleteObjectDirective, descendants: true, read: TemplateRef }, { propertyName: "chipSuffixTemplate", first: true, predicate: FsAutocompleteChipSuffixDirective, descendants: true, read: TemplateRef }, { propertyName: "chipsSuffixTemplate", first: true, predicate: FsAutocompleteChipsSuffixDirective, descendants: true, read: TemplateRef }, { propertyName: "noResultsTemplate", first: true, predicate: FsAutocompleteChipsNoResultsDirective, descendants: true, read: TemplateRef, static: true }, { propertyName: "staticTemplates", predicate: FsAutocompleteChipsStaticDirective, read: TemplateRef }, { propertyName: "staticDirectives", predicate: FsAutocompleteChipsStaticDirective }], viewQueries: [{ propertyName: "input", first: true, predicate: ["input"], descendants: true }, { propertyName: "dummyInput", first: true, predicate: ["dummyInput"], descendants: true }, { propertyName: "autocompleteTrigger", first: true, predicate: MatAutocompleteTrigger, descendants: true }, { propertyName: "formField", first: true, predicate: MatFormField, descendants: true, read: ElementRef }, { propertyName: "autocompleteTriggers", predicate: MatAutocompleteTrigger, descendants: true }], ngImport: i0, template: "<ng-container *ngIf=\"inited; else elseInited\">\n  <mat-form-field\n      [ngClass]=\"{ 'mat-form-field-disabled': disabled }\"\n      [floatLabel]=\"initOnClick ? 'always' : 'auto'\"\n      (click)=\"focus()\">\n    <mat-chip-list\n        [tabIndex]=\"-1\"\n        cdkDropListGroup\n        #searchList>\n      <div\n          *ngFor=\"let item of model; let index = index\"\n          cdkDropList\n          [cdkDropListData]=\"{ index: index }\"\n          cdkDropListOrientation=\"horizontal\"\n          (cdkDropListDropped)=\"drop($event)\">\n        <mat-chip\n            [disableRipple]=\"true\"\n            [selectable]=\"!disabled\"\n            [removable]=\"!disabled\"\n            [disabled]=\"disabled\"\n            [class]=\"'fs-autocomplete-chip ' + item.class\"\n            [ngClass]=\"{ \n              imaged: item.image, \n              'size-small': size === 'small', \n              'size-large': size === 'large',\n              'last-chip': model.length - 1 === index\n            }\"\n            [style.backgroundColor]=\"item.background || background\"\n            [style.color]=\"item.color || color\"\n            (keydown)=\"chipKeyDown($event, index)\"\n            (click)=\"chipClick($event)\"\n            [cdkDragDisabled]=\"!orderable || disabled\"\n            [cdkDragData]=\"item\"\n            tabindex=\"-1\"\n            cdkDrag\n            cdkDragHandle>\n          <ng-container\n            [ngTemplateOutlet]=\"itemTemplate\"\n            [ngTemplateOutletContext]=\"{ item: item, selecting: false }\">\n          </ng-container>\n          <ng-container\n            [ngTemplateOutlet]=\"itemSuffixTemplate\"\n            [ngTemplateOutletContext]=\"{ item: item, selecting: false, disabled: disabled }\">\n          </ng-container>\n        </mat-chip>\n      </div>\n\n      <input\n        #input\n        autocomplete=\"off\"\n        [placeholder]=\"placeholder\"\n        [disabled]=\"disabled\"\n        [readonly]=\"readonly\"\n        (input)=\"inputed($event)\"\n        (keydown)=\"keyDown($event)\"\n        (focus)=\"focused($event)\"\n        [name]=\"name\"\n        [matAutocomplete]=\"autocompleteSearch\"\n        [matChipInputFor]=\"searchList\">\n    </mat-chip-list>\n\n    <span *ngIf=\"chipsSuffixTemplate\" matSuffix>\n      <ng-container [ngTemplateOutlet]=\"chipsSuffixTemplate\"></ng-container>\n    </span>\n\n    <span *ngIf=\"!disabled && allowClear\" matSuffix>\n      <mat-icon\n          *ngIf=\"model.length\"\n          class=\"clear\"\n          (click)=\"clearClick($event)\">\n        clear\n      </mat-icon>\n    </span>\n\n    <mat-autocomplete\n        #autocompleteSearch=\"matAutocomplete\"\n        [class]=\"panelClasses\"\n        (optionSelected)=\"optionSelected($event)\"\n        (closed)=\"closed()\"\n        [panelWidth]=\"panelWidth\"\n        [autoActiveFirstOption]=\"true\">\n\n      <ng-container *ngIf=\"keyword && allowText\">\n        <mat-option *ngIf=\"textData.type===dataType.Text\" [value]=\"textData\" [disabled]=\"!textData.valid\">\n          <ng-container\n            [ngTemplateOutlet]=\"itemTemplate\"\n            [ngTemplateOutletContext]=\"{ item: textData }\">\n          </ng-container>\n        </mat-option>\n      </ng-container>        \n      \n      <mat-option\n        [ngClass]=\"{ multiple: multiple }\"\n        class=\"option\"\n        *ngFor=\"let item of data\" [value]=\"item\">\n        <a\n            *ngIf=\"multiple\"\n            class=\"add-icon\"\n            (click)=\"optionClick($event, item, true)\">\n          <mat-icon>add</mat-icon>\n        </a>\n        <div class=\"option-chip\" (click)=\"optionClick($event, item)\">\n          <mat-radio-button *ngIf=\"!multiple\" [checked]=\"item.selected\"></mat-radio-button>\n          <mat-chip\n              (click)=\"optionClick($event, item)\"\n              [disableRipple]=\"true\"\n              [class]=\"'fs-autocomplete-chip ' + item.class\"\n              [ngClass]=\"{ imaged: item.image, 'size-small': size === 'small', 'size-large': size === 'large' }\"\n              [style.backgroundColor]=\"item.background || background\"\n            [style.color]=\"item.color || color\">\n            <ng-container\n              [ngTemplateOutlet]=\"itemTemplate\"\n              [ngTemplateOutletContext]=\"{ item: item, selecting: true }\">\n            </ng-container>\n            <ng-container\n              [ngTemplateOutlet]=\"itemSuffixTemplate\"\n              [ngTemplateOutletContext]=\"{ item: item, selecting: true, disabled: disabled }\">\n            </ng-container>\n          </mat-chip>\n        </div>\n      </mat-option>\n\n      <ng-container *ngIf=\"noResults !== false\">\n        <ng-template\n          *ngIf=\"noResultsTemplate; else noResultsOption\"\n          [ngTemplateOutlet]=\"noResultsTemplate\"\n          [ngTemplateOutletContext]=\"{ keyword: keyword }\">\n        </ng-template>\n        <ng-template #noResultsOption>\n          <mat-option disabled class=\"no-results\">\n            No results <ng-container *ngIf=\"keyword\">for \"{{keyword}}\"</ng-container>\n          </mat-option>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"staticTemplates.length\">\n        <div class=\"static-templates\">\n          <mat-option\n            *ngFor=\"let staticTemplate of staticTemplates; let i = index\"\n            class=\"static-option\"\n            (click)=\"staticClick($event, i)\">\n            <ng-template *ngTemplateOutlet=\"staticTemplate;context: { test: true }\"></ng-template>\n          </mat-option>\n        </div>\n      </ng-container>\n\n      <mat-option disabled class=\"blank-placeholder\"></mat-option>\n    </mat-autocomplete>\n    <mat-hint *ngIf=\"hint\">{{ hint }}</mat-hint>\n    <input class=\"dummy-input\" #dummyInput tabindex=\"-1\">\n  </mat-form-field>\n</ng-container>\n\n<ng-template #elseInited>\n  <fs-label-field [ngClass]=\"{ 'init-on-click': initOnClick, inited: inited }\">\n    <fs-label>{{placeholder}}</fs-label>\n    <div (click)=\"init()\">\n      <mat-chip-list\n        *ngIf=\"model.length; else none\">\n        <mat-chip\n          class=\"fs-autocomplete-chips-trigger\"\n          *ngFor=\"let item of model\"\n          [disableRipple]=\"true\"\n          [class]=\"'fs-autocomplete-chip ' + item.class\"\n          [disabled]=\"true\"\n          [ngClass]=\"{ imaged: item.image, 'size-small': size === 'small', 'size-large': size === 'large' }\"\n          [style.backgroundColor]=\"item.background || background\"\n          [style.color]=\"item.color || color\">\n          <ng-container\n            [ngTemplateOutlet]=\"itemTemplate\"\n            [ngTemplateOutletContext]=\"{ item: item, selecting: false }\">\n          </ng-container>\n          <ng-container\n            [ngTemplateOutlet]=\"itemSuffixTemplate\"\n            [ngTemplateOutletContext]=\"{ item: item, selecting: false, disabled: disabled }\">\n          </ng-container>\n        </mat-chip>\n      </mat-chip-list>\n    </div>\n    <fs-label-message *ngIf=\"hint\">\n      {{ hint }}\n    </fs-label-message>\n  </fs-label-field>\n\n  <ng-template #none>\n    <span class=\"none-placeholder\" (click)=\"init()\">None</span>\n  </ng-template>\n</ng-template>\n\n<ng-template #itemTemplate let-item=\"item\" let-selecting=\"selecting\">\n  <ng-container *ngIf=\"item.type===dataType.Object\" class=\"item\">\n    <div class=\"item-image\" *ngIf=\"item.image\" [style.backgroundImage]=\"'url(' + item.image + ')'\"></div>\n    <mat-icon class=\"item-icon\" *ngIf=\"item.icon\" [style.color]=\"item.iconColor || item.color\">{{item.icon}}</mat-icon>\n    <span class=\"item-content\">\n      <ng-template\n        [ngTemplateOutlet]=\"objectTemplate\"\n        [ngTemplateOutletContext]=\"{ object: item.data, selecting: selecting }\">\n      </ng-template>\n    </span>\n  </ng-container>\n\n  <ng-container *ngIf=\"item.type===dataType.Text\">\n    {{item.data}}\n  </ng-container>\n</ng-template>\n\n<ng-template #itemSuffixTemplate let-item=\"item\" let-selecting=\"selecting\">\n  <div class=\"item-suffix\">\n    <ng-container\n      *ngIf=\"chipSuffixTemplate\"\n      [ngTemplateOutlet]=\"chipSuffixTemplate\"\n      [ngTemplateOutletContext]=\"{ object: item.data, selecting: selecting, disabled: disabled }\">\n    </ng-container>\n    <a\n        class=\"remove\"\n        *ngIf=\"!selecting && removable && !disabled\"\n        (click)=\"chipRemoved($event, item)\">\n      <mat-icon\n      [style.color]=\"item.color || color\">clear</mat-icon>\n    </a>\n  </div>\n</ng-template>", styles: [".mat-chip-list{outline:transparent}.blank-placeholder{display:none}.none-placeholder{cursor:pointer;color:#0000008a;border-bottom:1px solid transparent}.none-placeholder:hover{border-bottom-style:dashed}.no-results{background-color:inherit}.dummy-input{width:0;height:0;padding:0;border:0;display:table}:host ::ng-deep .fs-autocomplete-chips-trigger{opacity:1!important}:host ::ng-deep .mat-form-field{min-width:225px;width:100%;letter-spacing:inherit}:host ::ng-deep .mat-form-field .mat-form-field-prefix,:host ::ng-deep .mat-form-field .mat-form-field-suffix{align-self:flex-end}:host ::ng-deep .mat-form-field .mat-form-field-prefix .clear,:host ::ng-deep .mat-form-field .mat-form-field-suffix .clear{cursor:pointer}:host ::ng-deep .mat-form-field.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.34375em) scale(.75)}:host ::ng-deep .mat-form-field .mat-chip-list-wrapper{cursor:pointer;line-height:0}:host ::ng-deep .mat-form-field .mat-chip-list-wrapper .mat-chip{line-height:normal}:host ::ng-deep .mat-form-field .mat-chip-list-wrapper .mat-chip:not(.cdk-drag-disabled){cursor:move}:host ::ng-deep .mat-form-field .mat-chip-list-wrapper input.mat-chip-input{width:40px;flex:1 0 40px;margin-right:0;margin-bottom:2px}:host ::ng-deep .mat-chip-list-wrapper .mat-chip{margin:4px 4px 0 0}:host ::ng-deep fs-label-field .field-content{min-height:31px}:host ::ng-deep fs-label-field.init-on-click:not(.inited) .mat-chip,:host ::ng-deep fs-label-field.init-on-click:not(.inited) .mat-chip-list{cursor:pointer}:host ::ng-deep fs-label-field ::ng-deep .field-message{padding-top:7px}:host ::ng-deep .mat-chip-list-wrapper{margin:-4px 0}::ng-deep .fs-autocomplete-chips-panel:not(:hover) .mat-active .option-chip{background-color:#2a2a2a1a}::ng-deep .fs-autocomplete-chips-panel .mat-option-text{align-items:center;display:inline-flex;height:inherit}::ng-deep .fs-autocomplete-chips-panel .static-templates{position:sticky;bottom:0;width:100%;background:#fff}::ng-deep .fs-autocomplete-chips-panel .static-templates mat-option:first-child{border-top:1px solid #e0e0e0}::ng-deep .fs-autocomplete-chips-panel .invalid-message .mat-option-text{line-height:normal;flex-direction:column;align-items:start;font-size:80%}::ng-deep .fs-autocomplete-chips-panel .mat-option{line-height:45px;height:45px}::ng-deep .fs-autocomplete-chips-panel .mat-option.option{padding:0}::ng-deep .fs-autocomplete-chips-panel .mat-option.multiple .option-chip{padding-left:8px}::ng-deep .fs-autocomplete-chips-panel .mat-option .option-chip{-webkit-user-select:none;user-select:none;display:flex;text-overflow:ellipsis;overflow:inherit;cursor:pointer;padding:0 16px;align-items:center;height:inherit;width:100%}::ng-deep .fs-autocomplete-chips-panel .mat-option .option-chip .mat-chip{cursor:pointer;pointer-events:all}::ng-deep .fs-autocomplete-chips-panel .mat-option .option-chip .mat-chip .mat-icon{margin-right:5px}::ng-deep .fs-autocomplete-chips-panel .mat-option .option-chip:hover,::ng-deep .fs-autocomplete-chips-panel .mat-option .add-icon:hover{background-color:#0000001a}::ng-deep .fs-autocomplete-chips-panel .mat-option.mat-active,::ng-deep .fs-autocomplete-chips-panel .mat-option:hover:not(.mat-option-disabled),::ng-deep .fs-autocomplete-chips-panel .mat-option:focus:not(.mat-option-disabled){background:none}::ng-deep .fs-autocomplete-chips-panel .mat-option .add-icon{display:flex;font-size:24px;height:100%;align-items:center;width:45px;display:block;text-align:center;-webkit-user-select:none;user-select:none}::ng-deep .fs-autocomplete-chips-panel .mat-option .add-icon mat-icon{margin:0}::ng-deep .mat-chip.fs-autocomplete-chip{background-color:#f3f3f3;white-space:nowrap;min-height:30px;box-shadow:none!important;-webkit-user-select:none;user-select:none;max-width:100%}::ng-deep .mat-chip.fs-autocomplete-chip:hover:after{opacity:0}::ng-deep .mat-chip.fs-autocomplete-chip.cdk-drag-placeholder{opacity:.5}::ng-deep .mat-chip.fs-autocomplete-chip .item-image{width:30px;height:30px;object-fit:cover;background-repeat:no-repeat;background-size:cover;background-position:50% 50%;margin-right:5px;display:flex;border-radius:50%;flex-shrink:0}::ng-deep .mat-chip.fs-autocomplete-chip .item-content{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}::ng-deep .mat-chip.fs-autocomplete-chip .item-template{display:flex;flex-direction:row;align-items:center}::ng-deep .mat-chip.fs-autocomplete-chip .item-icon{margin:0 5px 0 -5px}::ng-deep .mat-chip.fs-autocomplete-chip .item-suffix{display:flex;align-items:center}::ng-deep .mat-chip.fs-autocomplete-chip .item-suffix a{display:flex}::ng-deep .mat-chip.fs-autocomplete-chip .item-suffix .mat-icon{color:#8f8f8f;opacity:1;margin-left:3px;margin-right:-5px;cursor:pointer;transform:scale(.77)}::ng-deep .mat-chip.fs-autocomplete-chip .item-suffix .mat-icon:hover{color:#202020}::ng-deep .mat-chip.fs-autocomplete-chip.size-small{height:25px;font-size:85%;padding:0 8px;min-height:auto}::ng-deep .mat-chip.fs-autocomplete-chip.size-small .item-image{width:25px;height:25px}::ng-deep .mat-chip.fs-autocomplete-chip.size-small .item-icon{transform:scale(.8);margin-right:0}::ng-deep .mat-chip.fs-autocomplete-chip.imaged{padding-left:0}::ng-deep .mat-chip.fs-autocomplete-chip.imaged .item-image{margin-left:-1px}\n"], components: [{ type: i1.MatFormField, selector: "mat-form-field", inputs: ["color", "floatLabel", "appearance", "hideRequiredMarker", "hintLabel"], exportAs: ["matFormField"] }, { type: i2.MatChipList, selector: "mat-chip-list", inputs: ["aria-orientation", "multiple", "compareWith", "value", "required", "placeholder", "disabled", "selectable", "tabIndex", "errorStateMatcher"], outputs: ["change", "valueChange"], exportAs: ["matChipList"] }, { type: i3.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { type: i4.MatAutocomplete, selector: "mat-autocomplete", inputs: ["disableRipple"], exportAs: ["matAutocomplete"] }, { type: i5.MatOption, selector: "mat-option", exportAs: ["matOption"] }, { type: i6.MatRadioButton, selector: "mat-radio-button", inputs: ["disableRipple", "tabIndex"], exportAs: ["matRadioButton"] }, { type: i7.FsLabelFieldComponent, selector: "fs-label-field", inputs: ["bottomMargin", "topMargin", "labelMargin"] }, { type: i7.FsLabelComponent, selector: "fs-label" }, { type: i7.FsLabelMessageComponent, selector: "fs-label-message" }], directives: [{ type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i8.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i9.CdkDropListGroup, selector: "[cdkDropListGroup]", inputs: ["cdkDropListGroupDisabled"], exportAs: ["cdkDropListGroup"] }, { type: i8.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i9.CdkDropList, selector: "[cdkDropList], cdk-drop-list", inputs: ["cdkDropListConnectedTo", "id", "cdkDropListEnterPredicate", "cdkDropListSortPredicate", "cdkDropListDisabled", "cdkDropListSortingDisabled", "cdkDropListAutoScrollDisabled", "cdkDropListOrientation", "cdkDropListLockAxis", "cdkDropListData", "cdkDropListAutoScrollStep"], outputs: ["cdkDropListDropped", "cdkDropListEntered", "cdkDropListExited", "cdkDropListSorted"], exportAs: ["cdkDropList"] }, { type: i2.MatChip, selector: "mat-basic-chip, [mat-basic-chip], mat-chip, [mat-chip]", inputs: ["color", "disableRipple", "tabIndex", "selected", "value", "selectable", "disabled", "removable"], outputs: ["selectionChange", "destroyed", "removed"], exportAs: ["matChip"] }, { type: i9.CdkDrag, selector: "[cdkDrag]", inputs: ["cdkDragDisabled", "cdkDragStartDelay", "cdkDragLockAxis", "cdkDragConstrainPosition", "cdkDragPreviewClass", "cdkDragBoundary", "cdkDragRootElement", "cdkDragPreviewContainer", "cdkDragData", "cdkDragFreeDragPosition"], outputs: ["cdkDragStarted", "cdkDragReleased", "cdkDragEnded", "cdkDragEntered", "cdkDragExited", "cdkDragDropped", "cdkDragMoved"], exportAs: ["cdkDrag"] }, { type: i9.CdkDragHandle, selector: "[cdkDragHandle]", inputs: ["cdkDragHandleDisabled"] }, { type: i8.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i4.MatAutocompleteTrigger, selector: "input[matAutocomplete], textarea[matAutocomplete]", exportAs: ["matAutocompleteTrigger"] }, { type: i2.MatChipInput, selector: "input[matChipInputFor]", inputs: ["matChipInputSeparatorKeyCodes", "placeholder", "id", "matChipInputFor", "matChipInputAddOnBlur", "disabled"], outputs: ["matChipInputTokenEnd"], exportAs: ["matChipInput", "matChipInputFor"] }, { type: i1.MatSuffix, selector: "[matSuffix]" }, { type: i1.MatHint, selector: "mat-hint", inputs: ["align", "id"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: FsAutocompleteChipsComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'fs-autocomplete-chips',
                    templateUrl: './autocomplete-chips.component.html',
                    styleUrls: ['./autocomplete-chips.component.scss'],
                    providers: [{
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => FsAutocompleteChipsComponent),
                            multi: true
                        }],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }]; }, propDecorators: { fetch: [{
                type: Input
            }], readonly: [{
                type: Input
            }], size: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], chipImage: [{
                type: Input
            }], chipBackground: [{
                type: Input
            }], chipColor: [{
                type: Input
            }], chipIcon: [{
                type: Input
            }], chipIconColor: [{
                type: Input
            }], chipClass: [{
                type: Input
            }], hint: [{
                type: Input
            }], allowText: [{
                type: Input
            }], allowObject: [{
                type: Input
            }], delay: [{
                type: Input
            }], validateText: [{
                type: Input
            }], invalidTextMessage: [{
                type: Input
            }], removable: [{
                type: Input
            }], allowClear: [{
                type: Input
            }], color: [{
                type: Input
            }], background: [{
                type: Input
            }], orderable: [{
                type: Input
            }], limit: [{
                type: Input
            }], initOnClick: [{
                type: Input
            }], fetchOnFocus: [{
                type: Input
            }], multiple: [{
                type: Input
            }], panelClass: [{
                type: Input
            }], compareWith: [{
                type: Input
            }], setDisabled: [{
                type: Input,
                args: ['disabled']
            }], panelWidth: [{
                type: Input
            }], selected: [{
                type: Output
            }], removed: [{
                type: Output
            }], reordered: [{
                type: Output
            }], clearEvent: [{
                type: Output,
                args: ['clear']
            }], formWrapper: [{
                type: HostBinding,
                args: ['class.fs-form-wrapper']
            }], dragStart: [{
                type: HostListener,
                args: ['dragstart', ['$event']]
            }], input: [{
                type: ViewChild,
                args: ['input']
            }], dummyInput: [{
                type: ViewChild,
                args: ['dummyInput']
            }], autocompleteTriggers: [{
                type: ViewChildren,
                args: [MatAutocompleteTrigger]
            }], autocompleteTrigger: [{
                type: ViewChild,
                args: [MatAutocompleteTrigger]
            }], formField: [{
                type: ViewChild,
                args: [MatFormField, { read: ElementRef }]
            }], objectTemplate: [{
                type: ContentChild,
                args: [FsAutocompleteObjectDirective, { read: TemplateRef }]
            }], chipSuffixTemplate: [{
                type: ContentChild,
                args: [FsAutocompleteChipSuffixDirective, { read: TemplateRef }]
            }], chipsSuffixTemplate: [{
                type: ContentChild,
                args: [FsAutocompleteChipsSuffixDirective, { read: TemplateRef }]
            }], noResultsTemplate: [{
                type: ContentChild,
                args: [FsAutocompleteChipsNoResultsDirective, { read: TemplateRef, static: true }]
            }], staticTemplates: [{
                type: ContentChildren,
                args: [FsAutocompleteChipsStaticDirective, { read: TemplateRef }]
            }], staticDirectives: [{
                type: ContentChildren,
                args: [FsAutocompleteChipsStaticDirective]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b2NvbXBsZXRlLWNoaXBzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvY29tcG9uZW50cy9hdXRvY29tcGxldGUtY2hpcHMvYXV0b2NvbXBsZXRlLWNoaXBzLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9hcHAvY29tcG9uZW50cy9hdXRvY29tcGxldGUtY2hpcHMvYXV0b2NvbXBsZXRlLWNoaXBzLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCx1QkFBdUIsRUFBRSxpQkFBaUIsRUFDMUMsU0FBUyxFQUNULFlBQVksRUFDWixVQUFVLEVBQ1YsWUFBWSxFQUNaLFVBQVUsRUFDVixXQUFXLEVBQ1gsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBQ04sV0FBVyxFQUNYLFNBQVMsRUFDVCxlQUFlLEVBQ2YsU0FBUyxFQUNULFlBQVksR0FDYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBZ0Msc0JBQXNCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUN0RyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRTFELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQzVDLE9BQU8sRUFBZSxlQUFlLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUV0RSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFDdEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FB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SUFBSSxFQUFFLFdBQVcsRUFBRTtnQkFJM0Qsa0JBQWtCO3NCQUR4QixZQUFZO3VCQUFDLGlDQUFpQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtnQkFJL0QsbUJBQW1CO3NCQUR6QixZQUFZO3VCQUFDLGtDQUFrQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtnQkFJaEUsaUJBQWlCO3NCQUR2QixZQUFZO3VCQUFDLHFDQUFxQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUlqRixlQUFlO3NCQURyQixlQUFlO3VCQUFDLGtDQUFrQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtnQkFJbkUsZ0JBQWdCO3NCQUR0QixlQUFlO3VCQUFDLGtDQUFrQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFRlbXBsYXRlUmVmLFxuICBWaWV3Q2hpbGQsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgUXVlcnlMaXN0LFxuICBWaWV3Q2hpbGRyZW4sXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0Rm9ybUZpZWxkIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZm9ybS1maWVsZCc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBNYXRBdXRvY29tcGxldGVTZWxlY3RlZEV2ZW50LCBNYXRBdXRvY29tcGxldGVUcmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7IEJBQ0tTUEFDRSwgREVMRVRFIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2tleWNvZGVzJztcblxuaW1wb3J0IHsgaXNFcXVhbCwgcmFuZG9tIH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IENka0RyYWdEcm9wLCBtb3ZlSXRlbUluQXJyYXkgfSBmcm9tICdAYW5ndWxhci9jZGsvZHJhZy1kcm9wJztcblxuaW1wb3J0IHsgU3ViamVjdCwgb2YsIHRpbWVyLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YWtlVW50aWwsIHN3aXRjaE1hcCwgdGFwLCBkZWJvdW5jZSwgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBnZXRPYmplY3RWYWx1ZSB9IGZyb20gJy4uLy4uL2hlbHBlcnMvZ2V0LW9iamVjdC12YWx1ZSc7XG5pbXBvcnQgeyBJQXV0b2NvbXBsZXRlSXRlbSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvYXV0b2NvbXBsZXRlLWl0ZW0uaW50ZXJmYWNlJztcbmltcG9ydCB7IERhdGFUeXBlIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9kYXRhLXR5cGUnO1xuaW1wb3J0IHsgRnNBdXRvY29tcGxldGVPYmplY3REaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL2F1dG9jb21wbGV0ZS1vYmplY3QvYXV0b2NvbXBsZXRlLW9iamVjdC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRnNBdXRvY29tcGxldGVDaGlwc05vUmVzdWx0c0RpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvYXV0b2NvbXBsZXRlLW5vLXJlc3VsdHMvYXV0b2NvbXBsZXRlLW5vLXJlc3VsdHMuZGlyZWN0aXZlJztcbmltcG9ydCB7IEZzQXV0b2NvbXBsZXRlQ2hpcHNTdGF0aWNEaXJlY3RpdmUgfSBmcm9tICcuLy4uLy4uL2RpcmVjdGl2ZXMvc3RhdGljLXRlbXBsYXRlL3N0YXRpYy10ZW1wbGF0ZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRnNBdXRvY29tcGxldGVDaGlwU3VmZml4RGlyZWN0aXZlIH0gZnJvbSAnLi8uLi8uLi9kaXJlY3RpdmVzL2NoaXAtc3VmZml4L2NoaXAtc3VmZml4LmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBGc0F1dG9jb21wbGV0ZUNoaXBzU3VmZml4RGlyZWN0aXZlIH0gZnJvbSAnLi8uLi8uLi9kaXJlY3RpdmVzL2NoaXBzLXN1ZmZpeC9jaGlwcy1zdWZmaXguZGlyZWN0aXZlJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdmcy1hdXRvY29tcGxldGUtY2hpcHMnLFxuICB0ZW1wbGF0ZVVybDogJy4vYXV0b2NvbXBsZXRlLWNoaXBzLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbICcuL2F1dG9jb21wbGV0ZS1jaGlwcy5jb21wb25lbnQuc2NzcycgXSxcbiAgcHJvdmlkZXJzOiBbe1xuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEZzQXV0b2NvbXBsZXRlQ2hpcHNDb21wb25lbnQpLFxuICAgIG11bHRpOiB0cnVlXG4gIH1dLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgRnNBdXRvY29tcGxldGVDaGlwc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBDb250cm9sVmFsdWVBY2Nlc3NvciB7XG5cbiAgQElucHV0KCkgcHVibGljIGZldGNoID0gbnVsbDtcbiAgQElucHV0KCkgcHVibGljIHJlYWRvbmx5ID0gZmFsc2U7XG4gIEBJbnB1dCgpIHB1YmxpYyBzaXplOiAnbGFyZ2UnIHwgJ3NtYWxsJyA9ICdsYXJnZSc7XG4gIEBJbnB1dCgpIHB1YmxpYyBwbGFjZWhvbGRlciA9ICcnO1xuICBASW5wdXQoKSBwdWJsaWMgY2hpcEltYWdlID0gJ2ltYWdlJztcbiAgQElucHV0KCkgcHVibGljIGNoaXBCYWNrZ3JvdW5kOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHB1YmxpYyBjaGlwQ29sb3I6IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGNoaXBJY29uOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHB1YmxpYyBjaGlwSWNvbkNvbG9yOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHB1YmxpYyBjaGlwQ2xhc3M6IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGhpbnQ6IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGFsbG93VGV4dDogYm9vbGVhbjtcbiAgQElucHV0KCkgcHVibGljIGFsbG93T2JqZWN0ID0gdHJ1ZTtcbiAgQElucHV0KCkgcHVibGljIGRlbGF5ID0gMjAwO1xuICBASW5wdXQoKSBwdWJsaWMgdmFsaWRhdGVUZXh0OiAodGV4dDogc3RyaW5nKSA9PiBib29sZWFuO1xuICBASW5wdXQoKSBwdWJsaWMgaW52YWxpZFRleHRNZXNzYWdlID0gJyc7XG4gIEBJbnB1dCgpIHB1YmxpYyByZW1vdmFibGUgPSB0cnVlO1xuICBASW5wdXQoKSBwdWJsaWMgYWxsb3dDbGVhciA9IHRydWU7XG4gIEBJbnB1dCgpIHB1YmxpYyBjb2xvciA9ICcnO1xuICBASW5wdXQoKSBwdWJsaWMgYmFja2dyb3VuZCA9ICcnO1xuICBASW5wdXQoKSBwdWJsaWMgb3JkZXJhYmxlID0gZmFsc2U7XG4gIEBJbnB1dCgpIHB1YmxpYyBsaW1pdCA9IDA7XG4gIEBJbnB1dCgpIHB1YmxpYyBpbml0T25DbGljayA9IGZhbHNlO1xuICBASW5wdXQoKSBwdWJsaWMgZmV0Y2hPbkZvY3VzID0gdHJ1ZTtcbiAgQElucHV0KCkgcHVibGljIG11bHRpcGxlID0gdHJ1ZTtcbiAgQElucHV0KCkgcHVibGljIHNldCBwYW5lbENsYXNzKHZhbHVlKSB7XG4gICAgdGhpcy5wYW5lbENsYXNzZXMgPSBbXG4gICAgICAuLi5bJ2ZzLWFjY291bnQtcGlja2VyLWF1dG9jb21wbGV0ZScsICdmcy1hdXRvY29tcGxldGUtY2hpcHMtcGFuZWwnXSxcbiAgICAgIHZhbHVlLFxuICAgIF0uam9pbignICcpO1xuICB9O1xuXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBjb21wYXJlV2l0aCA9IChvMTogYW55LCBvMjogYW55KSA9PiB7XG4gICAgcmV0dXJuIGlzRXF1YWwobzEsIG8yKTtcbiAgfTtcblxuICBASW5wdXQoJ2Rpc2FibGVkJylcbiAgc2V0IHNldERpc2FibGVkKHZhbHVlKSB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IHZhbHVlO1xuICB9XG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBwYW5lbFdpZHRoOiBzdHJpbmcgfCBudW1iZXIgPSBudWxsO1xuXG4gIEBPdXRwdXQoKSBwdWJsaWMgc2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBwdWJsaWMgcmVtb3ZlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIHB1YmxpYyByZW9yZGVyZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoJ2NsZWFyJykgcHVibGljIGNsZWFyRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mcy1mb3JtLXdyYXBwZXInKVxuICBwdWJsaWMgZm9ybVdyYXBwZXIgPSB0cnVlO1xuXG4gIEBIb3N0TGlzdGVuZXIoJ2RyYWdzdGFydCcsIFsnJGV2ZW50J10pXG4gIHB1YmxpYyBkcmFnU3RhcnQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfTtcblxuICBAVmlld0NoaWxkKCdpbnB1dCcpXG4gIHB1YmxpYyBpbnB1dDogRWxlbWVudFJlZiA9IG51bGw7XG5cbiAgQFZpZXdDaGlsZCgnZHVtbXlJbnB1dCcpXG4gIHB1YmxpYyBkdW1teUlucHV0OiBFbGVtZW50UmVmID0gbnVsbDtcblxuICBAVmlld0NoaWxkcmVuKE1hdEF1dG9jb21wbGV0ZVRyaWdnZXIpXG4gIHB1YmxpYyBhdXRvY29tcGxldGVUcmlnZ2VyczogUXVlcnlMaXN0PE1hdEF1dG9jb21wbGV0ZVRyaWdnZXI+O1xuXG4gIEBWaWV3Q2hpbGQoTWF0QXV0b2NvbXBsZXRlVHJpZ2dlcilcbiAgcHVibGljIGF1dG9jb21wbGV0ZVRyaWdnZXIgPSBudWxsO1xuXG4gIEBWaWV3Q2hpbGQoTWF0Rm9ybUZpZWxkLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSlcbiAgcHVibGljIGZvcm1GaWVsZDogRWxlbWVudFJlZiA9IG51bGxcblxuICBAQ29udGVudENoaWxkKEZzQXV0b2NvbXBsZXRlT2JqZWN0RGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pXG4gIHB1YmxpYyBvYmplY3RUZW1wbGF0ZTogVGVtcGxhdGVSZWY8RnNBdXRvY29tcGxldGVPYmplY3REaXJlY3RpdmU+ID0gbnVsbDtcblxuICBAQ29udGVudENoaWxkKEZzQXV0b2NvbXBsZXRlQ2hpcFN1ZmZpeERpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9KVxuICBwdWJsaWMgY2hpcFN1ZmZpeFRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxGc0F1dG9jb21wbGV0ZUNoaXBTdWZmaXhEaXJlY3RpdmU+ID0gbnVsbDtcblxuICBAQ29udGVudENoaWxkKEZzQXV0b2NvbXBsZXRlQ2hpcHNTdWZmaXhEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSlcbiAgcHVibGljIGNoaXBzU3VmZml4VGVtcGxhdGU6IFRlbXBsYXRlUmVmPEZzQXV0b2NvbXBsZXRlQ2hpcHNTdWZmaXhEaXJlY3RpdmU+ID0gbnVsbDtcblxuICBAQ29udGVudENoaWxkKEZzQXV0b2NvbXBsZXRlQ2hpcHNOb1Jlc3VsdHNEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYsIHN0YXRpYzogdHJ1ZSB9KVxuICBwdWJsaWMgbm9SZXN1bHRzVGVtcGxhdGU6IFRlbXBsYXRlUmVmPEZzQXV0b2NvbXBsZXRlQ2hpcHNOb1Jlc3VsdHNEaXJlY3RpdmU+ID0gbnVsbDtcblxuICBAQ29udGVudENoaWxkcmVuKEZzQXV0b2NvbXBsZXRlQ2hpcHNTdGF0aWNEaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSlcbiAgcHVibGljIHN0YXRpY1RlbXBsYXRlczogVGVtcGxhdGVSZWY8RnNBdXRvY29tcGxldGVDaGlwc1N0YXRpY0RpcmVjdGl2ZT5bXSA9IG51bGw7XG5cbiAgQENvbnRlbnRDaGlsZHJlbihGc0F1dG9jb21wbGV0ZUNoaXBzU3RhdGljRGlyZWN0aXZlKVxuICBwdWJsaWMgc3RhdGljRGlyZWN0aXZlczogUXVlcnlMaXN0PEZzQXV0b2NvbXBsZXRlQ2hpcHNTdGF0aWNEaXJlY3RpdmU+O1xuXG4gIHB1YmxpYyBkYXRhOiBJQXV0b2NvbXBsZXRlSXRlbVtdO1xuICBwdWJsaWMgdGV4dERhdGE6IFBhcnRpYWw8SUF1dG9jb21wbGV0ZUl0ZW0+ID0ge307XG4gIHB1YmxpYyBkaXNhYmxlZCA9IGZhbHNlO1xuICBwdWJsaWMgZGF0YVR5cGUgPSBEYXRhVHlwZTtcbiAgcHVibGljIGtleXdvcmQ6IHN0cmluZyA9IG51bGw7XG4gIHB1YmxpYyBub1Jlc3VsdHMgPSBmYWxzZTtcbiAgcHVibGljIG5hbWUgPSAnYXV0b2NvbXBsZXRlXycuY29uY2F0KHJhbmRvbSgxLCA5OTk5OTk5KSk7XG4gIHB1YmxpYyBfbW9kZWw6IGFueVtdID0gW107XG4gIHB1YmxpYyBpbml0ZWQgPSBmYWxzZTtcbiAgcHVibGljIHBhbmVsQ2xhc3Nlczogc3RyaW5nO1xuXG4gIHB1YmxpYyBnZXQgbW9kZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21vZGVsO1xuICB9XG5cbiAgcHVibGljIGdldCBpbnB1dEVsKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0ID8gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50IDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgX2tleXdvcmQkID0gbmV3IFN1YmplY3Q8SW5wdXRFdmVudD4oKTtcbiAgcHJpdmF0ZSBfZmV0Y2gkID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuICBwcml2YXRlIF9kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gIHByaXZhdGUgX29uVG91Y2hlZCA9ICgpID0+IHsgfTtcbiAgcHJpdmF0ZSBfb25DaGFuZ2UgPSAodmFsdWU6IGFueSkgPT4geyB9O1xuXG4gIHB1YmxpYyByZWdpc3Rlck9uQ2hhbmdlKGZuOiAodmFsdWU6IGFueSkgPT4gYW55KTogdm9pZCB7IHRoaXMuX29uQ2hhbmdlID0gZm47IH1cbiAgcHVibGljIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiBhbnkpOiB2b2lkIHsgdGhpcy5fb25Ub3VjaGVkID0gZm47IH1cblxuICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY2RSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICApIHtcbiAgICB0aGlzLnBhbmVsQ2xhc3MgPSAnJztcbiAgfVxuXG4gIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmluaXRlZCA9ICF0aGlzLmluaXRPbkNsaWNrO1xuXG4gICAgdGhpcy5fbGlzdGVuRmV0Y2goKTtcbiAgICB0aGlzLl9saXN0ZW5LZXl3b3JkQ2hhbmdlKCk7XG4gIH1cblxuICBwdWJsaWMgaW5pdChvcHRpb25zID0geyBmb2N1czogdHJ1ZSB9KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLmluaXRlZCA9IHRydWU7XG4gICAgICB0aGlzLl9jZFJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICAgIGlmIChvcHRpb25zLmZvY3VzKSB7XG4gICAgICAgIHRoaXMuZm9jdXMoeyBkZWxheTogMjAwIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkcm9wKGV2ZW50OiBDZGtEcmFnRHJvcDx7IGluZGV4OiBudW1iZXIgfT4pOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2aW91c0luZGV4ID0gZXZlbnQucHJldmlvdXNDb250YWluZXIuZGF0YS5pbmRleDtcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmNvbnRhaW5lci5kYXRhLmluZGV4O1xuXG4gICAgbW92ZUl0ZW1JbkFycmF5KHRoaXMuX21vZGVsLCBwcmV2aW91c0luZGV4LCBpbmRleCk7XG5cbiAgICB0aGlzLnJlb3JkZXJlZC5lbWl0KHtcbiAgICAgIGl0ZW06IHRoaXMuX21vZGVsW2luZGV4XSxcbiAgICAgIGZyb206IHByZXZpb3VzSW5kZXgsXG4gICAgICB0bzogaW5kZXgsXG4gICAgICBpdGVtczogdGhpcy5fbW9kZWwsXG4gICAgfSk7XG4gICAgdGhpcy5fdXBkYXRlTW9kZWwodGhpcy5fbW9kZWwpO1xuICB9XG5cbiAgcHVibGljIHNlbGVjdEFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLmRhdGEuZm9yRWFjaCgoc2VsZWN0ZWQpID0+IHtcbiAgICAgIGlmIChzZWxlY3RlZC50eXBlID09PSBEYXRhVHlwZS5PYmplY3QpIHtcbiAgICAgICAgdGhpcy5fYWRkT2JqZWN0KHNlbGVjdGVkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGVjdGVkLnR5cGUgPT09IERhdGFUeXBlLlRleHQpIHtcbiAgICAgICAgdGhpcy5fYWRkVGV4dChzZWxlY3RlZC5kYXRhKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBpbnB1dGVkKGV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMucmVhZG9ubHkgfHwgdGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2tleXdvcmQkLm5leHQoZXZlbnQpO1xuICB9XG5cbiAgcHVibGljIGtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yZWFkb25seSB8fCB0aGlzLmRpc2FibGVkIHx8IFsnRW50ZXInLCAnQXJyb3dEb3duJywgJ0Fycm93VXAnXS5pbmRleE9mKGV2ZW50LmNvZGUpICE9PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ1RhYicpIHtcbiAgICAgIGNvbnN0IGFjdGl2ZU9wdGlvbiA9IHRoaXMuYXV0b2NvbXBsZXRlVHJpZ2dlci5hY3RpdmVPcHRpb247XG4gICAgICBpZiAoYWN0aXZlT3B0aW9uKSB7XG4gICAgICAgIGlmKGFjdGl2ZU9wdGlvbi52YWx1ZS50eXBlID09PSBEYXRhVHlwZS5PYmplY3QpIHtcbiAgICAgICAgICB0aGlzLl9hZGRPYmplY3QoYWN0aXZlT3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkLmVtaXQoYWN0aXZlT3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmKGFjdGl2ZU9wdGlvbi52YWx1ZS50eXBlID09PSBEYXRhVHlwZS5UZXh0KSB7XG4gICAgICAgICAgdGhpcy5fYWRkVGV4dCh0aGlzLmtleXdvcmQpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuZW1pdCh0aGlzLmtleXdvcmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuX2NsZWFyRGF0YSgpO1xuICB9XG5cbiAgcHVibGljIGNoaXBDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBjaGlwS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCwgaW5kZXgpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gQkFDS1NQQUNFIHx8IGV2ZW50LmtleUNvZGUgPT09IERFTEVURSkge1xuICAgICAgaWYodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICB0aGlzLm1vZGVsLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZU1vZGVsKHRoaXMubW9kZWwpO1xuICAgICAgfSBlbHNlIHsgICAgICAgIFxuICAgICAgICB0aGlzLl91cGRhdGVNb2RlbChbXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNoaXBSZW1vdmVkKGV2ZW50OiBVSUV2ZW50LCBpdGVtKTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICB0aGlzLl9tb2RlbCA9IHRoaXMubW9kZWxcbiAgICAgIC5maWx0ZXIoKG1vZGVsSXRlbSkgPT4gbW9kZWxJdGVtICE9PSBpdGVtKTtcblxuICAgIHRoaXMuX3VwZGF0ZU1vZGVsKHRoaXMuX21vZGVsKTtcbiAgICB0aGlzLnJlbW92ZWQuZW1pdChpdGVtKTtcbiAgICB0aGlzLnVuZm9jdXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBmb2N1cyhvcHRpb25zID0geyBkZWxheTogMH0pOiB2b2lkIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuICAgIH0sIG9wdGlvbnMuZGVsYXkpOyAvLyBIYWNrOiBEZWxheSB0byB3YWl0IGZvciBhbmltYXRpb24gdG8gZmluaXNoXG4gIH1cblxuICBwdWJsaWMgdW5mb2N1cygpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmKHRoaXMuZHVtbXlJbnB1dCkge1xuICAgICAgICB0aGlzLmR1bW15SW5wdXQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGNsZWFyQ2xpY2soZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmNsZWFyKHRydWUpO1xuICAgIHRoaXMuY2xlYXJFdmVudC5lbWl0KCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoY2xvc2VQYW5lbCA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAoY2xvc2VQYW5lbCkge1xuICAgICAgdGhpcy5jbG9zZVBhbmVsKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2xlYXJJbnB1dCgpO1xuICAgIHRoaXMubm9SZXN1bHRzID0gZmFsc2U7XG4gICAgdGhpcy5fdXBkYXRlTW9kZWwoW10pO1xuICB9XG5cbiAgcHVibGljIGNsb3NlUGFuZWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYXV0b2NvbXBsZXRlVHJpZ2dlcikge1xuICAgICAgdGhpcy5hdXRvY29tcGxldGVUcmlnZ2VyLmNsb3NlUGFuZWwoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY2xvc2VkKCk6IHZvaWQge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5fY2xvc2UoKTtcbiAgICAgIGlmICh0aGlzLmluaXRPbkNsaWNrKSB7XG4gICAgICAgIC8vIFdhaXQgZm9yIGtleURvd24oKSB0byBmaXJlIHRvIHByb2Nlc3NcbiAgICAgICAgICB0aGlzLmluaXRlZCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuX2NkUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2xlYXJEYXRhKCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZm9jdXNlZChlKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJJbnB1dCgpO1xuICAgIGlmICh0aGlzLmZldGNoT25Gb2N1cykge1xuICAgICAgdGhpcy5fZmV0Y2goKTtcbiAgICAgIHRoaXMuYXV0b2NvbXBsZXRlVHJpZ2dlci5vcGVuUGFuZWwoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3B0aW9uQ2xpY2soZXZlbnQ6IFVJRXZlbnQsIHZhbHVlOiBhbnksIHJlZm9jdXMgPSBmYWxzZSk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgXG4gICAgLy8gQ2xlYXIgaW5wdXQgYmVmb3JlIGNsb3NlIHRvIHByZXZlbnQgYWRkaW5nIHRleHQgaXRlbSB3aGljaCB3YXMgbm90IHNlbGVjdGVkXG4gICAgaWYoIXJlZm9jdXMpIHtcbiAgICAgIHRoaXMuX2NsZWFySW5wdXQoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgdGhpcy5fc2VsZWN0KHZhbHVlLCB7IGZldGNoOiAhdGhpcy5mZXRjaE9uRm9jdXMgfSk7XG4gICAgICBpZiAoIXJlZm9jdXMpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBhbmVsKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NlbGVjdCh2YWx1ZSwgeyBmZXRjaDogZmFsc2UgfSk7XG4gICAgICB0aGlzLl9jbG9zZSgpO1xuICAgICAgdGhpcy5jbG9zZVBhbmVsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9wdGlvblNlbGVjdGVkKGV2ZW50OiBNYXRBdXRvY29tcGxldGVTZWxlY3RlZEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCFldmVudC5vcHRpb24udmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zZWxlY3QoZXZlbnQub3B0aW9uLnZhbHVlKTtcbiAgICB0aGlzLl9jbGVhckRhdGEoKTtcbiAgICB0aGlzLl9jbGVhcklucHV0KCk7XG4gIH1cblxuICBwdWJsaWMgd3JpdGVWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xuXG4gICAgICB2YWx1ZSA9IHZhbHVlLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnID9cbiAgICAgICAgdGhpcy5fY3JlYXRlT2JqZWN0SXRlbShpdGVtKSA6XG4gICAgICAgIHRoaXMuX2NyZWF0ZVRleHRJdGVtKGl0ZW0sIHRydWUpO1xuICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLl9tb2RlbCA9IHZhbHVlO1xuICAgIHRoaXMuX2NkUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpY0NsaWNrKGV2ZW50OiBLZXlib2FyZEV2ZW50LCBpbmRleCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBzdGF0aWNEaXJlY3RpdmU6IEZzQXV0b2NvbXBsZXRlQ2hpcHNTdGF0aWNEaXJlY3RpdmUgPSB0aGlzLnN0YXRpY0RpcmVjdGl2ZXMudG9BcnJheSgpW2luZGV4XTtcbiAgICBzdGF0aWNEaXJlY3RpdmUuY2xpY2suZW1pdChldmVudCk7XG4gICAgaWYgKHRoaXMuaW5wdXRFbCkge1xuICAgICAgdGhpcy5pbnB1dEVsLmJsdXIoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5fZGVzdHJveSQubmV4dCgpO1xuICAgIHRoaXMuX2Rlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckRhdGEoKTogdm9pZCB7XG4gICAgdGhpcy5kYXRhID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFySW5wdXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaW5wdXRFbCkge1xuICAgICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gJyc7XG4gICAgfVxuXG4gICAgdGhpcy50ZXh0RGF0YSA9IHt9O1xuICAgIHRoaXMua2V5d29yZCA9ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2VsZWN0KHNlbGVjdGVkLCBvcHRpb25zOiB7IGZldGNoPzogYm9vbGVhbiB9ID0ge30pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgIHRoaXMuX21vZGVsID0gW107XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YSkge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGEuaW5kZXhPZihzZWxlY3RlZCk7XG5cbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5kYXRhLnNwbGljZShpbmRleCwgMSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuYWxsb3dPYmplY3QgJiYgdGhpcy5hbGxvd1RleHQgPyBzZWxlY3RlZCA6IHNlbGVjdGVkLmRhdGE7XG4gICAgaWYgKHNlbGVjdGVkLnR5cGUgPT09IERhdGFUeXBlLk9iamVjdCkge1xuICAgICAgaWYgKCF0aGlzLl9tb2RlbC5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5fYWRkT2JqZWN0KHNlbGVjdGVkKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHNlbGVjdGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2VsZWN0ZWQudHlwZSA9PT0gRGF0YVR5cGUuVGV4dCkge1xuICAgICAgaWYgKCF0aGlzLl9tb2RlbC5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5fYWRkVGV4dChzZWxlY3RlZC5kYXRhKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHNlbGVjdGVkLmRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmZldGNoICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5fZmV0Y2goKTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmF1dG9jb21wbGV0ZVRyaWdnZXIpIHtcbiAgICAgICAgICB0aGlzLmF1dG9jb21wbGV0ZVRyaWdnZXIudXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIF9jcmVhdGVUZXh0SXRlbShkYXRhLCB2YWxpZDogYm9vbGVhbik6IElBdXRvY29tcGxldGVJdGVtIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YSxcbiAgICAgIHR5cGU6IERhdGFUeXBlLlRleHQsXG4gICAgICB2YWxpZCxcbiAgICB9OyBcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZU9iamVjdEl0ZW0oZGF0YSk6IElBdXRvY29tcGxldGVJdGVtIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YSxcbiAgICAgIHR5cGU6IERhdGFUeXBlLk9iamVjdCxcbiAgICAgIGltYWdlOiBnZXRPYmplY3RWYWx1ZShkYXRhLCB0aGlzLmNoaXBJbWFnZSksXG4gICAgICBpY29uOiBnZXRPYmplY3RWYWx1ZShkYXRhLCB0aGlzLmNoaXBJY29uKSxcbiAgICAgIGljb25Db2xvcjogZ2V0T2JqZWN0VmFsdWUoZGF0YSwgdGhpcy5jaGlwSWNvbkNvbG9yKSB8fCB0aGlzLmNoaXBJY29uQ29sb3IsXG4gICAgICBjbGFzczogZ2V0T2JqZWN0VmFsdWUoZGF0YSwgdGhpcy5jaGlwQ2xhc3MpIHx8IHRoaXMuY2hpcENsYXNzLFxuICAgICAgYmFja2dyb3VuZDogZ2V0T2JqZWN0VmFsdWUoZGF0YSwgdGhpcy5jaGlwQmFja2dyb3VuZCkgfHwgdGhpcy5jaGlwQmFja2dyb3VuZCxcbiAgICAgIGNvbG9yOiBnZXRPYmplY3RWYWx1ZShkYXRhLCB0aGlzLmNoaXBDb2xvcikgfHwgdGhpcy5jaGlwQ29sb3JcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfdmFsaWRhdGVUZXh0KHRleHQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gU3RyaW5nKHRleHQpLnRyaW0oKS5sZW5ndGggJiYgKCF0aGlzLnZhbGlkYXRlVGV4dCB8fCB0aGlzLnZhbGlkYXRlVGV4dCh0ZXh0KSk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVNb2RlbCh2YWx1ZSk6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsID0gdmFsdWU7XG5cbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuX21vZGVsLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmFsbG93VGV4dCB8fCAhdGhpcy5hbGxvd09iamVjdCkge1xuICAgICAgICByZXR1cm4gaXRlbS5kYXRhO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9KTtcblxuICAgIHRoaXMuX29uQ2hhbmdlKHRoaXMubXVsdGlwbGUgPyBtb2RlbCA6IG1vZGVsWzBdKTtcbiAgICB0aGlzLl9vblRvdWNoZWQoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZE9iamVjdChvYmplY3QpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVNb2RlbChbLi4udGhpcy5fbW9kZWwsIG9iamVjdF0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkVGV4dCh0ZXh0KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3ZhbGlkYXRlVGV4dCh0ZXh0KSkge1xuICAgICAgY29uc3QgdGV4dE9iamVjdCA9IHRoaXMuX2NyZWF0ZVRleHRJdGVtKHRleHQsIHRydWUpO1xuICAgICAgdGhpcy5fdXBkYXRlTW9kZWwoWy4uLnRoaXMuX21vZGVsLCB0ZXh0T2JqZWN0XSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2xvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJJbnB1dCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmV0Y2goKTogdm9pZCB7XG4gICAgdGhpcy5fZmV0Y2gkLm5leHQobnVsbCk7XG4gIH1cblxuICBwcml2YXRlIF9saXN0ZW5LZXl3b3JkQ2hhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuX2tleXdvcmQkXG4gICAgICAucGlwZShcbiAgICAgICAgZmlsdGVyKCgpID0+IHRoaXMuaW5pdGVkKSxcbiAgICAgICAgdGFwKChlKSA9PiB7XG4gICAgICAgICAgaWYgKGUuZGF0YSA9PT0gJywnKSB7XG4gICAgICAgICAgICB0aGlzLl9zZWxlY3Qoe1xuICAgICAgICAgICAgICB0eXBlOiBEYXRhVHlwZS5UZXh0LFxuICAgICAgICAgICAgICBkYXRhOiB0aGlzLmtleXdvcmQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFySW5wdXQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5rZXl3b3JkID0gdGhpcy5pbnB1dEVsID8gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKSA6ICcnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgICAgIH0pLFxuICAgICAgICBkZWJvdW5jZSgoKSA9PiB7XG4gICAgICAgICAgbGV0IGRlbGF5ID0gMDtcbiAgICAgICAgICBpZiAodGhpcy5rZXl3b3JkLmxlbmd0aCAmJiB0aGlzLmFsbG93T2JqZWN0KSB7XG4gICAgICAgICAgICBkZWxheSA9IHRoaXMuZGVsYXk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRpbWVyKGRlbGF5KTtcbiAgICAgICAgfSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95JCksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgdGhpcy5fZmV0Y2gkLm5leHQodGhpcy5rZXl3b3JkKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfbGlzdGVuRmV0Y2goKTogdm9pZCB7XG4gICAgdGhpcy5fZmV0Y2gkXG4gICAgICAucGlwZShcbiAgICAgICAgZmlsdGVyKCgpID0+IHRoaXMuaW5pdGVkKSxcbiAgICAgICAgc3dpdGNoTWFwKChrZXl3b3JkKSA9PiB7XG5cbiAgICAgICAgICBpZiAodGhpcy5hbGxvd1RleHQpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dERhdGEgPSB0aGlzLl9jcmVhdGVUZXh0SXRlbShrZXl3b3JkLCB0aGlzLl92YWxpZGF0ZVRleHQoa2V5d29yZCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLmFsbG93T2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLm5vUmVzdWx0cyA9IGZhbHNlO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZG9GZXRjaEJ5S2V5d29yZChrZXl3b3JkKTtcbiAgICAgICAgICB9IFxuXG4gICAgICAgICAgcmV0dXJuIG9mKFtdKTtcbiAgICAgICAgfSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95JCksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgdGhpcy5fY2RSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2RvRmV0Y2hCeUtleXdvcmQoa2V5d29yZDogc3RyaW5nKTogT2JzZXJ2YWJsZTx1bmtub3duPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goa2V5d29yZClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YXAoKHJlc3BvbnNlOiB1bmtub3duKSA9PiB7XG5cbiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmRhdGEgPSByZXNwb25zZS5tYXAoZGF0YSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlT2JqZWN0SXRlbShkYXRhKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGEuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiAhdGhpcy5tb2RlbC5zb21lKChtb2RlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVXaXRoKG1vZGVsLmRhdGEsIGl0ZW0uZGF0YSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5kYXRhLmZpbmQoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwuc29tZSgobW9kZWwpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlV2l0aChtb2RlbC5kYXRhLCBpdGVtLmRhdGEpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWQuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMubm9SZXN1bHRzID0gIXRoaXMuZGF0YS5sZW5ndGg7XG4gICAgICAgIH0pLFxuICAgICAgKVxuICB9XG5cbn1cbiIsIjxuZy1jb250YWluZXIgKm5nSWY9XCJpbml0ZWQ7IGVsc2UgZWxzZUluaXRlZFwiPlxuICA8bWF0LWZvcm0tZmllbGRcbiAgICAgIFtuZ0NsYXNzXT1cInsgJ21hdC1mb3JtLWZpZWxkLWRpc2FibGVkJzogZGlzYWJsZWQgfVwiXG4gICAgICBbZmxvYXRMYWJlbF09XCJpbml0T25DbGljayA/ICdhbHdheXMnIDogJ2F1dG8nXCJcbiAgICAgIChjbGljayk9XCJmb2N1cygpXCI+XG4gICAgPG1hdC1jaGlwLWxpc3RcbiAgICAgICAgW3RhYkluZGV4XT1cIi0xXCJcbiAgICAgICAgY2RrRHJvcExpc3RHcm91cFxuICAgICAgICAjc2VhcmNoTGlzdD5cbiAgICAgIDxkaXZcbiAgICAgICAgICAqbmdGb3I9XCJsZXQgaXRlbSBvZiBtb2RlbDsgbGV0IGluZGV4ID0gaW5kZXhcIlxuICAgICAgICAgIGNka0Ryb3BMaXN0XG4gICAgICAgICAgW2Nka0Ryb3BMaXN0RGF0YV09XCJ7IGluZGV4OiBpbmRleCB9XCJcbiAgICAgICAgICBjZGtEcm9wTGlzdE9yaWVudGF0aW9uPVwiaG9yaXpvbnRhbFwiXG4gICAgICAgICAgKGNka0Ryb3BMaXN0RHJvcHBlZCk9XCJkcm9wKCRldmVudClcIj5cbiAgICAgICAgPG1hdC1jaGlwXG4gICAgICAgICAgICBbZGlzYWJsZVJpcHBsZV09XCJ0cnVlXCJcbiAgICAgICAgICAgIFtzZWxlY3RhYmxlXT1cIiFkaXNhYmxlZFwiXG4gICAgICAgICAgICBbcmVtb3ZhYmxlXT1cIiFkaXNhYmxlZFwiXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgW2NsYXNzXT1cIidmcy1hdXRvY29tcGxldGUtY2hpcCAnICsgaXRlbS5jbGFzc1wiXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7IFxuICAgICAgICAgICAgICBpbWFnZWQ6IGl0ZW0uaW1hZ2UsIFxuICAgICAgICAgICAgICAnc2l6ZS1zbWFsbCc6IHNpemUgPT09ICdzbWFsbCcsIFxuICAgICAgICAgICAgICAnc2l6ZS1sYXJnZSc6IHNpemUgPT09ICdsYXJnZScsXG4gICAgICAgICAgICAgICdsYXN0LWNoaXAnOiBtb2RlbC5sZW5ndGggLSAxID09PSBpbmRleFxuICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICBbc3R5bGUuYmFja2dyb3VuZENvbG9yXT1cIml0ZW0uYmFja2dyb3VuZCB8fCBiYWNrZ3JvdW5kXCJcbiAgICAgICAgICAgIFtzdHlsZS5jb2xvcl09XCJpdGVtLmNvbG9yIHx8IGNvbG9yXCJcbiAgICAgICAgICAgIChrZXlkb3duKT1cImNoaXBLZXlEb3duKCRldmVudCwgaW5kZXgpXCJcbiAgICAgICAgICAgIChjbGljayk9XCJjaGlwQ2xpY2soJGV2ZW50KVwiXG4gICAgICAgICAgICBbY2RrRHJhZ0Rpc2FibGVkXT1cIiFvcmRlcmFibGUgfHwgZGlzYWJsZWRcIlxuICAgICAgICAgICAgW2Nka0RyYWdEYXRhXT1cIml0ZW1cIlxuICAgICAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgICAgICBjZGtEcmFnXG4gICAgICAgICAgICBjZGtEcmFnSGFuZGxlPlxuICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIml0ZW1UZW1wbGF0ZVwiXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyBpdGVtOiBpdGVtLCBzZWxlY3Rpbmc6IGZhbHNlIH1cIj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJpdGVtU3VmZml4VGVtcGxhdGVcIlxuICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgaXRlbTogaXRlbSwgc2VsZWN0aW5nOiBmYWxzZSwgZGlzYWJsZWQ6IGRpc2FibGVkIH1cIj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9tYXQtY2hpcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8aW5wdXRcbiAgICAgICAgI2lucHV0XG4gICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXG4gICAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seVwiXG4gICAgICAgIChpbnB1dCk9XCJpbnB1dGVkKCRldmVudClcIlxuICAgICAgICAoa2V5ZG93bik9XCJrZXlEb3duKCRldmVudClcIlxuICAgICAgICAoZm9jdXMpPVwiZm9jdXNlZCgkZXZlbnQpXCJcbiAgICAgICAgW25hbWVdPVwibmFtZVwiXG4gICAgICAgIFttYXRBdXRvY29tcGxldGVdPVwiYXV0b2NvbXBsZXRlU2VhcmNoXCJcbiAgICAgICAgW21hdENoaXBJbnB1dEZvcl09XCJzZWFyY2hMaXN0XCI+XG4gICAgPC9tYXQtY2hpcC1saXN0PlxuXG4gICAgPHNwYW4gKm5nSWY9XCJjaGlwc1N1ZmZpeFRlbXBsYXRlXCIgbWF0U3VmZml4PlxuICAgICAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJjaGlwc1N1ZmZpeFRlbXBsYXRlXCI+PC9uZy1jb250YWluZXI+XG4gICAgPC9zcGFuPlxuXG4gICAgPHNwYW4gKm5nSWY9XCIhZGlzYWJsZWQgJiYgYWxsb3dDbGVhclwiIG1hdFN1ZmZpeD5cbiAgICAgIDxtYXQtaWNvblxuICAgICAgICAgICpuZ0lmPVwibW9kZWwubGVuZ3RoXCJcbiAgICAgICAgICBjbGFzcz1cImNsZWFyXCJcbiAgICAgICAgICAoY2xpY2spPVwiY2xlYXJDbGljaygkZXZlbnQpXCI+XG4gICAgICAgIGNsZWFyXG4gICAgICA8L21hdC1pY29uPlxuICAgIDwvc3Bhbj5cblxuICAgIDxtYXQtYXV0b2NvbXBsZXRlXG4gICAgICAgICNhdXRvY29tcGxldGVTZWFyY2g9XCJtYXRBdXRvY29tcGxldGVcIlxuICAgICAgICBbY2xhc3NdPVwicGFuZWxDbGFzc2VzXCJcbiAgICAgICAgKG9wdGlvblNlbGVjdGVkKT1cIm9wdGlvblNlbGVjdGVkKCRldmVudClcIlxuICAgICAgICAoY2xvc2VkKT1cImNsb3NlZCgpXCJcbiAgICAgICAgW3BhbmVsV2lkdGhdPVwicGFuZWxXaWR0aFwiXG4gICAgICAgIFthdXRvQWN0aXZlRmlyc3RPcHRpb25dPVwidHJ1ZVwiPlxuXG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwia2V5d29yZCAmJiBhbGxvd1RleHRcIj5cbiAgICAgICAgPG1hdC1vcHRpb24gKm5nSWY9XCJ0ZXh0RGF0YS50eXBlPT09ZGF0YVR5cGUuVGV4dFwiIFt2YWx1ZV09XCJ0ZXh0RGF0YVwiIFtkaXNhYmxlZF09XCIhdGV4dERhdGEudmFsaWRcIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJpdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgaXRlbTogdGV4dERhdGEgfVwiPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L21hdC1vcHRpb24+XG4gICAgICA8L25nLWNvbnRhaW5lcj4gICAgICAgIFxuICAgICAgXG4gICAgICA8bWF0LW9wdGlvblxuICAgICAgICBbbmdDbGFzc109XCJ7IG11bHRpcGxlOiBtdWx0aXBsZSB9XCJcbiAgICAgICAgY2xhc3M9XCJvcHRpb25cIlxuICAgICAgICAqbmdGb3I9XCJsZXQgaXRlbSBvZiBkYXRhXCIgW3ZhbHVlXT1cIml0ZW1cIj5cbiAgICAgICAgPGFcbiAgICAgICAgICAgICpuZ0lmPVwibXVsdGlwbGVcIlxuICAgICAgICAgICAgY2xhc3M9XCJhZGQtaWNvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwib3B0aW9uQ2xpY2soJGV2ZW50LCBpdGVtLCB0cnVlKVwiPlxuICAgICAgICAgIDxtYXQtaWNvbj5hZGQ8L21hdC1pY29uPlxuICAgICAgICA8L2E+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJvcHRpb24tY2hpcFwiIChjbGljayk9XCJvcHRpb25DbGljaygkZXZlbnQsIGl0ZW0pXCI+XG4gICAgICAgICAgPG1hdC1yYWRpby1idXR0b24gKm5nSWY9XCIhbXVsdGlwbGVcIiBbY2hlY2tlZF09XCJpdGVtLnNlbGVjdGVkXCI+PC9tYXQtcmFkaW8tYnV0dG9uPlxuICAgICAgICAgIDxtYXQtY2hpcFxuICAgICAgICAgICAgICAoY2xpY2spPVwib3B0aW9uQ2xpY2soJGV2ZW50LCBpdGVtKVwiXG4gICAgICAgICAgICAgIFtkaXNhYmxlUmlwcGxlXT1cInRydWVcIlxuICAgICAgICAgICAgICBbY2xhc3NdPVwiJ2ZzLWF1dG9jb21wbGV0ZS1jaGlwICcgKyBpdGVtLmNsYXNzXCJcbiAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieyBpbWFnZWQ6IGl0ZW0uaW1hZ2UsICdzaXplLXNtYWxsJzogc2l6ZSA9PT0gJ3NtYWxsJywgJ3NpemUtbGFyZ2UnOiBzaXplID09PSAnbGFyZ2UnIH1cIlxuICAgICAgICAgICAgICBbc3R5bGUuYmFja2dyb3VuZENvbG9yXT1cIml0ZW0uYmFja2dyb3VuZCB8fCBiYWNrZ3JvdW5kXCJcbiAgICAgICAgICAgIFtzdHlsZS5jb2xvcl09XCJpdGVtLmNvbG9yIHx8IGNvbG9yXCI+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIml0ZW1UZW1wbGF0ZVwiXG4gICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IGl0ZW06IGl0ZW0sIHNlbGVjdGluZzogdHJ1ZSB9XCI+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiaXRlbVN1ZmZpeFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgaXRlbTogaXRlbSwgc2VsZWN0aW5nOiB0cnVlLCBkaXNhYmxlZDogZGlzYWJsZWQgfVwiPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPC9tYXQtY2hpcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L21hdC1vcHRpb24+XG5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJub1Jlc3VsdHMgIT09IGZhbHNlXCI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgICpuZ0lmPVwibm9SZXN1bHRzVGVtcGxhdGU7IGVsc2Ugbm9SZXN1bHRzT3B0aW9uXCJcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJub1Jlc3VsdHNUZW1wbGF0ZVwiXG4gICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsga2V5d29yZDoga2V5d29yZCB9XCI+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjbm9SZXN1bHRzT3B0aW9uPlxuICAgICAgICAgIDxtYXQtb3B0aW9uIGRpc2FibGVkIGNsYXNzPVwibm8tcmVzdWx0c1wiPlxuICAgICAgICAgICAgTm8gcmVzdWx0cyA8bmctY29udGFpbmVyICpuZ0lmPVwia2V5d29yZFwiPmZvciBcInt7a2V5d29yZH19XCI8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8L21hdC1vcHRpb24+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInN0YXRpY1RlbXBsYXRlcy5sZW5ndGhcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXRpYy10ZW1wbGF0ZXNcIj5cbiAgICAgICAgICA8bWF0LW9wdGlvblxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IHN0YXRpY1RlbXBsYXRlIG9mIHN0YXRpY1RlbXBsYXRlczsgbGV0IGkgPSBpbmRleFwiXG4gICAgICAgICAgICBjbGFzcz1cInN0YXRpYy1vcHRpb25cIlxuICAgICAgICAgICAgKGNsaWNrKT1cInN0YXRpY0NsaWNrKCRldmVudCwgaSlcIj5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAqbmdUZW1wbGF0ZU91dGxldD1cInN0YXRpY1RlbXBsYXRlO2NvbnRleHQ6IHsgdGVzdDogdHJ1ZSB9XCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICA8L21hdC1vcHRpb24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDxtYXQtb3B0aW9uIGRpc2FibGVkIGNsYXNzPVwiYmxhbmstcGxhY2Vob2xkZXJcIj48L21hdC1vcHRpb24+XG4gICAgPC9tYXQtYXV0b2NvbXBsZXRlPlxuICAgIDxtYXQtaGludCAqbmdJZj1cImhpbnRcIj57eyBoaW50IH19PC9tYXQtaGludD5cbiAgICA8aW5wdXQgY2xhc3M9XCJkdW1teS1pbnB1dFwiICNkdW1teUlucHV0IHRhYmluZGV4PVwiLTFcIj5cbiAgPC9tYXQtZm9ybS1maWVsZD5cbjwvbmctY29udGFpbmVyPlxuXG48bmctdGVtcGxhdGUgI2Vsc2VJbml0ZWQ+XG4gIDxmcy1sYWJlbC1maWVsZCBbbmdDbGFzc109XCJ7ICdpbml0LW9uLWNsaWNrJzogaW5pdE9uQ2xpY2ssIGluaXRlZDogaW5pdGVkIH1cIj5cbiAgICA8ZnMtbGFiZWw+e3twbGFjZWhvbGRlcn19PC9mcy1sYWJlbD5cbiAgICA8ZGl2IChjbGljayk9XCJpbml0KClcIj5cbiAgICAgIDxtYXQtY2hpcC1saXN0XG4gICAgICAgICpuZ0lmPVwibW9kZWwubGVuZ3RoOyBlbHNlIG5vbmVcIj5cbiAgICAgICAgPG1hdC1jaGlwXG4gICAgICAgICAgY2xhc3M9XCJmcy1hdXRvY29tcGxldGUtY2hpcHMtdHJpZ2dlclwiXG4gICAgICAgICAgKm5nRm9yPVwibGV0IGl0ZW0gb2YgbW9kZWxcIlxuICAgICAgICAgIFtkaXNhYmxlUmlwcGxlXT1cInRydWVcIlxuICAgICAgICAgIFtjbGFzc109XCInZnMtYXV0b2NvbXBsZXRlLWNoaXAgJyArIGl0ZW0uY2xhc3NcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCJ0cnVlXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJ7IGltYWdlZDogaXRlbS5pbWFnZSwgJ3NpemUtc21hbGwnOiBzaXplID09PSAnc21hbGwnLCAnc2l6ZS1sYXJnZSc6IHNpemUgPT09ICdsYXJnZScgfVwiXG4gICAgICAgICAgW3N0eWxlLmJhY2tncm91bmRDb2xvcl09XCJpdGVtLmJhY2tncm91bmQgfHwgYmFja2dyb3VuZFwiXG4gICAgICAgICAgW3N0eWxlLmNvbG9yXT1cIml0ZW0uY29sb3IgfHwgY29sb3JcIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJpdGVtVGVtcGxhdGVcIlxuICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgaXRlbTogaXRlbSwgc2VsZWN0aW5nOiBmYWxzZSB9XCI+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiaXRlbVN1ZmZpeFRlbXBsYXRlXCJcbiAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IGl0ZW06IGl0ZW0sIHNlbGVjdGluZzogZmFsc2UsIGRpc2FibGVkOiBkaXNhYmxlZCB9XCI+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvbWF0LWNoaXA+XG4gICAgICA8L21hdC1jaGlwLWxpc3Q+XG4gICAgPC9kaXY+XG4gICAgPGZzLWxhYmVsLW1lc3NhZ2UgKm5nSWY9XCJoaW50XCI+XG4gICAgICB7eyBoaW50IH19XG4gICAgPC9mcy1sYWJlbC1tZXNzYWdlPlxuICA8L2ZzLWxhYmVsLWZpZWxkPlxuXG4gIDxuZy10ZW1wbGF0ZSAjbm9uZT5cbiAgICA8c3BhbiBjbGFzcz1cIm5vbmUtcGxhY2Vob2xkZXJcIiAoY2xpY2spPVwiaW5pdCgpXCI+Tm9uZTwvc3Bhbj5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjaXRlbVRlbXBsYXRlIGxldC1pdGVtPVwiaXRlbVwiIGxldC1zZWxlY3Rpbmc9XCJzZWxlY3RpbmdcIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIml0ZW0udHlwZT09PWRhdGFUeXBlLk9iamVjdFwiIGNsYXNzPVwiaXRlbVwiPlxuICAgIDxkaXYgY2xhc3M9XCJpdGVtLWltYWdlXCIgKm5nSWY9XCJpdGVtLmltYWdlXCIgW3N0eWxlLmJhY2tncm91bmRJbWFnZV09XCIndXJsKCcgKyBpdGVtLmltYWdlICsgJyknXCI+PC9kaXY+XG4gICAgPG1hdC1pY29uIGNsYXNzPVwiaXRlbS1pY29uXCIgKm5nSWY9XCJpdGVtLmljb25cIiBbc3R5bGUuY29sb3JdPVwiaXRlbS5pY29uQ29sb3IgfHwgaXRlbS5jb2xvclwiPnt7aXRlbS5pY29ufX08L21hdC1pY29uPlxuICAgIDxzcGFuIGNsYXNzPVwiaXRlbS1jb250ZW50XCI+XG4gICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwib2JqZWN0VGVtcGxhdGVcIlxuICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyBvYmplY3Q6IGl0ZW0uZGF0YSwgc2VsZWN0aW5nOiBzZWxlY3RpbmcgfVwiPlxuICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICA8L3NwYW4+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJpdGVtLnR5cGU9PT1kYXRhVHlwZS5UZXh0XCI+XG4gICAge3tpdGVtLmRhdGF9fVxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjaXRlbVN1ZmZpeFRlbXBsYXRlIGxldC1pdGVtPVwiaXRlbVwiIGxldC1zZWxlY3Rpbmc9XCJzZWxlY3RpbmdcIj5cbiAgPGRpdiBjbGFzcz1cIml0ZW0tc3VmZml4XCI+XG4gICAgPG5nLWNvbnRhaW5lclxuICAgICAgKm5nSWY9XCJjaGlwU3VmZml4VGVtcGxhdGVcIlxuICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiY2hpcFN1ZmZpeFRlbXBsYXRlXCJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IG9iamVjdDogaXRlbS5kYXRhLCBzZWxlY3Rpbmc6IHNlbGVjdGluZywgZGlzYWJsZWQ6IGRpc2FibGVkIH1cIj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8YVxuICAgICAgICBjbGFzcz1cInJlbW92ZVwiXG4gICAgICAgICpuZ0lmPVwiIXNlbGVjdGluZyAmJiByZW1vdmFibGUgJiYgIWRpc2FibGVkXCJcbiAgICAgICAgKGNsaWNrKT1cImNoaXBSZW1vdmVkKCRldmVudCwgaXRlbSlcIj5cbiAgICAgIDxtYXQtaWNvblxuICAgICAgW3N0eWxlLmNvbG9yXT1cIml0ZW0uY29sb3IgfHwgY29sb3JcIj5jbGVhcjwvbWF0LWljb24+XG4gICAgPC9hPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+Il19