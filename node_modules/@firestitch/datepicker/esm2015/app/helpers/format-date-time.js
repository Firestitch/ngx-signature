import { isNumber } from 'lodash-es';
import { format, isValid } from 'date-fns';
import { format as fsFormat } from '@firestitch/date';
import { PickerViewType } from '../../libs/common/enums/picker-view-type.enum';
import { ScrollPickerViewType } from '../../libs/common/enums/scroll-picker-view-type.enum';
export function formatDateTime(value, dateFormat = PickerViewType.Date, customDateFormat = '', timezone) {
    if (isNumber(value)) {
        value = new Date(value);
    }
    else if (typeof value === 'string') {
        value = new Date(value);
        if (!isValid(value)) {
            value = Date.parse(value);
        }
    }
    if (value && isValid(value)) {
        const formats = [];
        if (customDateFormat) {
            return fsFormat(value, customDateFormat, { timezone });
        }
        else {
            if ([
                PickerViewType.Date,
                PickerViewType.MonthRange,
                PickerViewType.DateTime,
            ].indexOf(dateFormat) != -1) {
                formats.push('MMM d, yyyy');
            }
            if ([PickerViewType.Time, PickerViewType.DateTime].indexOf(dateFormat) != -1) {
                formats.push('h:mm aa');
            }
            if (dateFormat === ScrollPickerViewType.MonthDay) {
                formats.push('MMMM d');
            }
            else if (dateFormat === ScrollPickerViewType.MonthYear) {
                formats.push('MMMM yyyy');
            }
            else if (dateFormat === ScrollPickerViewType.Year) {
                formats.push('yyyy');
            }
            else if (dateFormat === ScrollPickerViewType.Month) {
                formats.push('MMMM');
            }
        }
        return format(value, formats.join(' '));
    }
    return '';
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0LWRhdGUtdGltZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcHAvaGVscGVycy9mb3JtYXQtZGF0ZS10aW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDckMsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFFM0MsT0FBTyxFQUFFLE1BQU0sSUFBSSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUl0RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDL0UsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFHNUYsTUFBTSxVQUFVLGNBQWMsQ0FDNUIsS0FBSyxFQUNMLGFBQW9ELGNBQWMsQ0FBQyxJQUFJLEVBQ3ZFLGdCQUFnQixHQUFHLEVBQUUsRUFDckIsUUFBaUI7SUFHakIsSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDbkIsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ3pCO1NBQU0sSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUU7UUFDcEMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDbkIsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDM0I7S0FDRjtJQUVELElBQUksS0FBSyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUMzQixNQUFNLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFFbkIsSUFBSSxnQkFBZ0IsRUFBRTtZQUNwQixPQUFPLFFBQVEsQ0FBQyxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1NBQ3hEO2FBQU07WUFFTCxJQUFLO2dCQUNILGNBQWMsQ0FBQyxJQUFJO2dCQUNuQixjQUFjLENBQUMsVUFBVTtnQkFDekIsY0FBYyxDQUFDLFFBQVE7YUFDVixDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtnQkFDekMsT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUM3QjtZQUVELElBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxRQUFRLENBQWUsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUU7Z0JBQzNGLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDekI7WUFFRCxJQUFJLFVBQVUsS0FBSyxvQkFBb0IsQ0FBQyxRQUFRLEVBQUU7Z0JBQ2hELE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFFeEI7aUJBQU0sSUFBSSxVQUFVLEtBQUssb0JBQW9CLENBQUMsU0FBUyxFQUFFO2dCQUN4RCxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2FBRTNCO2lCQUFNLElBQUksVUFBVSxLQUFLLG9CQUFvQixDQUFDLElBQUksRUFBRTtnQkFDbkQsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUV0QjtpQkFBTSxJQUFJLFVBQVUsS0FBSyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUU7Z0JBQ3BELE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDdEI7U0FDRjtRQUVELE9BQU8sTUFBTSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDekM7SUFFRCxPQUFPLEVBQUUsQ0FBQztBQUNaLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc051bWJlciB9IGZyb20gJ2xvZGFzaC1lcyc7XG5pbXBvcnQgeyBmb3JtYXQsIGlzVmFsaWQgfSBmcm9tICdkYXRlLWZucyc7XG5cbmltcG9ydCB7IGZvcm1hdCBhcyBmc0Zvcm1hdCB9IGZyb20gJ0BmaXJlc3RpdGNoL2RhdGUnO1xuXG5pbXBvcnQgeyB1dGNUb1pvbmVkVGltZSB9IGZyb20gJ2RhdGUtZm5zLXR6JztcblxuaW1wb3J0IHsgUGlja2VyVmlld1R5cGUgfSBmcm9tICcuLi8uLi9saWJzL2NvbW1vbi9lbnVtcy9waWNrZXItdmlldy10eXBlLmVudW0nO1xuaW1wb3J0IHsgU2Nyb2xsUGlja2VyVmlld1R5cGUgfSBmcm9tICcuLi8uLi9saWJzL2NvbW1vbi9lbnVtcy9zY3JvbGwtcGlja2VyLXZpZXctdHlwZS5lbnVtJztcblxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUoXG4gIHZhbHVlLFxuICBkYXRlRm9ybWF0OiBQaWNrZXJWaWV3VHlwZSB8IFNjcm9sbFBpY2tlclZpZXdUeXBlID0gUGlja2VyVmlld1R5cGUuRGF0ZSxcbiAgY3VzdG9tRGF0ZUZvcm1hdCA9ICcnLFxuICB0aW1lem9uZT86IHN0cmluZyxcbikge1xuXG4gIGlmIChpc051bWJlcih2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsdWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgaWYgKCFpc1ZhbGlkKHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSBEYXRlLnBhcnNlKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBpZiAodmFsdWUgJiYgaXNWYWxpZCh2YWx1ZSkpIHtcbiAgICBjb25zdCBmb3JtYXRzID0gW107XG5cbiAgICBpZiAoY3VzdG9tRGF0ZUZvcm1hdCkge1xuICAgICAgcmV0dXJuIGZzRm9ybWF0KHZhbHVlLCBjdXN0b21EYXRlRm9ybWF0LCB7IHRpbWV6b25lIH0pO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmICgoW1xuICAgICAgICBQaWNrZXJWaWV3VHlwZS5EYXRlLFxuICAgICAgICBQaWNrZXJWaWV3VHlwZS5Nb250aFJhbmdlLFxuICAgICAgICBQaWNrZXJWaWV3VHlwZS5EYXRlVGltZSxcbiAgICAgIF0gYXMgdW5rbm93bltdKS5pbmRleE9mKGRhdGVGb3JtYXQpICE9IC0xKSB7XG4gICAgICAgIGZvcm1hdHMucHVzaCgnTU1NIGQsIHl5eXknKTtcbiAgICAgIH1cblxuICAgICAgaWYgKChbUGlja2VyVmlld1R5cGUuVGltZSwgUGlja2VyVmlld1R5cGUuRGF0ZVRpbWVdIGFzIHVua25vd25bXSkuaW5kZXhPZihkYXRlRm9ybWF0KSAhPSAtMSkge1xuICAgICAgICBmb3JtYXRzLnB1c2goJ2g6bW0gYWEnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGVGb3JtYXQgPT09IFNjcm9sbFBpY2tlclZpZXdUeXBlLk1vbnRoRGF5KSB7XG4gICAgICAgIGZvcm1hdHMucHVzaCgnTU1NTSBkJyk7XG5cbiAgICAgIH0gZWxzZSBpZiAoZGF0ZUZvcm1hdCA9PT0gU2Nyb2xsUGlja2VyVmlld1R5cGUuTW9udGhZZWFyKSB7XG4gICAgICAgIGZvcm1hdHMucHVzaCgnTU1NTSB5eXl5Jyk7XG5cbiAgICAgIH0gZWxzZSBpZiAoZGF0ZUZvcm1hdCA9PT0gU2Nyb2xsUGlja2VyVmlld1R5cGUuWWVhcikge1xuICAgICAgICBmb3JtYXRzLnB1c2goJ3l5eXknKTtcblxuICAgICAgfSBlbHNlIGlmIChkYXRlRm9ybWF0ID09PSBTY3JvbGxQaWNrZXJWaWV3VHlwZS5Nb250aCkge1xuICAgICAgICBmb3JtYXRzLnB1c2goJ01NTU0nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZm9ybWF0KHZhbHVlLCBmb3JtYXRzLmpvaW4oJyAnKSk7XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG4iXX0=