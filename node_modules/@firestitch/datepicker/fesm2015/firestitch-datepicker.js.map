{"version":3,"file":"firestitch-datepicker.js","sources":["../../src/libs/common/helpers/get-start-day-date.ts","../../src/libs/common/helpers/split-date-by-components.ts","../../src/libs/calendar/consts/week-days.ts","../../src/libs/common/helpers/is-range-disabled.ts","../../src/libs/common/helpers/is-day-disabled.ts","../../src/libs/calendar/models/week.ts","../../src/libs/calendar/models/period.ts","../../src/libs/calendar/models/month.ts","../../src/libs/calendar/components/calendar/calendar.component.ts","../../src/libs/calendar/components/calendar/calendar.component.html","../../src/libs/calendar/components/time/time.component.ts","../../src/libs/calendar/components/time/time.component.html","../../src/libs/calendar/calendar.module.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/virtual-scroll-calendar/helpers.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/virtual-scroll-calendar/calendar-scroll-strategy.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/virtual-scroll-calendar/calendar-data-source.ts","../../src/libs/common/enums/picker-view-type.enum.ts","../../src/libs/dialog/helpers/get-disabled-days.ts","../../src/libs/dialog/helpers/get-disabled-times.ts","../../src/libs/dialog/classes/dialog-model.ts","../../src/libs/calendar/consts/months.ts","../../src/libs/common/helpers/is-month-disabled.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/header/header.component.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/header/header.component.html","../../src/libs/dialog/modules/mobile-dialog-container/components/header-month-range/header-month-range.component.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/header-month-range/header-month-range.component.html","../../src/libs/dialog/modules/mobile-dialog-container/components/virtual-scroll-calendar/virtual-scroll-calendar.component.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/virtual-scroll-calendar/virtual-scroll-calendar.component.html","../../src/libs/dialog/modules/mobile-dialog-container/components/time-picker/time-picker.component.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/time-picker/time-picker.component.html","../../src/libs/dialog/modules/mobile-dialog-container/components/date-time-picker/date-time-picker.component.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/date-time-picker/date-time-picker.component.html","../../src/libs/dialog/modules/mobile-dialog-container/components/mobile-dialog/mobile-dialog.component.ts","../../src/libs/dialog/modules/mobile-dialog-container/components/mobile-dialog/mobile-dialog.component.html","../../src/libs/dialog/classes/overlay-ref.ts","../../src/libs/dialog/classes/dialog-ref.ts","../../src/libs/dialog/modules/scroll-picker-dialog-container/consts/months.ts","../../src/libs/dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker/date-scroll-picker.component.ts","../../src/libs/dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker/date-scroll-picker.component.html","../../src/libs/dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker-desktop/date-scroll-picker-desktop.component.ts","../../src/libs/dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker-desktop/date-scroll-picker-desktop.component.html","../../src/libs/dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker-mobile-dialog/date-scroll-picker-mobile-dialog.component.ts","../../src/libs/dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker-mobile-dialog/date-scroll-picker-mobile-dialog.component.html","../../src/libs/dialog/modules/desktop-dialog-container/components/header-month-range/header-month-range.component.ts","../../src/libs/dialog/modules/desktop-dialog-container/components/header-month-range/header-month-range.component.html","../../src/libs/dialog/modules/desktop-dialog-container/components/month-range-picker/month-range-picker.component.ts","../../src/libs/dialog/modules/desktop-dialog-container/components/month-range-picker/month-range-picker.component.html","../../src/libs/dialog/modules/desktop-dialog-container/components/header/header.component.ts","../../src/libs/dialog/modules/desktop-dialog-container/components/header/header.component.html","../../src/libs/dialog/modules/desktop-dialog-container/components/date-picker/date-picker.component.ts","../../src/libs/dialog/modules/desktop-dialog-container/components/date-picker/date-picker.component.html","../../src/libs/dialog/modules/desktop-dialog-container/components/desktop-dialog/desktop-dialog.component.ts","../../src/libs/dialog/modules/desktop-dialog-container/components/desktop-dialog/desktop-dialog.component.html","../../src/libs/dialog/services/dialog-factory.service.ts","../../src/libs/dialog/modules/desktop-dialog-container/desktop-dialog-container.module.ts","../../src/libs/dialog/modules/scroll-picker-dialog-container/scroll-picker-dialog-container.module.ts","../../src/libs/dialog/modules/mobile-dialog-container/mobile-dialog-container.module.ts","../../src/libs/dialog/dialog.module.ts","../../src/app/helpers/parse-date.ts","../../src/app/classes/base-component.ts","../../src/app/helpers/create-date-from-value.ts","../../src/libs/common/enums/scroll-picker-view-type.enum.ts","../../src/app/helpers/format-date-time.ts","../../src/app/components/date-picker-trigger/date-picker-trigger.component.ts","../../src/app/components/date-picker-trigger/date-picker-trigger.component.html","../../src/app/components/date-picker/date-picker.component.ts","../../src/app/components/date-range-separator/date-range-separator.component.ts","../../src/libs/common/helpers/is-same-date.ts","../../src/app/components/range-picker/base/range-picker-base.component.ts","../../src/libs/common/helpers/clone-date.ts","../../src/libs/common/helpers/is-date-after.ts","../../src/app/classes/range-picker-ref.ts","../../src/app/services/range-picker-store.service.ts","../../src/app/components/range-picker/base/range-picker-from.component.ts","../../src/app/components/range-picker/from/date-time-range-picker-from.component.ts","../../src/app/components/range-picker/base/range-picker-to.component.ts","../../src/app/components/range-picker/to/date-time-range-picker-to.component.ts","../../src/app/components/range-picker/from/time-range-picker-from.component.ts","../../src/app/components/range-picker/to/time-range-picker-to.component.ts","../../src/app/components/range-picker/from/date-range-picker-from.component.ts","../../src/app/components/range-picker/to/date-range-picker-to.component.ts","../../src/app/components/date-scroll-picker/date-scroll-picker.component.ts","../../src/app/components/date-picker-birthday/date-picker-birthday.component.ts","../../src/app/components/date-week-picker/date-week-picker.component.ts","../../src/app/components/date-time-picker/date-time-picker.component.ts","../../src/app/components/time-picker/time-picker.component.ts","../../src/app/components/range-picker/from/month-range-picker-from.component.ts","../../src/app/components/range-picker/to/month-range-picker-to.component.ts","../../src/app/datepicker.module.ts","../../src/public_api.ts","../../src/firestitch-datepicker.ts"],"sourcesContent":["import { startOfDay } from 'date-fns';\n\n\nexport function getStartDayDate() {\n  return startOfDay(new Date());\n}\n","import { isDate, isValid, lightFormat } from 'date-fns';\n\n\nexport function splitDateByComponents(date: Date) {\n  if (date && isValid(date) && isDate(date)) {\n    return {\n      date: lightFormat(date, 'yyyy-MM-dd'),\n      hour: date.getHours(),\n      minute: date.getMinutes(),\n      year: date.getFullYear(),\n      month: date.getMonth(),\n      day: date.getDate(),\n    };\n  } else {\n    return {\n      date: null,\n      hour: null,\n      minute: null,\n      year: null,\n      month: null,\n      day: null,\n    };\n  }\n}\n","export const WEEKDAYS = [\n  'Sun',\n  'Mon',\n  'Tues',\n  'Wed',\n  'Thurs',\n  'Fri',\n  'Sat',\n];\n","import { endOfDay, isWithinInterval, lightFormat, startOfDay } from 'date-fns';\n\nexport function isRangeDisabled(disabledDays, start, end) {\n  if (!disabledDays || !disabledDays.length) {\n    return false;\n  }\n\n  for (let i = 0; i < disabledDays.length; i++) {\n    const value = disabledDays[i];\n\n    const startDay = startOfDay(value[0]);\n    const endDay = endOfDay(value[1]);\n\n    const startDayIntersectWithDisabled =\n      isWithinInterval(start, { start: startDay, end: endDay })\n      || lightFormat(start, 'yyyy-MM-dd') === lightFormat(value[0], 'yyyy-MM-dd');\n\n    const endDayIntersectWithDisabled =\n      isWithinInterval(end, { start: startDay, end: endDay })\n      || lightFormat(end, 'yyyy-MM-dd') === lightFormat(value[1], 'yyyy-MM-dd');\n\n    if (startDayIntersectWithDisabled && endDayIntersectWithDisabled) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","import { endOfDay, startOfDay } from 'date-fns';\n\nimport { isRangeDisabled } from './is-range-disabled';\n\nexport function isDayDisabled(disabledDays, date) {\n  const startDay = startOfDay(date);\n  const endDay = endOfDay(date);\n\n  return isRangeDisabled(disabledDays, startDay, endDay);\n}\n","import {\n  addWeeks,\n  addYears,\n  differenceInCalendarWeeks,\n  differenceInCalendarYears, differenceInWeeks,\n  differenceInYears,\n  isBefore,\n  isSameWeek\n} from 'date-fns';\n\nimport { Period } from './period';\nimport { DayItem } from '../interfaces/day-item.interface';\n\n\nexport class Week {\n\n  public days: DayItem[] = [];\n  public period: Period;\n  public periodId: number;\n\n  public firstWeekInPeriod = false;\n  public lastWeekInPeriod = false;\n\n  private _periodVisible = false;\n  private _dateEnd: Date;\n\n  constructor(\n    private _dateStart: Date,\n    private _seedDate: Date,\n    private _periodWeeks: number\n  ) {\n    if (this._seedDate && this._periodWeeks) {\n      this.periodId = this._getPeriodId();\n    }\n\n    this._dateEnd = addWeeks(this._dateStart, 1);\n  }\n\n  public get dateStart() {\n    return this._dateStart;\n  }\n\n  public get dateEnd() {\n    return this._dateEnd;\n  }\n\n  public get periodLableVisible() {\n    return this._periodVisible;\n  }\n\n  /**\n   * Add related day\n   * @param day\n   */\n  public addDay(day: DayItem) {\n    this.days.push(day);\n  }\n\n  /**\n   * Add related period\n   * @param period\n   */\n  public addPeriod(period: Period) {\n    this.period = period;\n  }\n\n  /**\n   * Set visibility for period label\n   * @param flag\n   */\n  public setPeriodVisibility(flag: boolean) {\n    this._periodVisible = flag;\n  }\n\n  /**\n   * To be able to draw borders for week\n   */\n  public markAsFirstVisiblePeriodWeek() {\n    this.firstWeekInPeriod = true;\n  }\n\n  public markAsLastVisiblePeriodWeek() {\n    this.lastWeekInPeriod = true;\n  }\n\n  /**\n   * Calculate period ID based on week date start and seed date\n   */\n  private _getPeriodId() {\n    /**\n     * If week date start before seed date\n     */\n    if (isBefore(this._dateStart, this._seedDate)) {\n      const diffInYears = differenceInYears(this._dateStart, this._seedDate);\n      const diffInCalendarYears = differenceInCalendarYears(this._dateStart, this._seedDate);\n\n      const seedDate = new Date(this._seedDate);\n\n      /**\n       * Check if week date start includes seed date\n       */\n      const sameWeek = isSameWeek(\n        this._dateStart,\n        addYears(seedDate, diffInYears),\n        { weekStartsOn: <any>this._seedDate.getDay()}\n      );\n\n      if (sameWeek) {\n        seedDate.setFullYear(seedDate.getFullYear() + (diffInYears || -1));\n      } else {\n        seedDate.setFullYear(seedDate.getFullYear() + (diffInCalendarYears || -1));\n      }\n\n      const weeksDiff = differenceInCalendarWeeks(\n        this._dateStart,\n        seedDate,\n        { weekStartsOn: <any>this._seedDate.getDay()}\n        ) / this._periodWeeks;\n\n      // Sometimes weeksDiff can be integer and we use +0.1 for easy round\n      return Math.ceil(weeksDiff + 0.1);\n    } else {\n      const diffInYears = differenceInYears(addWeeks(this._dateStart, 1), this._seedDate);\n\n      const seedDate = new Date(this._seedDate);\n      seedDate.setFullYear(seedDate.getFullYear() + diffInYears);\n\n      const weeksDiff = differenceInCalendarWeeks(\n        this._dateStart,\n        seedDate,\n        { weekStartsOn: <any>this._seedDate.getDay()}\n        ) / this._periodWeeks;\n\n      // Sometimes weeksDiff can be integer and we use +0.1 for easy round\n      return Math.ceil(weeksDiff + 0.1);\n    }\n  }\n}\n","import {\n  addWeeks,\n  differenceInCalendarYears,\n} from 'date-fns';\n\nimport { Week } from './week';\n\nexport class Period {\n\n  public mouseOver = false;\n\n  private _weeks: Week[] = [];\n  private _countOfWeeks = 0;\n  private _from: Date;\n  private _to: Date;\n  private _year: number;\n\n  constructor(\n    public periodId: number,\n    public startDate: Date,\n    public seedDate: Date,\n    public periodWeeks: number,\n    private _selected = false,\n  ) {\n    this._updatePeriodInterval();\n  }\n\n  public get countOfWeeks() {\n    return this._countOfWeeks;\n  }\n\n  public get selected() {\n    return this._selected;\n  }\n\n  public get from() {\n    return this._from;\n  }\n\n  public get to() {\n    return this._to;\n  }\n\n  public get year() {\n    return this._year;\n  }\n\n  public set year(value: number) {\n    this._year = value;\n  }\n\n  public set selected(value: boolean) {\n    this._selected = value;\n\n    this._weeks.forEach((week) => {\n      week.days.forEach((day) => {\n        day.selected = value;\n      })\n    })\n  }\n\n  public addWeek(week: Week) {\n    this._weeks.push(week);\n\n    if (this.seedDate && this.periodWeeks) {\n      this._sortWeeks();\n\n      if (this._weeks.length === 1) {\n        week.setPeriodVisibility(true);\n      }\n    }\n\n    this._countOfWeeks = this._weeks.length;\n  }\n\n  /**\n   * Mark weeks with special flags to be able to draw borders\n   */\n  public markFirstLastWeeks() {\n    const firstWeek = this._weeks[0];\n    const lastWeek = this._weeks[this._weeks.length - 1];\n\n    firstWeek.markAsFirstVisiblePeriodWeek();\n    lastWeek.markAsLastVisiblePeriodWeek();\n  }\n\n  private _sortWeeks() {\n    this._weeks.sort((a, b) => {\n      if (a.dateStart < b.dateStart) {\n        return -1\n      } else if (a.dateStart > b.dateStart) {\n        return 1;\n      } else {\n        return 0;\n      }\n    })\n  }\n\n  /**\n   * Calc from, to, year params based on period date start\n   */\n  private _updatePeriodInterval() {\n    const diffInCalendarYears = differenceInCalendarYears(this.startDate, this.seedDate);\n\n    const seedDate = new Date(this.seedDate);\n    seedDate.setFullYear(seedDate.getFullYear() + diffInCalendarYears);\n\n    const offsetFromSeedDate = (this.periodWeeks * (this.periodId - 1));\n\n    this._from = addWeeks(seedDate, offsetFromSeedDate);\n    this._to = addWeeks(this._from, this.periodWeeks);\n    this._year = this._from.getFullYear();\n  }\n}\n","import { addDays, addMonths, format, getDaysInMonth, lightFormat, subDays } from 'date-fns';\n\nimport { isDayDisabled } from '../../common/helpers/is-day-disabled';\n\nimport { Week } from './week';\nimport { Period } from './period';\n\nconst CALENDAR_DAYS_NUMBER = 42;\n\nexport class Month {\n\n  public name;\n  public number;\n  public year;\n  public monthAndYear;\n  public months;\n  public years;\n  public weeks: Week[] = [];\n  public weeksByPeriod: Map<number, Period>;\n\n  private _prevMonthDaysCount: number;\n\n  private _monthStartDay: number;\n  private _daysInMonth: number;\n  private _seedDay: number;\n\n\n  constructor(public date: Date,\n              public seedDate: Date,\n              public periodWeeks: number,\n              private _disabledDays,\n              private _hideExtraDays: boolean,\n  ) {\n    this._initMonth(date);\n\n    if (this.seedDate && this.periodWeeks) {\n      this._seedDay = seedDate.getDay();\n      this._countTotalDaysInMonth(this._seedDay);\n    } else {\n      this._countTotalDaysInMonth(0);\n    }\n  }\n\n  public get seedDay() {\n    return this._seedDay;\n  }\n\n  /**\n   * Render days and weeks\n   */\n  public renderDays() {\n    let currentDate = subDays(this.date, this._prevMonthDaysCount);\n    let daysToBeRendered = this._hideExtraDays\n      ? getDaysInMonth(this.date) + this._prevMonthDaysCount\n      : CALENDAR_DAYS_NUMBER;\n\n    // only for week mode in mobile view!\n    if (this._hideExtraDays && this.periodWeeks) {\n      daysToBeRendered += 7 - (daysToBeRendered % 7);\n    }\n\n    let week;\n\n    for (let d = 0; d < daysToBeRendered; d++) {\n      const dayNumber = lightFormat(currentDate, 'd');\n\n      if (d % 7 == 0) {\n        week = new Week(currentDate, this.seedDate, this.periodWeeks);\n\n        this.weeks.push(week);\n      }\n\n      const dayMuted = d - this._prevMonthDaysCount < 0\n        || d >= this._daysInMonth + this._prevMonthDaysCount;\n\n      week.addDay({\n        mute: dayMuted,\n        date: lightFormat(currentDate, 'yyyy-MM-dd'),\n        number: dayNumber,\n        month: currentDate.getMonth(),\n        year: currentDate.getFullYear(),\n        disabled: isDayDisabled(this._disabledDays, currentDate),\n      });\n\n      currentDate = addDays(currentDate, 1);\n    }\n\n    if (this.seedDate && this.periodWeeks) {\n      this._groupWeeks();\n      this._markFirstAndLastWeeks();\n    }\n  }\n\n  public getPeriodById(id: number) {\n    if (!this.weeksByPeriod.has(id)) {\n      return false;\n    }\n\n    return this.weeksByPeriod.get(id);\n  }\n\n  /**\n   * Input period means that instance of period is not same instance\n   * that was created for month.\n   * It means that period and weeksByPeriod can have same periodIds but different object refs\n   * @param period\n   */\n  public updateSelectionForPeriod(period: Period) {\n    const p = this.getPeriodById(period.periodId);\n\n    if (p && p.year === period.year) {\n      p.selected = period.selected;\n\n      return p;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Init base month field\n   * @param date\n   */\n  private _initMonth(date: Date) {\n    this.date = new Date(date);\n    this.date.setDate(1);\n\n    this._monthStartDay = this.date.getDay();\n    this._daysInMonth = getDaysInMonth(this.date);\n\n    this.name = format(this.date, 'MMMM');\n    this.number = this.date.getMonth();\n    this.year = this.date.getFullYear();\n    this.monthAndYear = `${this.date.getFullYear()}-${this.date.getMonth()}`;\n    this.months = [{ name: format(this.date, 'MMMM'), value: this.date.getMonth() }];\n    this.years = [ this.date.getFullYear() ];\n  }\n\n  /**\n   * Depends on week day start it counts total number of days in month\n   * @param seedDay\n   */\n  private _countTotalDaysInMonth(seedDay) {\n    if (this._monthStartDay >= seedDay) {\n      this._prevMonthDaysCount = this._monthStartDay - seedDay;\n    } else {\n      this._prevMonthDaysCount = 7 - (seedDay - this._monthStartDay);\n    }\n\n    // const totalDays = this._daysInMonth + this._prevMonthDaysCount;\n    // this._totalDaysInMonth = Math.ceil(totalDays / 7) * 7;\n  }\n\n  /**\n   * Just for easy usage\n   */\n  private _groupWeeks() {\n    this.weeksByPeriod = new Map();\n\n    this.weeks.forEach((week) => {\n      if (!this.weeksByPeriod.has(week.periodId)) {\n        const newPeriod = new Period(\n          week.periodId,\n          week.dateStart,\n          this.seedDate,\n          this.periodWeeks,\n        );\n\n        this.weeksByPeriod.set(week.periodId, newPeriod);\n      }\n\n      const period = this.weeksByPeriod\n        .get(week.periodId);\n\n      period.addWeek(week);\n      week.addPeriod(period);\n    });\n  }\n\n  private _markFirstAndLastWeeks() {\n    this.weeksByPeriod.forEach((period) => {\n      period.markFirstLastWeeks()\n    })\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n} from '@angular/core';\n\n\nimport {\n  eachDayOfInterval,\n  format,\n  isAfter,\n  lightFormat,\n  startOfDay,\n} from 'date-fns';\n\nimport { getStartDayDate } from '../../../common/helpers/get-start-day-date';\nimport { splitDateByComponents } from '../../../common/helpers/split-date-by-components';\nimport { IPeriod } from '../../../common/interfaces/period.interface';\n\nimport { WEEKDAYS } from '../../consts/week-days';\nimport { Month } from '../../models/month';\nimport { Period } from '../../models/period';\nimport { Week } from '../../models/week';\nimport { DayItem } from '../../interfaces/day-item.interface';\n\n\n@Component({\n  selector: 'fs-date-picker-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    'class': 'fs-date-picker-calendar',\n  },\n})\nexport class FsDatePickerCalendarComponent implements OnInit, OnChanges {\n\n  @Input()\n  public date: Date = null;\n\n  @Input()\n  public period: IPeriod = null;\n\n  @Input()\n  public rangeFrom: Date = null;\n\n  @Input()\n  public rangeTo: Date = null;\n\n  @Input()\n  public highlightStartDate: Date = null;\n\n  @Input()\n  public highlightEndDate: Date = null;\n\n  @Input()\n  public dateMode: string = null;\n\n  @Input()\n  public disabledDays: [Date, Date][] = null;\n\n  @Input()\n  public drawMonth: Date = null;\n\n  @Input()\n  public seedDate;\n\n  @Input()\n  public periodWeeks;\n\n  @Input()\n  public hideExtraDays = false;\n\n  @Output()\n  public change = new EventEmitter<Date>();\n\n  @Output()\n  public rangeChange = new EventEmitter<Date>();\n\n  @Output()\n  public periodChange = new EventEmitter<IPeriod>();\n\n  @Output()\n  public hoverDay = new EventEmitter<any>();\n\n  public selected: any = {};\n  public selectedPeriod: Period;\n  public selectedRange: { from?: string, to?: string } = {}\n  public month: Month = null;\n\n  public weekDaysList = [];\n\n  public currentDate = new Date();\n  public today: any = {\n    date: format(this.currentDate, 'yyyy-MM-dd'),\n    month: this.currentDate.getMonth(),\n    year: this.currentDate.getFullYear()\n  };\n\n  public highlightedRangeDays = null;\n\n  // date | datetime | week\n  private _calendarMode = 'date';\n\n  constructor(\n    public element: ElementRef,\n  ) {}\n\n  public ngOnInit() {\n\n    this._calendarMode = this.dateMode;\n\n    if (this.dateMode === 'week') {\n      if (this.period && this.seedDate) {\n        this.selectedPeriod = new Period(this.period.period, this.period.from, this.seedDate, this.periodWeeks, true);\n        this.selectedPeriod.year = this.period.from.getFullYear();\n\n        const selectedPeriod = this.month.updateSelectionForPeriod(this.selectedPeriod);\n\n        if (selectedPeriod) {\n          this.selectedPeriod = selectedPeriod;\n        }\n      }\n    } else if (this.date) {\n      this.selected = splitDateByComponents(this.date);\n    }\n  }\n\n  public ngOnChanges(changes) {\n    if (changes) {\n\n      if (changes.date) {\n        this.selected = splitDateByComponents(this.date);\n        this.updateDaysHighlighted();\n      } else if (changes.highlightStartDate || changes.highlightEndDate) {\n        this.updateDaysHighlighted();\n      }\n\n      if (changes.drawMonth) {\n        if (changes.drawMonth.currentValue) {\n          this.drawMonths(changes.drawMonth.currentValue);\n        }\n      }\n\n      if (changes.rangeFrom || changes.rangeTo) {\n        this.selectedRange = {\n          from: this.rangeFrom && lightFormat(this.rangeFrom, 'yyyy-MM-dd') || null,\n          to: this.rangeTo && lightFormat(this.rangeTo, 'yyyy-MM-dd') || null,\n        }\n      }\n    }\n  }\n\n  public onMouseEnterDay(day) {\n    this.hoverDay.emit(day);\n  }\n\n  public mouseEnterWeek(week: Week) {\n    if (this.dateMode === 'week') {\n      week.period.mouseOver = true;\n    }\n  }\n\n  public mouseLeaveWeek(week: Week) {\n    if (this.dateMode === 'week') {\n      week.period.mouseOver = false;\n    }\n  }\n\n  public updateDaysHighlighted() {\n    this.highlightedRangeDays = {\n      data: {},\n      min: null,\n      max: null\n    };\n\n    let start = null;\n    let end = null;\n\n    if (this.highlightStartDate && this.highlightEndDate) {\n      if (isAfter(this.highlightStartDate, this.highlightEndDate)) {\n        start = this.highlightEndDate;\n        end = this.highlightStartDate;\n      } else {\n        start = this.highlightStartDate;\n        end = this.highlightEndDate;\n      }\n\n      start = startOfDay(start);\n      end = startOfDay(end);\n\n      const range = Array.from(eachDayOfInterval({ start, end }));\n\n      if (!range.length) {\n        return;\n      }\n\n      for (const day of range) {\n        this.highlightedRangeDays.data[lightFormat(day, 'yyyy-MM-dd')] = true;\n      }\n\n      this.highlightedRangeDays.min = lightFormat(range[0], 'yyyy-MM-dd');\n      this.highlightedRangeDays.max = lightFormat(range[range.length - 1], 'yyyy-MM-dd');\n    }\n  }\n\n  public createModel() {\n    if (!this.date) {\n      this.date = getStartDayDate();\n    }\n  }\n\n  public setDate(date) {\n    this.date = date;\n    this.change.emit(date);\n  }\n\n  /**\n   *\n   * @param day\n   * @param week\n   * @param event\n   */\n  public dayClick(day, week, event) {\n    if (this.dateMode === 'week') {\n      this.selectPeriod(week.period);\n    } else if (this.dateMode === 'monthrange') {\n      this.selectMonthRange(day);\n    } else {\n      this.selectDay(day);\n    }\n  }\n\n  public selectDay(day) {\n    if (day.disabled) {\n      return;\n    }\n\n    if (!this.date) {\n      this.createModel();\n    }\n\n\n    const date = new Date(\n      day.year,\n      day.month,\n      day.number,\n      this.date.getHours(),\n      this.date.getMinutes(),\n      this.date.getSeconds()\n    );\n\n    this.setDate(date);\n  }\n\n  public selectMonthRange(day: DayItem) {\n    const date = new Date(\n      day.year,\n      day.month,\n      +day.number,\n      0,\n      0,\n      0,\n    );\n\n    this.setDate(date);\n  }\n\n  public selectPeriod(period: Period) {\n    if (this.selectedPeriod) {\n      if (this.selectedPeriod === period) {\n        this.selectedPeriod.selected = !this.selectedPeriod.selected;\n      } else {\n        this.selectedPeriod.selected = false;\n        period.selected = true;\n        this.selectedPeriod = period;\n      }\n    } else {\n      period.selected = true;\n      this.selectedPeriod = period;\n    }\n\n    if (this.selectedPeriod.selected) {\n      this.periodChange.emit({\n        period: this.selectedPeriod.periodId,\n        from: this.selectedPeriod.from,\n        to: this.selectedPeriod.to,\n      });\n    } else {\n      this.periodChange.emit(null);\n    }\n  }\n\n  public drawMonths(date) {\n    this.month = this.createMonth(date);\n  }\n\n  public createMonth(date: Date) {\n    const month = new Month(\n      date,\n      this.seedDate,\n      this.periodWeeks,\n      this.disabledDays,\n      this.hideExtraDays,\n    );\n\n    if (this.dateMode === 'week') {\n      this.weekDaysList = WEEKDAYS.map((_, i, arr) => {\n        return arr[(i + month.seedDay) % 7];\n      });\n    } else {\n      this.weekDaysList = WEEKDAYS.slice();\n    }\n\n    month.renderDays();\n\n    if (this.dateMode === 'week' && this.selectedPeriod) {\n      const selectedPeriod = month.updateSelectionForPeriod(this.selectedPeriod);\n\n      if (selectedPeriod) {\n        this.selectedPeriod = selectedPeriod;\n      }\n    }\n\n    return month;\n  }\n\n}\n","<table\n  [class.month-range]=\"dateMode === 'monthrange'\"\n  [class.range-selected]=\"!!selectedRange.from && !!selectedRange.to\">\n  <thead>\n    <tr>\n      <th *ngIf=\"seedDate && periodWeeks\">#</th>\n      <th *ngFor=\"let wd of weekDaysList\">{{wd}}</th>\n    </tr>\n  </thead>\n\n  <tbody class=\"calendar calendar-{{ month.monthAndYear }}\" >\n    <ng-container *ngFor=\"let week of month.weeks\">\n      <tr class=\"week\"\n          [class.first-period-week]=\"week.firstWeekInPeriod\"\n          [class.last-period-week]=\"week.lastWeekInPeriod\"\n          [class.hover]=\"week.period?.mouseOver\"\n          (mouseenter)=\"mouseEnterWeek(week)\"\n          (mouseleave)=\"mouseLeaveWeek(week)\"\n      >\n        <ng-container *ngIf=\"week.periodLableVisible\">\n          <td class=\"period\"\n              [rowSpan]=\"week.period.countOfWeeks\"\n              [class.selected]=\"week.period.selected\"\n              (click)=\"selectPeriod(week.period)\">\n            {{ week.period.periodId }}\n          </td>\n        </ng-container>\n\n        <ng-container *ngFor=\"let day of week.days\">\n          <td class=\"tile day\"\n              [class.hidden-day]=\"hideExtraDays && day.mute\"\n              [class.now]=\"today.date == day.date\"\n              [class.mute]=\"day.mute\"\n              [class.selected]=\"(day.selected || day.date == selected.date && !day.mute)\"\n              [class.range-from]=\"day.date === selectedRange.from && !day.mute && selectedRange.from !== selectedRange.to\"\n              [class.range-to]=\"day.date === selectedRange.to && !day.mute && selectedRange.from !== selectedRange.to\"\n              [class.same-range-dates]=\"(hideExtraDays && !day.mute) && selectedRange.from === day.date && selectedRange.from === selectedRange.to\"\n              [class.highlighted]=\"!day.disabled && !day.mute && !!highlightedRangeDays.data[day.date]\"\n              [class.highlight-min-date]=\"day.date === highlightedRangeDays.min\"\n              [class.highlight-max-date]=\"day.date === highlightedRangeDays.max\"\n              [class.week-mode]=\"dateMode === 'week'\"\n              [class.disabled]=\"day.disabled\"\n              (click)=\"dayClick(day, week, $event)\"\n              (mouseenter)=\"onMouseEnterDay(day)\">\n            <div class=\"tile-content\">\n              <div class=\"tile-day-label\">\n                {{ day.number }}\n              </div>\n            </div>\n          </td>\n        </ng-container>\n      </tr>\n    </ng-container>\n\n  <!--<tr *ngIf=\"month.weeks.length < 6\">\n    <td colspan=\"7\" class=\"tile\"></td>\n  </tr>-->\n  </tbody>\n</table>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  Input,\n  IterableDiffers,\n  OnChanges,\n  OnInit,\n  Output\n} from '@angular/core';\n\nimport { getStartDayDate } from '../../../common/helpers/get-start-day-date';\nimport { splitDateByComponents } from '../../../common/helpers/split-date-by-components';\n\n\n@Component({\n  selector: 'fs-date-picker-time',\n  templateUrl: './time.component.html',\n  styleUrls: ['./time.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDatePickerTimeComponent implements OnInit, OnChanges, DoCheck {\n\n  @Input() public date = null;\n  @Input() public disabledMinutes = [];\n  @Input() public disabledHours = [];\n  @Input() public disabledTimes = [];\n  @Input() public expanded = false;\n  @Input() public minutes = true;\n  @Input() public showNotSelected = true;\n\n  @Output() public onChange = new EventEmitter<any>();\n\n  public selected: any = {};\n  public disabledTimeMinutes: any = {};\n  public disabledTimeHours: any = {};\n  public disabledGroupedMinutes: any = {};\n  public nowHour;\n  public nowMinute;\n  public timeHoursCollapsed = [\n    [\n      [0, 1, 2, 3],\n      [4, 5, 6, 7],\n      [8, 9, 10, 11]\n    ],\n    [\n      [12, 13, 14, 15],\n      [16, 17, 18, 19],\n      [20, 21, 22, 23]\n    ]\n  ];\n\n  public timeMinutesCollapsed = [\n    [0, 5],\n    [10, 15],\n    [20, 25],\n    [30, 35],\n    [40, 45],\n    [50, 55]\n  ];\n\n  public timeHoursExpanded = [\n    [0, 12],\n    [1, 13],\n    [2, 14],\n    [3, 15],\n    [4, 16],\n    [5, 17],\n    [6, 18],\n    [7, 19],\n    [8, 20],\n    [9, 21],\n    [10, 22],\n    [11, 23]\n  ];\n\n  public timeMinutesExpanded = [\n              [0, 1, 2, 3, 4],\n              [5, 6, 7, 8, 9],\n              [10, 11, 12, 13, 14],\n              [15, 16, 17, 18, 19],\n              [20, 21, 22, 23, 24],\n              [25, 26, 27, 28, 29],\n              [30, 31, 32, 33, 34],\n              [35, 36, 37, 38, 39],\n              [40, 41, 42, 43, 44],\n              [45, 46, 47, 48, 49],\n              [50, 51, 52, 53, 54],\n              [55, 56, 57, 58, 59]\n            ];\n\n  private disabledMinutesDiffer = null;\n  private disabledHoursDiffer = null;\n  private disabledTimesDiffer = null;\n\n\n  constructor(\n    public element: ElementRef,\n    private _iterableDiffers: IterableDiffers\n  ) {\n    this.disabledHoursDiffer = this._iterableDiffers.find([]).create(null);\n    this.disabledMinutesDiffer = this._iterableDiffers.find([]).create(null);\n    this.disabledTimesDiffer = this._iterableDiffers.find([]).create(null);\n  }\n\n  public ngOnInit() {\n    this.checkDisabledTime();\n    this.nowHour = (new Date()).getHours();\n    this.nowMinute = this.minutes\n      ? (new Date()).getMinutes()\n      : 0;\n  }\n\n  public ngOnChanges(changes) {\n    if (changes && changes.date) {\n      this.selected = splitDateByComponents(this.date);\n      if (!this.minutes) {\n        this.selected.minute = 0;\n\n        if (this.date) {\n          this.date.setMinutes(0);\n        }\n      }\n    }\n  }\n\n  public ngDoCheck() {\n    if (this.disabledHoursDiffer.diff(this.disabledHours) ||\n    this.disabledMinutesDiffer.diff(this.disabledMinutes) ||\n    this.disabledTimesDiffer.diff(this.disabledTimes)\n    ) {\n      this.checkDisabledTime();\n    }\n  }\n\n  public checkDisabledTime() {\n\n    this.disabledTimeMinutes = {};\n    this.disabledTimeHours = {};\n    this.disabledGroupedMinutes = {};\n\n    if (this.disabledMinutes !== undefined) {\n      for (const range of this.disabledMinutes) {\n        this.addDisabledMinutes(range);\n      }\n    }\n\n    if (this.disabledHours !== undefined) {\n      for (const range of this.disabledHours) {\n        this.addDisabledHours(range);\n      }\n    }\n\n    if (this.disabledTimes !== undefined) {\n      for (const range of this.disabledTimes) {\n\n        const min = Math.min(range[0], range[1]);\n        const max = Math.max(range[0], range[1]);\n\n        const minMinutes = min % 60;\n        const maxMinutes = max % 60;\n\n        const minHour = Math.floor(min / 60);\n        const maxHour = Math.floor(max / 60);\n\n        for (let h = 0; h <= 24; h++) {\n\n          this.disabledGroupedMinutes[h] = {};\n\n          if (h > minHour && h < maxHour)  {\n            this.addDisabledHours(h);\n          } else if (h == minHour && !minMinutes && minHour != maxHour) {\n            this.addDisabledHours(h);\n          }\n\n          if (h >= minHour && h <= maxHour) {\n            for (let m = minMinutes; m < maxMinutes; m++) {\n              const minute = h * m;\n              if (minute >= range[0] && minute <= range[1]) {\n                this.disabledGroupedMinutes[h][m] = true;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  public addDisabledMinutes(range) {\n    const min = Math.min(range[0], range[1]);\n    const max = Math.max(range[0], range[1]);\n    if (Array.isArray(range)) {\n      for (let i = min; i <= max; i++) {\n        this.disabledTimeMinutes[i] = true;\n      }\n    } else {\n      this.disabledTimeMinutes[range] = true;\n    }\n  }\n\n  public addDisabledHours(range) {\n    const min = Math.min(range[0], range[1]);\n    const max = Math.max(range[0], range[1]);\n    if (Array.isArray(range)) {\n      for (let i = min; i <= max; i++) {\n        this.disabledTimeHours[i] = true;\n      }\n    } else {\n      this.disabledTimeHours[range] = true;\n    }\n  }\n\n  public createModel() {\n    if (!this.date) {\n      this.setDate(getStartDayDate());\n    }\n  }\n\n  public setDate(date) {\n    this.date = date;\n    this.onChange.emit(date);\n  }\n\n  public hourClick(hour) {\n\n    if (this.disabledTimeHours[hour]) {\n      return;\n    }\n\n    let newDate: Date;\n\n    if (!this.date) {\n      newDate = getStartDayDate();\n    } else {\n      newDate = new Date(this.date);\n    }\n\n    newDate.setHours(hour);\n\n    this.setDate(newDate);\n  }\n\n  public minuteClick(minute) {\n    if (this.disabledTimeMinutes[minute]\n      || (this.disabledGroupedMinutes[this.selected.hour] && this.disabledGroupedMinutes[this.selected.hour][minute])\n    ) {\n      return;\n    }\n\n    let newDate: Date;\n\n    if (!this.date) {\n      newDate = getStartDayDate();\n    } else {\n      newDate = new Date(this.date);\n    }\n\n    newDate.setMinutes(minute);\n\n    this.setDate(newDate);\n  }\n\n}\n","<div class=\"month-year time\" *ngIf=\"minutes && showNotSelected\">\n  <ng-container *ngIf=\"date; else noTime\">\n    {{ date | date:'h:mm aa'}}\n  </ng-container>\n  <ng-template #noTime>\n    Time Not Selected\n  </ng-template>\n</div>\n\n<div class=\"time-container\">\n  <table *ngIf=\"expanded; else contracted\">\n    <thead *ngIf=\"minutes\">\n      <tr>\n        <th class=\"hours-col\">\n          Hour\n        </th>\n        <th class=\"minutes-col\">\n          Minute\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td class=\"hours-col\">\n          <div class=\"hours-container\">\n            <table>\n              <tr *ngFor=\"let hours of timeHoursExpanded\">\n                <td\n                  *ngFor=\"let hour of hours\"\n                  class=\"tile number hour\"\n                  (click)=\"hourClick(hour)\"\n                  [ngClass]=\"{\n                    disabled: disabledTimeHours[hour],\n                    now: nowHour === hour,\n                    selected: hour == selected.hour\n                  }\">\n                  <div class=\"tile-content\">\n                    <span *ngIf=\"hour < 12\">{{ hour ? hour : 12 }}<span class=\"am-pm\">am</span></span>\n                    <span *ngIf=\"hour >= 12\">{{ hour==12 ? 12 : hour-12 }}<span class=\"am-pm\">pm</span></span>\n                  </div>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </td>\n        <td class=\"minutes-col\" *ngIf=\"minutes\">\n          <div class=\"minutes-container\">\n            <table>\n              <tr *ngFor=\"let minutes of timeMinutesExpanded\">\n                <td *ngFor=\"let minute of minutes\"\n                    class=\"tile number minute\"\n                    [ngClass]=\"{\n                      disabled: disabledTimeMinutes[minute] || (disabledGroupedMinutes[selected.hour] && disabledGroupedMinutes[selected.hour][minute]),\n                      selected: minute == selected.minute,\n                      now: nowMinute === minute\n                    }\"\n                    (click)=\"minuteClick(minute)\">\n                    <div class=\"tile-content\">{{ minute }}</div>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n\n<ng-template #contracted>\n  <table>\n    <thead *ngIf=\"minutes\">\n      <tr>\n        <th class=\"hours-col\">\n          Hour\n        </th>\n        <th class=\"minutes-col\">\n          Minute\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td class=\"hours-col\">\n          <table>\n            <tbody *ngFor=\"let group of timeHoursCollapsed; let i = index\">\n            <tr *ngFor=\"let hours of group\">\n              <td\n                *ngFor=\"let hour of hours\"\n                class=\"tile number hour\"\n                (click)=\"hourClick(hour)\"\n                [ngClass]=\"{\n                  disabled: disabledTimeHours[hour],\n                  selected: hour == selected.hour,\n                  now: nowHour === hour\n                }\">\n                <div class=\"tile-content\">\n                  <span *ngIf=\"hour < 12\">{{ hour ? hour : 12 }}<span class=\"am-pm\">am</span></span>\n                  <span *ngIf=\"hour >= 12\">{{ hour==12 ? 12 : hour-12 }}<span class=\"am-pm\">pm</span></span>\n                </div>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </td>\n\n        <td class=\"minutes-col\" *ngIf=\"minutes\">\n          <table>\n            <tr *ngFor=\"let minutes of timeMinutesCollapsed\">\n              <td\n                *ngFor=\"let minute of minutes\"\n                class=\"tile number minute\"\n                [ngClass]=\"{\n                  disabled: disabledTimeMinutes[minute] || (disabledGroupedMinutes[selected.hour] && disabledGroupedMinutes[selected.hour][minute]),\n                  selected: minute == selected.minute,\n                  now: nowMinute === minute\n                }\"\n                  (click)=\"minuteClick(minute)\">\n                <div class=\"tile-content\">{{ minute }}</div>\n              </td>\n            </tr>\n          </table>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { FsDatePickerCalendarComponent } from './components/calendar/calendar.component';\nimport { FsDatePickerTimeComponent } from './components/time/time.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n\n    MatIconModule,\n  ],\n  declarations: [\n    FsDatePickerCalendarComponent,\n    FsDatePickerTimeComponent,\n  ],\n  exports: [\n    FsDatePickerCalendarComponent,\n    FsDatePickerTimeComponent,\n  ],\n})\nexport class FsDatePickerCalendarModule {}\n","export function getYearsCycle(\n  monthLabelHeight: number,\n  weekHeight: number,\n  startCycleYear: number,\n): ReadonlyArray<ReadonlyArray<number>> {\n  // Create array of 28 years.\n  // Calendar repeats every 28 years\n  return Array.from(\n    { length: 28 },\n    (_, i) => {\n      // Create array of 12 months for every year\n      return Array.from(\n        { length: 12 },\n        (__, month) => {\n          // Calculate total height of calendar for every month\n          return monthLabelHeight + weekCount(i, month, startCycleYear) * weekHeight\n        });\n    }\n  );\n}\n\n/**\n * Calculate total height of calendars from 0 year to lastYear\n */\nexport function reduceCycle(\n  yearsCycle: ReadonlyArray<ReadonlyArray<number>>,\n  lastYear = 28,\n  lastMonth = 12,\n): number {\n  return yearsCycle.reduce(\n    (total, year, yearIndex) => {\n      if (yearIndex <= lastYear) {\n        const heightOfMonthsInYear = year.reduce((sum, month, monthIndex) => {\n          if (yearIndex < lastYear || (yearIndex === lastYear && monthIndex < lastMonth)) {\n            sum += month;\n          }\n\n          return sum;\n        }, 0);\n\n        total += heightOfMonthsInYear;\n      }\n\n      return total;\n    }, 0);\n}\n\n/**\n * Returns number of weeks for given month\n */\nfunction weekCount(yearCycleIndex: number, month: number, startCycleYear: number): number {\n  const firstOfMonth = new Date(yearCycleIndex + startCycleYear, month, 1);\n  const lastOfMonth = new Date(yearCycleIndex + startCycleYear, month + 1, 0);\n  const days = firstOfMonth.getDay() + lastOfMonth.getDate();\n\n  return Math.ceil(days / 7);\n}\n","import { CdkVirtualScrollViewport, VirtualScrollStrategy } from '@angular/cdk/scrolling';\n\nimport { Subject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\n\nimport { getYearsCycle, reduceCycle } from './helpers';\nimport { Injectable } from \"@angular/core\";\n\nexport const YEARS_TO_BE_RENDERED = 200;\nexport const START_CYCLE_YEAR = 1900;\n\nconst RENDER_BUFFER = 500;\n\n// height of month label and week days line\nconst MONTH_LABEL_HEIGHT = 78;\n// height of week row\nconst WEEK_HEIGHT = 50;\n\nexport interface FsCalendarMobileScrollStrategy extends VirtualScrollStrategy {\n  setInitialDate(date: Date): void;\n  scrollToDate(date: Date, behavior?: ScrollBehavior): void;\n}\n\n\n/**\n * Implementation has been taken from Alex Inkin article, adopted and modified a bit\n * https://indepth.dev/posts/1091/writing-custom-virtual-scroll-strategy\n */\n@Injectable()\nexport class CalendarScrollStrategy implements FsCalendarMobileScrollStrategy {\n\n  private readonly _index$ = new Subject<number>();\n\n  public readonly scrolledIndexChange = this._index$.pipe(distinctUntilChanged());\n\n  private _viewport: CdkVirtualScrollViewport | null = null;\n  private _initialDate: Date;\n  private _firstTimeRender = true;\n\n  private readonly yearsCycle = getYearsCycle(MONTH_LABEL_HEIGHT, WEEK_HEIGHT, START_CYCLE_YEAR);\n  // Total height of 28 years cycle\n  private readonly yearsCycleHeight = reduceCycle(this.yearsCycle);\n\n  public attach(viewport: CdkVirtualScrollViewport): void {\n    this._viewport = viewport;\n\n    // Here is \"7\" is number of \"cycles\" in years range\n    // We are rendering 200 years from 1900 to 2100\n    // Year calendar repeat itself every 28 years\n    // 200 / 28 = 7.14\n    this._viewport.setTotalContentSize(this.yearsCycleHeight * 7);\n  }\n\n  public detach(): void {\n    this._index$.complete();\n    this._viewport = null;\n  }\n\n  public onContentScrolled(): void {\n    if (this._viewport) {\n      this._updateRenderedRange();\n    }\n  }\n\n  public onDataLengthChanged(): void {}\n  public onContentRendered(): void {}\n  public onRenderedOffsetChanged(): void {}\n\n  /**\n   * Initial Date for render can be set on initialization step to reduce calculations\n   */\n  public setInitialDate(date: Date): void {\n    this._initialDate = date;\n  }\n\n  /**\n   * Does scroll to month with provided index\n   */\n  public scrollToIndex(index: number, behavior: ScrollBehavior): void {\n    if (this._viewport) {\n      this._viewport.scrollToOffset(this._getOffsetForIndex(index), behavior);\n    }\n  }\n\n  /**\n   * Does the same thing as scrollToIndex(), but for date\n   */\n  public scrollToDate(date: Date, behavior?: ScrollBehavior): void {\n    if (this._viewport) {\n      this._viewport.scrollToOffset(this._getOffsetForDate(date), behavior);\n    }\n  }\n\n  /**\n   * Update the viewport's rendered range.\n   */\n  private _updateRenderedRange(): void {\n    if (!this._viewport) {\n      return;\n    }\n\n    // This is for support setInitialDate() method.\n    // Should be called only once at first render\n    if (this._firstTimeRender) {\n      if (this._initialDate) {\n        this.scrollToDate(this._initialDate);\n      }\n\n      this._firstTimeRender = false;\n    }\n\n    const currentScrollOffset = this._viewport.measureScrollOffset();\n    const { start: currentStart, end: currentEnd } = this._viewport.getRenderedRange();\n    const viewportSize = this._viewport.getViewportSize();\n    const dataLength = this._viewport.getDataLength();\n    const firstVisibleIndex = this._getIndexForOffset(currentScrollOffset);\n\n    // Usually we are rendering a bit more months than available in view port\n    // It works when user scrolls fast, so we have a bit time to render new months while will scroll over \"buffer\"\n    // So this is why rendered top offset is different from current scroll offset\n    const topScrollBuffer = currentScrollOffset - this._getOffsetForIndex(currentStart)\n\n    let newStart = currentStart;\n    let newEnd = currentEnd;\n\n    if (topScrollBuffer < RENDER_BUFFER && currentStart !== 0) {\n      // Here we have multiplication by 2 because we want to double our render buffer\n      newStart = Math.max(0, this._getIndexForOffset(currentScrollOffset - RENDER_BUFFER * 2))\n      newEnd = Math.min(\n        dataLength,\n        this._getIndexForOffset(currentScrollOffset + viewportSize + RENDER_BUFFER)\n      );\n    } else {\n      const bottomScrollBuffer = this._getOffsetForIndex(currentEnd) - currentScrollOffset - viewportSize;\n\n      if (bottomScrollBuffer < RENDER_BUFFER && currentEnd !== dataLength) {\n        newStart = Math.max(0, this._getIndexForOffset(currentScrollOffset - RENDER_BUFFER));\n\n        newEnd = Math.min(\n          dataLength,\n          // Here we have multiplication by 2 because we want to double our render buffer\n          this._getIndexForOffset(currentScrollOffset + viewportSize + RENDER_BUFFER * 2)\n        );\n      }\n    }\n\n    this._viewport.setRenderedRange({ start: newStart, end: newEnd });\n    this._viewport.setRenderedContentOffset(this._getOffsetForIndex(newStart));\n\n    this._index$.next(firstVisibleIndex);\n  }\n\n  private _getOffsetForIndex(index: number): number {\n    const month = index % 12;\n    const year = (index - month) / 12;\n\n    return this._computeHeight(year, month);\n  }\n\n  private _getIndexForOffset(offset: number): number {\n    // the remaining number of pixels that cannot make up a complete cycle\n    const remainder = offset % this.yearsCycleHeight;\n    const numberOfFullCycles  = (offset - remainder) / this.yearsCycleHeight;\n    const years = numberOfFullCycles * 28; // years from START_CYCLE_YEAR to current offset\n\n    let heightAccumulator = 0;\n\n    // Cycle through every year and month in 28 year cycle\n    for (let year = 0; year < this.yearsCycle.length; year++) {\n      for (let month = 0; month < this.yearsCycle[year].length; month++) {\n        heightAccumulator += this.yearsCycle[year][month];\n\n        if (heightAccumulator - this.yearsCycle[year][month] / 2 > remainder) {\n          return Math.max((years + year) * 12 + month, 0);\n        }\n      }\n    }\n\n    return YEARS_TO_BE_RENDERED;\n  }\n\n  private _getOffsetForDate(date: Date): number {\n    if (!date) {\n      return 0;\n    }\n\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const index = (year - START_CYCLE_YEAR) * 12 + month;\n\n    return this._getOffsetForIndex(index);\n  }\n\n  // Compute height for given year and month, but year starts from 0 to YEARS_TO_BE_RENDERED\n  private _computeHeight(year: number, month?: number): number {\n    const remainder = year % 28; // number of year in cycle of 28 repeated years\n    const remainderHeight = reduceCycle(this.yearsCycle, remainder, month);\n    const fullCycles = (year - remainder) / 28;\n    const fullCyclesHeight = fullCycles * this.yearsCycleHeight;\n\n    return fullCyclesHeight + remainderHeight;\n  }\n}\n","import { CollectionViewer, DataSource } from '@angular/cdk/collections';\n\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\n\nimport {\n  YEARS_TO_BE_RENDERED,\n  START_CYCLE_YEAR\n} from './calendar-scroll-strategy';\n\n\nexport class FsCalendarDataSource extends DataSource<Date> {\n\n  private _cachedMonths: Date[] = [];\n  private _fetchedPages = new Set<number>();\n\n  private readonly _dataStream = new BehaviorSubject<Date[]>(this._cachedMonths);\n  private readonly _subscription = new Subscription();\n\n  constructor() {\n    super();\n\n    this._prepareMonthsList();\n    this._dataStream.next(this._cachedMonths);\n  }\n\n  public connect(collectionViewer: CollectionViewer): Observable<Date[]> {\n    const sub = collectionViewer\n      .viewChange\n      .subscribe((range) => {\n        for (let i = range.start; i <= range.end; i++) {\n          this._fetchPage(i);\n        }\n      });\n\n    this._subscription.add(sub);\n\n    return this._dataStream;\n  }\n\n  disconnect(): void {\n    this._subscription.unsubscribe();\n  }\n\n  private _fetchPage(page: number) {\n    if (this._fetchedPages.has(page)) {\n      return;\n    }\n\n    this._fetchedPages.add(page);\n\n    const yearOffset = Math.floor(page / 12);\n    const monthOffset = page % 12;\n\n    const month = new Date(\n      yearOffset + START_CYCLE_YEAR,\n      monthOffset,\n      1\n    );\n\n    this._cachedMonths.splice(\n      page,\n      1,\n      month,\n    );\n\n    this._dataStream.next(this._cachedMonths);\n  }\n\n  private _prepareMonthsList(): void {\n    this._cachedMonths = Array\n      .from(\n        {length: YEARS_TO_BE_RENDERED * 12 }, // number of rendered years multiply by number of months in year\n        (_, i) => {\n          return new Date(Math.floor(i / 12) + START_CYCLE_YEAR, i % 12, 1);\n        }\n      );\n\n  }\n}\n","export enum PickerViewType {\n  Date = 'date',\n  DateTime = 'datetime',\n  Time = 'time',\n  Week = 'week',\n  MonthRange = 'monthrange',\n}\n","import { addYears, subYears } from 'date-fns';\n\n\nexport function getDisabledDays(minDate: Date, maxDate: Date, minYear: number, maxYear: number): [Date, Date][] {\n  const result = [];\n\n  if (minDate) {\n    const from = subYears(new Date(), minYear);\n    const to = new Date(minDate);\n\n    result.push([from, to]);\n  }\n\n  if (maxDate) {\n    result.push([new Date(maxDate), addYears(new Date(), maxYear)]);\n  }\n\n  return result;\n}\n","import { isSameDay } from 'date-fns';\nimport { RangePickerRef } from '../../../app/classes/range-picker-ref';\n\n\nexport function getDisabledTimes(model: Date | null, ref: RangePickerRef): [Date, Date][] {\n  if (!ref) { return }\n\n  const arr = [];\n  if (\n    (ref.view === 'time' && ref.startDate) ||\n    (ref.view === 'datetime' && ref.startDate && model && isSameDay(ref.startDate, model))\n  ) {\n    const from = (ref.startDate.getMinutes()) + ((ref.startDate.getHours()) * 60);\n    arr.push([0, from]);\n  }\n\n  return arr;\n}\n","import {\n  isDate,\n  isValid,\n  addMonths,\n  subMonths,\n  setMonth,\n  setYear,\n  startOfDay,\n  isBefore,\n} from 'date-fns';\n\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nimport { IDialogFactoryOptions } from '../../dialog/interfaces/dialog-factory-data.interface';\nimport { PickerViewType } from '../../common/enums/picker-view-type.enum';\nimport { getDisabledDays } from '../../dialog/helpers/get-disabled-days';\nimport { getDisabledTimes } from '../../dialog/helpers/get-disabled-times';\nimport { IPeriod } from '../../common/interfaces/period.interface';\n\nimport { RangePickerRef } from '../../../app/classes/range-picker-ref';\n\n\nexport class FsDatePickerDialogModel {\n\n  /**\n   * year | month | date\n   *\n   * Current mode of calendar. For ranges consist values for both: start and end date\n   */\n  public dateMode = null;\n  public minDate = null;\n  public maxDate = null;\n  public startOfDay = true;\n  public seedDate = null;\n  public periodWeeks = null;\n  public minutes = true;\n\n  private _minYear = null;\n  private _maxYear = null;\n\n  private _pickerOptions: IDialogFactoryOptions;\n\n  private _model$ = new BehaviorSubject<Date | null>(null);\n  private _period$ = new BehaviorSubject<IPeriod | null>(null);\n\n  private _now$ = new BehaviorSubject<Date>(new Date());\n\n  private _disabledDays$ = new BehaviorSubject<[Date, Date][]>([]);\n  private _disabledTimes$ = new BehaviorSubject<[Date, Date][]>([]);\n  private _calendarDate$ = new BehaviorSubject<Date>(this.now);\n  private _calendarMode$ = new BehaviorSubject<string>('date');\n  private _timeExpanded$ = new BehaviorSubject<boolean>(false);\n\n  /**\n   * date | datetime | time | week\n   * View is options selected on init. Can't be changed manually\n   */\n  private _view$ = new BehaviorSubject<string>('date');\n\n  constructor(\n    pickerOptions: IDialogFactoryOptions,\n  ) {\n    this._initCalendar(pickerOptions);\n    this._updateDisabled();\n  }\n\n  public get now(): Date {\n    return this._now$.value;\n  }\n\n  public set calendarDate(value: Date) {\n    this._calendarDate$.next(value);\n  }\n\n  public get calendarDate(): Date {\n    return this._calendarDate$.value;\n  }\n\n  public get calendarDate$(): Observable<Date> {\n    return this._calendarDate$;\n  }\n\n  public get view$(): Observable<string> {\n    return this._view$.asObservable();\n  }\n\n  public get view(): string {\n    return this._view$.value;\n  }\n\n  public set view(view) {\n    this._view$.next(view);\n  }\n\n  public get isDateView(): boolean {\n    return this.view === PickerViewType.Date;\n  }\n\n  public get isDateTimeView(): boolean {\n    return this.view === PickerViewType.DateTime;\n  }\n\n  public get isTimeView(): boolean {\n    return this.view === PickerViewType.Time;\n  }\n\n  public get isWeekView(): boolean {\n    return this.view === PickerViewType.Week;\n  }\n\n  public get isMonthRangeView(): boolean {\n    return this.view === PickerViewType.MonthRange;\n  }\n\n  public get calendarMode$(): Observable<string> {\n    return this._calendarMode$;\n  }\n\n  public get calendarMode(): string {\n    return this._calendarMode$.value;\n  }\n\n  public set model(value: Date | null) {\n    if (isValid(value)) {\n      if (this.isDateView && this.startOfDay) {\n        value = startOfDay(value);\n      }\n\n      /**\n       * For cases when we have datetime view type and have opened \"To\" date picker.\n       * If \"From\" date is already selected it means that we have some Time range to be disabled.\n       * When user select \"To\" date without time (only clicks on date) we have to pull up time for selected date.\n       */\n      if (this.isDateTimeView\n        && this._pickerOptions.rangeType === 'to'\n        && !this.model\n        && value\n      ) {\n        if (isBefore(value, this.rangePickerRef.startDate)) {\n          value = new Date(this.rangePickerRef.startDate);\n        }\n      }\n    } else {\n      value = null;\n    }\n\n    this._model$.next(value);\n\n    this._updateDisabledTimes();\n  }\n\n  public get model(): Date | null {\n    return this._model$.value;\n  }\n\n  public get model$(): Observable<Date | null> {\n    return this._model$;\n  }\n\n  public set period(value: IPeriod | null) {\n    this._period$.next(value);\n  }\n\n  public get period(): IPeriod | null {\n    return this._period$.value;\n  }\n\n  public get period$(): Observable<IPeriod | null> {\n    return this._period$;\n  }\n\n  public set disabledDays(value: [Date, Date][]) {\n    this._disabledDays$.next(value);\n  }\n\n  public get disabledDays$(): Observable<[Date, Date][]> {\n    return this._disabledDays$;\n  }\n\n  public set disabledTimes(value: [Date, Date][]) {\n    this._disabledTimes$.next(value);\n  }\n\n  public get disabledTimes$(): Observable<[Date, Date][]> {\n    return this._disabledTimes$;\n  }\n\n  public set minYear(minYear) {\n    this._minYear = minYear || (new Date().getFullYear() - 100);\n  }\n\n  public get minYear() {\n    return this._minYear;\n  }\n\n  public set maxYear(maxYear) {\n    this._maxYear = maxYear || (new Date().getFullYear() + 100);\n  }\n\n  public get maxYear() {\n    return this._maxYear;\n  }\n\n  private set _calendarMode(value: string) {\n    this._calendarMode$.next(value);\n  }\n\n  public get timeExpanded$(): Observable<boolean> {\n    return this._timeExpanded$.asObservable();\n  }\n\n  public get timeExpanded(): boolean {\n    return this._timeExpanded$.value;\n  }\n\n  public set timeExpanded(flag: boolean) {\n    this._timeExpanded$.next(flag);\n  }\n\n  public get rangePickerRef(): RangePickerRef | null {\n    return this._pickerOptions.pickerRef;\n  }\n\n  public setCalendarMonth(month: number) {\n    this.calendarDate = setMonth(this.calendarDate, month);\n  }\n\n  public setCalendarYear(year: number) {\n    this.calendarDate = setYear(this.calendarDate, year);\n    this._updateDisabled();\n  }\n\n  public nextMonth() {\n    this.calendarDate = addMonths(this.calendarDate, 1);\n  }\n\n  public prevMonth() {\n    this.calendarDate = subMonths(this.calendarDate, 1);\n  }\n\n  public setCalendarMode(mode: string) {\n    this._calendarMode = mode;\n  }\n\n  private _initCalendar(options: IDialogFactoryOptions) {\n    this._pickerOptions = { ...options };\n\n    this.view = options.view;\n\n    switch (this.view) {\n      case PickerViewType.Week: {\n        this.period = (options.modelValue as IPeriod);\n        this.calendarDate = (options.modelValue as IPeriod)?.from || new Date();\n      } break;\n\n      case PickerViewType.MonthRange: {\n        this.calendarDate = (options.modelValue as Date) || new Date();\n      } break;\n\n      default: {\n        this.model = (options.modelValue as Date);\n        this.calendarDate = (options.modelValue as Date) || new Date();\n      }\n    }\n\n    this._calendarMode = options.view;\n    this.minYear = options.minYear;\n    this.maxYear = options.maxYear;\n    this.minDate = options.minDate;\n    this.maxDate = options.maxDate;\n    this.startOfDay = options.startOfDay;\n    this.minutes = options.minutes === undefined\n      ? true\n      : options.minutes;\n\n\n    if (!isDate(options.seedDate) || !isValid(options.seedDate)) {\n      this.seedDate = new Date((new Date().getFullYear()), 0, 1);\n    } else {\n      this.seedDate = options.seedDate;\n    }\n\n    this.periodWeeks = options.periodWeeks;\n\n    this._updateDisabledDays();\n  }\n\n  private _updateDisabled() {\n    this._updateDisabledDays();\n    this._updateDisabledTimes();\n  }\n\n  private _updateDisabledDays() {\n    if (this._pickerOptions.rangeType) {\n      if (this._pickerOptions.rangeType === 'to') {\n        this.disabledDays = getDisabledDays(this.minDate, this.maxDate, this.minYear, this.maxYear);\n      }\n    } else {\n      this.disabledDays = getDisabledDays(this.minDate, this.maxDate, this.minYear, this.maxYear);\n    }\n  }\n\n  private _updateDisabledTimes() {\n    const pickerView = this.view;\n\n    if (pickerView !== PickerViewType.DateTime && pickerView !== PickerViewType.Time) {\n      return;\n    }\n\n    if (this._pickerOptions.rangeType) {\n      if (this._pickerOptions.rangeType === 'to') {\n        this.disabledTimes = getDisabledTimes(this.model, this._pickerOptions.pickerRef);\n      }\n    } else {\n      this.disabledTimes = getDisabledTimes(this.model, this._pickerOptions.pickerRef);\n    }\n  }\n\n}\n","export const MONTHS = [\n  { value: 0, name: 'January', abr: 'Jan' },\n  { value: 1, name: 'February', abr: 'Feb' },\n  { value: 2, name: 'March', abr: 'Mar' },\n  { value: 3, name: 'April', abr: 'Apr' },\n  { value: 4, name: 'May', abr: 'May' },\n  { value: 5, name: 'June', abr: 'June' },\n  { value: 6, name: 'July', abr: 'July' },\n  { value: 7, name: 'August', abr: 'Aug' },\n  { value: 8, name: 'September', abr: 'Sept' },\n  { value: 9, name: 'October', abr: 'Oct' },\n  { value: 10, name: 'November', abr: 'Nov' },\n  { value: 11, name: 'December', abr: 'Dec' }\n];\n","import { endOfMonth, startOfMonth } from 'date-fns';\n\nimport { isRangeDisabled } from './is-range-disabled';\n\n\nexport function isMonthDisabled(date: Date, disabledDays: [Date, Date][]): boolean {\n  const startMonth = startOfMonth(date);\n  const endMonth = endOfMonth(date);\n\n  return isRangeDisabled(disabledDays, startMonth, endMonth);\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  AfterViewInit,\n  OnChanges,\n  SimpleChanges,\n  Output,\n  EventEmitter,\n  ElementRef,\n} from '@angular/core';\n\nimport { endOfYear, startOfYear } from 'date-fns';\n\nimport { isRangeDisabled } from '../../../../../common/helpers/is-range-disabled';\nimport { MONTHS } from '../../../../../calendar/consts/months';\nimport { isMonthDisabled } from '../../../../../common/helpers/is-month-disabled';\n\n\ninterface IYearListItem {\n  value: number;\n  disabled: boolean;\n}\n\ninterface IMonthListItem {\n  value: number;\n  name: string;\n  abr: string;\n  disabled: boolean;\n}\n\n\n@Component({\n  selector: 'fs-date-picker-mobile-header',\n  templateUrl: './header.component.html',\n  styleUrls: [\n    './header.component.scss',\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDatePickerMobileHeaderComponent implements OnChanges, AfterViewInit {\n\n  @Input()\n  public viewMode: string;\n\n  @Input()\n  public minYear: number;\n\n  @Input()\n  public maxYear: number;\n\n  @Input()\n  public disabledDays: [Date, Date][];\n\n  @Input()\n  public calendarDate: Date;\n\n  @Output()\n  public monthChange = new EventEmitter<number>();\n\n  @Output()\n  public yearChange = new EventEmitter<number>();\n\n  @Output()\n  public goNextMonth = new EventEmitter<void>();\n\n  @Output()\n  public goPrevMonth = new EventEmitter<void>();\n\n  @Output()\n  public viewModeChange = new EventEmitter<string>();\n\n  public readonly now = new Date();\n  public readonly monthNow = this.now.getMonth();\n  public readonly yearNow = this.now.getFullYear();\n\n  public yearsList: IYearListItem[] = [];\n  public monthList: IMonthListItem[] = [];\n\n  constructor(\n    private _elRef: ElementRef,\n  ) {}\n\n  public get calendarMonth(): number {\n    return this.calendarDate?.getMonth();\n  }\n\n  public get calendarYear(): number {\n    return this.calendarDate?.getFullYear();\n  }\n\n  public get calendarDay(): number {\n    return this.calendarDate?.getDate();\n  }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n  }\n\n  public ngAfterViewInit(): void {\n    this._createMonthsList();\n    this._createYearsList();\n  }\n\n  public selectMonth(month: number): void {\n    this.monthChange.emit(month);\n\n    this.setViewMode('date');\n  }\n\n  public selectYear(year: number): void {\n    this.yearChange.emit(year);\n\n    this.setViewMode('date');\n  }\n\n  public setViewMode(mode: string): void {\n    this.viewModeChange.emit(mode);\n\n    if (mode === 'year') {\n      this._scrollToSelectedYear();\n    }\n  }\n\n  public nextMonth(): void {\n    this.goNextMonth.emit();\n  }\n\n  public prevMonth(): void {\n    this.goPrevMonth.emit();\n  }\n\n  private _createYearsList(): void {\n    this.yearsList = [];\n\n    for (let y: number = this.minYear; y < this.maxYear; y++) {\n      const year = new Date().setFullYear(y);\n      this.yearsList.push({ value: y, disabled: this._isYearDisabled(year) });\n    }\n  }\n\n  private _createMonthsList(): void {\n    const year = this.calendarMonth ? this.calendarYear : this.now.getFullYear();\n\n    const checkIfMonthDisabled = (monthNumber: number, disabledDays) => {\n      const month = new Date();\n      month.setFullYear(year);\n      month.setMonth(monthNumber);\n\n      return isMonthDisabled(month, disabledDays)\n    }\n\n    this.monthList = [];\n\n    for (const item of MONTHS) {\n      const monthItem = {\n        ...item,\n        disabled: checkIfMonthDisabled(item.value, this.disabledDays),\n      }\n\n      this.monthList.push(monthItem);\n    }\n  }\n\n  private _isYearDisabled(date): boolean {\n    const startYear = startOfYear(date);\n    const endYear = endOfYear(date);\n\n    return isRangeDisabled(this.disabledDays, startYear, endYear);\n  }\n\n  private _scrollToSelectedYear(): void {\n    setTimeout(() => {\n      const years = this._elRef.nativeElement.querySelector('.years');\n      const selected = years.querySelector('.year.selected');\n\n      if (selected) {\n        years.scrollTop = selected.offsetTop;\n      }\n    }, 50);\n  }\n\n}\n","<div class=\"months\" *ngIf=\"viewMode == 'month'\">\n  <div\n    *ngFor=\"let month of monthList\"\n    (click)=\"selectMonth(month.value)\"\n    class=\"month\"\n    [ngClass]=\"{\n        now: monthNow == month.value,\n        selected: calendarMonth === month.value,\n        disabled: month.disabled\n      }\">\n    <div class=\"tile-content\">{{ month.abr }}</div>\n  </div>\n</div>\n\n<div class=\"years\" *ngIf=\"viewMode == 'year'\">\n  <ng-container *ngFor=\"let year of yearsList;\">\n    <div\n      class=\"year data-year-{{ year.value }}\"\n      (click)=\"selectYear(year.value)\"\n      [class.now]=\"yearNow == year.value\"\n      [class.selected]=\"calendarYear === year.value\"\n      [class.disabled]=\"year.disabled\">\n      <div class=\"tile-content\">{{ year.value }}</div>\n    </div>\n  </ng-container>\n  <div class=\"clear\"></div>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  ElementRef,\n} from '@angular/core';\n\n\n@Component({\n  selector: 'fs-date-picker-mobile-header-month-range',\n  templateUrl: './header-month-range.component.html',\n  styleUrls: [\n    './header-month-range.component.scss',\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDatePickerMobileHeaderMonthRangeComponent {\n\n  @Input()\n  public rangeFrom: Date;\n\n  @Input()\n  public rangeTo: Date;\n\n\n  constructor(\n    private _elRef: ElementRef,\n  ) {}\n\n}\n","<ng-container *ngIf=\"rangeFrom || rangeTo else notSelected\">\n  <ng-container *ngIf=\"rangeFrom else notSelected\">\n    {{ rangeFrom | fsDateFormat: 'day-date' }}\n  </ng-container>\n  &nbsp;\n  <ng-container *ngIf=\"rangeTo\">\n    <mat-icon>arrow_forward</mat-icon>&nbsp;\n    {{ rangeTo | fsDateFormat: 'day-date' }}\n  </ng-container>\n</ng-container>\n\n\n<ng-template #notSelected>\n  Not Selected\n</ng-template>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Inject,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChanges,\n  ViewChild,\n} from '@angular/core';\n\nimport { MatBottomSheetRef } from '@angular/material/bottom-sheet';\n\nimport {\n  CdkVirtualScrollViewport,\n  VIRTUAL_SCROLL_STRATEGY,\n} from '@angular/cdk/scrolling';\n\nimport { fromEvent, Observable, race, timer, Subject } from 'rxjs';\nimport {\n  debounceTime,\n  delay,\n  filter,\n  shareReplay,\n  switchMap,\n  take,\n  takeUntil\n} from 'rxjs/operators';\n\nimport { isBefore } from 'date-fns';\n\nimport { FsCalendarDataSource } from './calendar-data-source';\nimport { FsDatePickerDialogModel } from '../../../../../dialog/classes/dialog-model';\nimport { FsDatePickerDialogRef } from '../../../../classes/dialog-ref';\nimport { RangePickerRef } from '../../../../../../app/classes/range-picker-ref';\n\nimport { FsCalendarMobileScrollStrategy, CalendarScrollStrategy } from './calendar-scroll-strategy';\nimport { MatTabGroup } from '@angular/material/tabs';\n\n\n@Component({\n  selector: 'fs-datepicker-mobile-scroll-calendar',\n  templateUrl: './virtual-scroll-calendar.component.html',\n  styleUrls: ['./virtual-scroll-calendar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    {\n      provide: VIRTUAL_SCROLL_STRATEGY,\n      useClass: CalendarScrollStrategy,\n    },\n  ],\n})\nexport class FsDatePickerVirtualScrollCalendarComponent implements OnInit, OnChanges, OnDestroy {\n\n  @Input()\n  public datePickerModel: FsDatePickerDialogModel;\n\n  @Input()\n  public autoClose = true;\n\n  @Input()\n  public parentTabGroup: MatTabGroup;\n\n  @Input()\n  public parentTabIndex: number;\n\n  @ViewChild(CdkVirtualScrollViewport, { static: true })\n  public virtualScroll: CdkVirtualScrollViewport\n\n  public modelFrom$: Observable<Date>;\n  public modelTo$: Observable<Date>;\n\n  public dataSource = new FsCalendarDataSource();\n\n  private _dialogRef: FsDatePickerDialogRef;\n  private _activeScrollIndex: number;\n  private _destroy$ = new Subject<void>();\n\n  constructor(\n    private _el: ElementRef,\n    private _bottomSheetRef: MatBottomSheetRef<any>,\n    @Inject(VIRTUAL_SCROLL_STRATEGY)\n    private _scrollStrategy: FsCalendarMobileScrollStrategy,\n  ) {}\n\n  public get dialogRef(): FsDatePickerDialogRef {\n    return this._dialogRef;\n  }\n\n  public get rangePickerRef(): RangePickerRef | null {\n    return this.datePickerModel.rangePickerRef;\n  }\n\n  public ngOnInit() {\n    this._scrollStrategy.setInitialDate(this.datePickerModel.model || new Date());\n    this._scrollToClosestMonth();\n\n    if (this.parentTabGroup) {\n      this._listenTabIndexChange();\n    }\n  }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n    if (changes.datePickerModel?.currentValue\n      && changes.datePickerModel?.firstChange\n      && this.datePickerModel.view === 'monthrange') {\n      this._initMonthRangeModels();\n    }\n  }\n\n  public ngOnDestroy(): void {\n    this._destroy$.next();\n    this._destroy$.complete();\n  }\n\n  public dateChanged(date): void {\n\n    if (this.datePickerModel.view !== 'monthrange') {\n      this.datePickerModel.model = date;\n      this.close();\n    } else {\n      this.monthRangeChange(date);\n    }\n  }\n\n  public monthRangeChange(date): void {\n    const rangeRef = this.rangePickerRef;\n    const { startDate, endDate } = rangeRef;\n\n    if (!startDate && !endDate) {\n      rangeRef.updateStartDate(date);\n    } else if (startDate && !endDate) {\n      if (isBefore(date, startDate)) {\n        rangeRef.updateStartDate(date);\n        rangeRef.updateEndDate(null);\n      } else {\n        rangeRef.updateEndDate(date);\n      }\n    } else if (startDate && endDate) {\n      rangeRef.updateStartDate(date);\n      rangeRef.updateEndDate(null);\n    }\n  }\n\n  public close(): void {\n    if (this.autoClose) {\n      this._bottomSheetRef.dismiss();\n    }\n  }\n\n  public scollIndexChange(activeIndex: number): void {\n    this._activeScrollIndex = activeIndex;\n  }\n\n  private _scrollToClosestMonth(): void {\n    const touchstart$ = fromEvent(\n      this.virtualScroll.elementRef.nativeElement,\n      'touchstart',\n    );\n\n    const touchend$ = fromEvent(\n      this.virtualScroll.elementRef.nativeElement,\n      'touchend',\n    );\n\n    const scrollDebounceTime = 80;\n\n    touchstart$\n      .pipe(\n        switchMap(() => touchend$),\n        switchMap(() =>\n          race<unknown>(\n            this.virtualScroll.elementScrolled(),\n            timer(scrollDebounceTime),\n          ).pipe(\n            debounceTime(scrollDebounceTime * 2),\n            take(1),\n            takeUntil(touchstart$),\n          )\n        ),\n        takeUntil(this._destroy$),\n      )\n      .subscribe(() => {\n        this.virtualScroll.scrollToIndex(this._activeScrollIndex, 'smooth');\n      })\n  }\n\n  private _initMonthRangeModels(): void {\n    this.modelFrom$ = this.datePickerModel\n      .rangePickerRef\n      .startDate$\n      .pipe(\n        shareReplay(),\n      );\n\n    this.modelTo$ = this.datePickerModel\n      .rangePickerRef\n      .endDate$\n      .pipe(\n        shareReplay(),\n      );\n  }\n\n  private _listenTabIndexChange(): void {\n    this.parentTabGroup.selectedIndexChange\n      .pipe(\n        filter((index) => index === this.parentTabIndex),\n        delay(0),\n        takeUntil(this._destroy$),\n      )\n      .subscribe(() => {\n        this._scrollStrategy.scrollToDate(this.datePickerModel.model || new Date());\n      });\n  }\n}\n","<div class=\"header\">\n  <ng-container *ngIf=\"datePickerModel.view !== 'monthrange' else monthRangeHeader\">\n    <fs-date-picker-mobile-header\n      [calendarDate]=\"datePickerModel.model$ | async\"\n      [minYear]=\"datePickerModel.minYear\"\n      [maxYear]=\"datePickerModel.maxYear\"\n      [viewMode]=\"datePickerModel.calendarMode$ | async\"\n      [disabledDays]=\"datePickerModel.disabledDays$ | async\">\n    </fs-date-picker-mobile-header>\n  </ng-container>\n\n  <ng-template #monthRangeHeader>\n    <fs-date-picker-mobile-header-month-range\n      [rangeFrom]=\"modelFrom$ | async\"\n      [rangeTo]=\"modelTo$ | async\">\n    </fs-date-picker-mobile-header-month-range>\n  </ng-template>\n</div>\n\n<cdk-virtual-scroll-viewport class=\"view-port\" (scrolledIndexChange)=\"scollIndexChange($event)\">\n  <div *cdkVirtualFor=\"let item of dataSource\">\n    <div class=\"month-header\">\n      {{ item | fsDateFormat: 'full-date-dayless' }}\n    </div>\n    <fs-date-picker-calendar\n      [date]=\"datePickerModel.model$ | async\"\n      [drawMonth]=\"item\"\n      [rangeFrom]=\"modelFrom$ | async\"\n      [rangeTo]=\"modelTo$ | async\"\n      [highlightStartDate]=\"modelFrom$ | async\"\n      [highlightEndDate]=\"modelTo$ | async\"\n      [dateMode]=\"datePickerModel.calendarMode$ | async\"\n      [disabledDays]=\"datePickerModel.disabledDays$ | async\"\n      [hideExtraDays]=\"true\"\n      [period]=\"datePickerModel.period\"\n      [seedDate]=\"datePickerModel.seedDate\"\n      [periodWeeks]=\"datePickerModel.periodWeeks\"\n      (change)=\"dateChanged($event)\">\n    </fs-date-picker-calendar>\n  </div>\n</cdk-virtual-scroll-viewport>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { MatBottomSheetRef } from '@angular/material/bottom-sheet';\n\nimport { FsDatePickerDialogModel } from '../../../../../dialog/classes/dialog-model';\n\n\n@Component({\n  selector: 'fs-datepicker-mobile-timepicker',\n  templateUrl: './time-picker.component.html',\n  styleUrls: ['./time-picker.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsMobileTimePickerComponent {\n\n  @Input()\n  public datePickerModel: FsDatePickerDialogModel;\n\n  @Input()\n  public autoClose = true;\n\n  @Input()\n  public showNotSelected = true;\n\n  constructor(\n    private _bottomSheet: MatBottomSheetRef,\n  ) {\n  }\n\n  public dateChanged(date): void {\n    this.datePickerModel.model = date;\n  }\n\n  public close(): void {\n    if (this.autoClose) {\n      this._bottomSheet.dismiss();\n    }\n  }\n\n}\n","<fs-date-picker-time\n  class=\"fs-date-picker-dialog\"\n  [date]=\"datePickerModel.model$ | async\"\n  [minutes]=\"datePickerModel.minutes\"\n  [disabledTimes]=\"datePickerModel.disabledTimes$ | async\"\n  [expanded]=\"datePickerModel.timeExpanded$ | async\"\n  [showNotSelected]=\"showNotSelected\"\n  (onChange)=\"dateChanged($event)\"\n></fs-date-picker-time>\n","import {\n  ChangeDetectionStrategy,\n  Component, EventEmitter,\n  Input, Output,\n} from '@angular/core';\n\nimport { FsDatePickerDialogModel } from '../../../../../dialog/classes/dialog-model';\n\n@Component({\n  selector: 'fs-datepicker-mobile-datetime-picker',\n  templateUrl: './date-time-picker.component.html',\n  styleUrls: ['./date-time-picker.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FDatePickerMobileDatetimePickerComponent {\n\n  @Input()\n  public datePickerModel: FsDatePickerDialogModel;\n\n  @Output()\n  public tabChange = new EventEmitter<number>();\n\n  public selectedDateTimeTabChange(index: number): void {\n    this.tabChange.emit(index);\n  }\n\n}\n","<mat-tab-group mat-stretch-tabs\n               dynamicHeight\n               (selectedIndexChange)=\"selectedDateTimeTabChange($event)\"\n               #tabGroup>\n  <mat-tab>\n    <ng-template mat-tab-label>\n      <ng-container *ngIf=\"datePickerModel.model$ | async as model; else noDate\">\n        {{ model | date: 'MMM d, yyyy'}}\n      </ng-container>\n      <ng-template #noDate>Date</ng-template>\n    </ng-template>\n\n    <fs-datepicker-mobile-scroll-calendar [datePickerModel]=\"datePickerModel\"\n                                          [autoClose]=\"false\"\n                                          [parentTabGroup]=\"tabGroup\"\n                                          [parentTabIndex]=\"0\">\n    </fs-datepicker-mobile-scroll-calendar>\n\n  </mat-tab>\n\n  <mat-tab>\n    <ng-template mat-tab-label>\n      <ng-container *ngIf=\"datePickerModel.model$ | async as model; else noTime\">\n        {{ model | date: 'h:mm'}}\n        {{ model | date: 'aaa' | lowercase}}\n      </ng-container>\n      <ng-template #noTime>Time</ng-template>\n    </ng-template>\n\n    <fs-datepicker-mobile-timepicker [datePickerModel]=\"datePickerModel\"\n                                     [autoClose]=\"false\"\n                                     [showNotSelected]=\"false\">\n    </fs-datepicker-mobile-timepicker>\n  </mat-tab>\n</mat-tab-group>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Inject,\n} from '@angular/core';\n\nimport { MAT_BOTTOM_SHEET_DATA, MatBottomSheetRef } from '@angular/material/bottom-sheet';\n\nimport { FsDatePickerDialogModel } from '../../../../../dialog/classes/dialog-model';\nimport { FsDatePickerDialogRef } from '../../../../classes/dialog-ref';\n\n\n@Component({\n  templateUrl: './mobile-dialog.component.html',\n  styleUrls: ['./mobile-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsMobileCalendarDialogComponent {\n\n  public selectedDateTimeTab = 0;\n\n  private readonly _dialogRef: FsDatePickerDialogRef;\n\n  constructor(\n    @Inject(MAT_BOTTOM_SHEET_DATA)\n    private _data: any,\n    private _bottomSheetRef: MatBottomSheetRef<any>,\n  ) {\n    this._dialogRef = this._data.dateDialogRef;\n  }\n\n  public get datePickerModel(): FsDatePickerDialogModel {\n    return this._dialogRef.pickerModel;\n  }\n\n  public get dialogRef(): FsDatePickerDialogRef {\n    return this._dialogRef;\n  }\n\n  public toggleTimeExpand() {\n    this.datePickerModel.timeExpanded = !this.datePickerModel.timeExpanded;\n  }\n\n  public selectedDateTimeTabChange(index) {\n    this.selectedDateTimeTab = index;\n  }\n\n  public close(): void {\n    this._bottomSheetRef.dismiss();\n  }\n\n  public datetimeTabChanged(index: number) {\n    this.selectedDateTimeTab = index;\n  }\n}\n","<div class=\"fs-date-picker-dialog\">\n  <div class=\"calendar-container\">\n    <ng-container [ngSwitch]=\"datePickerModel.view\">\n      <ng-template [ngSwitchCase]=\"'date'\">\n        <fs-datepicker-mobile-scroll-calendar [datePickerModel]=\"datePickerModel\">\n        </fs-datepicker-mobile-scroll-calendar>\n      </ng-template>\n\n      <ng-template [ngSwitchCase]=\"'week'\">\n        <fs-datepicker-mobile-scroll-calendar [datePickerModel]=\"datePickerModel\">\n        </fs-datepicker-mobile-scroll-calendar>\n      </ng-template>\n\n      <ng-template [ngSwitchCase]=\"'monthrange'\">\n        <fs-datepicker-mobile-scroll-calendar [datePickerModel]=\"datePickerModel\">\n        </fs-datepicker-mobile-scroll-calendar>\n      </ng-template>\n\n      <ng-template [ngSwitchCase]=\"'time'\">\n        <fs-datepicker-mobile-timepicker [datePickerModel]=\"datePickerModel\">\n        </fs-datepicker-mobile-timepicker>\n      </ng-template>\n\n      <ng-template [ngSwitchCase]=\"'datetime'\">\n        <fs-datepicker-mobile-datetime-picker [datePickerModel]=\"datePickerModel\"\n                                              (tabChange)=\"datetimeTabChanged($event)\">\n        </fs-datepicker-mobile-datetime-picker>\n      </ng-template>\n    </ng-container>\n  </div>\n</div>\n\n<mat-nav-list class=\"actions\">\n  <ng-container *ngIf=\"datePickerModel.minutes\n                    && (\n                      (datePickerModel.isDateTimeView && selectedDateTimeTab !== 0)\n                      || datePickerModel.isTimeView\n                    )\">\n    <mat-list-item (click)=\"toggleTimeExpand()\">\n      <button type=\"button\"\n              mat-button\n              class=\"button-more\">\n        <ng-container *ngIf=\"!(datePickerModel.timeExpanded$ | async); else lessMinutes\">\n          More Minutes\n        </ng-container>\n        <ng-template #lessMinutes>\n          Less Minutes\n        </ng-template>\n      </button>\n    </mat-list-item>\n\n  </ng-container>\n\n  <mat-list-item (click)=\"close()\">\n    <button mat-icon-button color=\"primary\">\n      Done\n    </button>\n  </mat-list-item>\n</mat-nav-list>\n","import { OverlayRef } from '@angular/cdk/overlay';\n\nimport { MatBottomSheetRef } from '@angular/material/bottom-sheet';\n\nimport { BehaviorSubject, merge } from 'rxjs';\nimport { filter, switchMap } from 'rxjs/operators';\n\n\nexport class FsDatePickerOverlayRef {\n\n  private _activeOverlayRef$ = new BehaviorSubject<OverlayRef | MatBottomSheetRef | null>(null);\n\n  public get destroy$() {\n    return this._activeOverlayRef$\n      .pipe(\n        filter((ref) => !!ref),\n        switchMap((ref) => {\n          if (ref instanceof OverlayRef) {\n            return merge(\n              ref.detachments(),\n              ref.backdropClick(),\n            );\n          } else {\n            return merge(\n              ref.afterDismissed(),\n              ref.backdropClick(),\n            );\n          }\n        }),\n      );\n  }\n\n  public get activeOverlayRef(): OverlayRef | MatBottomSheetRef | null {\n    return this._activeOverlayRef$.getValue();\n  }\n\n  public setActiveOverlay(ref: OverlayRef | MatBottomSheetRef): void {\n    this._activeOverlayRef$.next(ref);\n  }\n\n  public close(): void {\n    if (this.activeOverlayRef instanceof OverlayRef) {\n      this.activeOverlayRef?.detach();\n      this.activeOverlayRef?.dispose();\n    }\n\n    if (this.activeOverlayRef instanceof MatBottomSheetRef) {\n      this.activeOverlayRef?.dismiss();\n    }\n\n    this.setActiveOverlay(null);\n  }\n\n}\n","import { Observable, Subject } from 'rxjs';\nimport { skip } from 'rxjs/operators';\n\nimport { isEqual, forEach } from 'lodash-es';\n\nimport { IPeriod } from '../../common/interfaces/period.interface';\n\nimport { FsDatePickerDialogModel } from './dialog-model';\nimport { FsDatePickerOverlayRef } from './overlay-ref';\nimport { IDialogFactoryOptions } from '../interfaces/dialog-factory-data.interface';\nimport { IFsDatePickerDialogComponents } from '../interfaces/dialog-components.interface';\n\n\nexport class FsDatePickerDialogRef {\n\n  private _overlayRef = new FsDatePickerOverlayRef();\n  private _dialogModel: FsDatePickerDialogModel;\n  private _close$ = new Subject<void>();\n  private _value$: Observable<Date | null | IPeriod>;\n\n  /**\n   * Visual components. Can be changed by summary widget but only if _view allowed to do this.\n   */\n  private _componentsDefault: IFsDatePickerDialogComponents = {\n    calendarStart: false,\n    calendarEnd: false,\n    timeStart: false,\n    timeEnd: false\n  };\n\n  private _components: IFsDatePickerDialogComponents = null;\n\n  constructor(\n    private _pickerOptions: IDialogFactoryOptions,\n  ) {\n    this._init();\n  }\n\n  public get pickerModel(): FsDatePickerDialogModel {\n    return this._dialogModel;\n  }\n\n  public get options(): IDialogFactoryOptions {\n    return this._pickerOptions;\n  }\n\n  public get value$(): Observable<Date | IPeriod | null> {\n    return this._value$;\n  }\n\n  public get pickerOverlayRef(): FsDatePickerOverlayRef {\n    return this._overlayRef;\n  }\n\n  public get close$() {\n    return this._close$.asObservable();\n  }\n\n  get components() {\n    return this._components;\n  }\n\n  public updateValue(value) {\n    this._dialogModel.model = value;\n  }\n\n  public close(): void {\n    this.pickerOverlayRef.close();\n    this._close$.next();\n    this._close$.complete();\n  }\n\n  private _init(): void {\n    this._initComponents();\n    this._initModel();\n  }\n\n  private _initModel(): void {\n    this._dialogModel = new FsDatePickerDialogModel(\n      this._pickerOptions,\n    );\n\n    this._initValue();\n  }\n\n  private _initValue(): void {\n    if (this.options.view === 'week') {\n      this._value$ = this._dialogModel.period$\n        .pipe(\n          skip(1),\n        );\n    } else {\n      this._value$ = this._dialogModel.model$\n        .pipe(\n          skip(1),\n        );\n    }\n  }\n\n  private _initComponents(): void {\n    const value = {\n      ...this._componentsDefault,\n      ...this._pickerOptions.components || {},\n    };\n    const tempData = { ...value };\n    const allowable = [];\n\n    if (['week', 'date', 'datetime', 'monthrange'].indexOf(this._pickerOptions.view) !== -1) {\n      allowable.push('calendarStart');\n      allowable.push('calendarEnd');\n    }\n\n    if (['time', 'datetime'].indexOf(this._pickerOptions.view) !== -1) {\n      allowable.push('timeStart');\n      allowable.push('timeEnd');\n    }\n\n    forEach(tempData, (item, index) => {\n      tempData[index] = allowable.indexOf(index) !== -1 ? item : false;\n    });\n\n    // Updating components only if all value object is valid\n    if (isEqual(value, tempData)) {\n      this._components = value;\n    }\n  }\n}\n","export const MONTHS = [\n  { value: 0, name: 'January', abr: 'Jan' },\n  { value: 1, name: 'February', abr: 'Feb' },\n  { value: 2, name: 'March', abr: 'Mar' },\n  { value: 3, name: 'April', abr: 'Apr' },\n  { value: 4, name: 'May', abr: 'May' },\n  { value: 5, name: 'June', abr: 'June' },\n  { value: 6, name: 'July', abr: 'July' },\n  { value: 7, name: 'August', abr: 'Aug' },\n  { value: 8, name: 'September', abr: 'Sept' },\n  { value: 9, name: 'October', abr: 'Oct' },\n  { value: 10, name: 'November', abr: 'Nov' },\n  { value: 11, name: 'December', abr: 'Dec' }\n];\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\nimport { getDaysInMonth, isValid } from 'date-fns';\n\n\nimport { MONTHS } from '../../consts/months';\n\n\n@Component({\n  selector: 'fs-date-scroll-picker',\n  templateUrl: './date-scroll-picker.component.html',\n  styleUrls: ['./date-scroll-picker.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDateScrollPickerDialogComponent implements OnInit, OnDestroy {\n\n  @Input()\n  public model: Date | null;\n\n  @Input()\n  public showMonth: boolean;\n\n  @Input()\n  public showDay: boolean;\n\n  @Input()\n  public showYear: boolean;\n\n  @Input()\n  public minYear: number;\n\n  @Input()\n  public maxYear: number;\n\n  @Input()\n  public maxDate: Date;\n\n  @Output()\n  public changed = new EventEmitter<Date>();\n\n  public years: any[] = [];\n  public months: any[] = [];\n\n  public month;\n  public day;\n  public year;\n  public maxDay = 0;\n\n  constructor(\n    public element: ElementRef,\n    private _cdRef: ChangeDetectorRef,\n    private _renderer: Renderer2,\n    @Inject(DOCUMENT)\n    private _document,\n  ) {}\n\n  public ngOnInit(): void {\n    const modelValue: Date = this.model;\n\n    this._generateYearsArray();\n    this._generateMonthArray();\n    this._generateDaysArray();\n\n    if (modelValue && isValid(modelValue)) {\n      this._setDate(modelValue);\n    } else {\n\n      const date = new Date();\n\n      if (!this.showDay) {\n        date.setDate(1);\n      }\n\n      if (!this.showMonth) {\n        date.setMonth(1);\n      }\n\n      if (!this.showYear) {\n        date.setFullYear(0);\n      }\n\n      this._setDate(date);\n    }\n\n    this._pullToRefreshDisable();\n  }\n\n  public ngOnDestroy(): void {\n    this._pullToRefreshDefault();\n  }\n\n  private _setDate(date: Date) {\n    if (date) {\n      this.day = date.getDate();\n      this.year = date.getFullYear();\n      this.month = date.getMonth();\n    }\n  }\n\n  private _getMonth(month) {\n    return this.months.find(item => {\n      return month === item.value;\n    });\n  }\n\n  public change() {\n    if (!this.year) {\n      this.year = this.showYear ? this.years[0] : 0;\n    }\n\n    if (!this.month) {\n      this.month = this.months[0].value;\n    }\n\n    if (!this.day) {\n      this.day = 1;\n    }\n    \n    const daysInMonth = getDaysInMonth(new Date(this.year, this.month));\n    if (this.day > daysInMonth) {\n      this.day = daysInMonth;\n    }\n\n    const date = new Date(this.year, this.month, this.day);\n\n    this.changed.emit(date);\n    this._cdRef.markForCheck();\n  }\n\n  public changeMonth() {\n    this._generateDaysArray();\n    this.change();\n  }\n\n  public changeYear() {\n    this._generateDaysArray();\n    if (this.maxDate) {\n      this._generateMonthArray();\n    }\n    this.change();\n  }\n\n  private _generateDaysArray() {\n    this.maxDay = 0;\n    const maxDate = this.maxDate;\n    const maxDay = maxDate && maxDate.getDate();\n    const maxMonth = maxDate && maxDate.getMonth();\n    const maxYear = maxDate && maxDate.getFullYear();\n\n    if (this.month) {\n      if (maxDay && maxMonth == this.month.value && maxYear === this.year) {\n        this.maxDay = maxDay;\n      } else {\n        const daysInMonth = getDaysInMonth(new Date(this.year, this.month));\n        this.maxDay = daysInMonth;\n      }\n    }\n\n    if (!this.maxDay) {\n      this.maxDay = 31;\n    }\n  }\n\n  private _generateMonthArray() {\n    this.months = MONTHS;\n  }\n\n  private _generateYearsArray() {\n    let minYear = this.minYear;\n    let maxYear = this.maxYear;\n\n    if (!maxYear) {\n      const today = new Date();\n      maxYear = today.getFullYear();\n    }\n\n     for ( minYear; minYear <= maxYear; minYear++ ) {\n       this.years.push({ name: minYear, value: minYear });\n     }\n  }\n\n  private _pullToRefreshDisable(): void {\n    this._renderer.addClass(this._document.body, 'fs-date-picker-prevent-pull-to-refresh');\n  }\n\n  private _pullToRefreshDefault(): void {\n    this._renderer.removeClass(this._document.body, 'fs-date-picker-prevent-pull-to-refresh');\n  }\n\n}\n","<div class=\"scroll-pickers\">\n  <fs-scroll-picker\n    *ngIf=\"showMonth\"\n    class=\"month\"\n    [values]=\"months\"\n    name=\"month\"\n    [(ngModel)]=\"month\"\n    (ngModelChange)=\"changeMonth()\">\n  </fs-scroll-picker>\n\n  <fs-scroll-picker\n      *ngIf=\"showDay\"\n      class=\"day\"\n      [valuesMin]=\"1\"\n      [valuesMax]=\"maxDay\"\n      name=\"day\"\n      [(ngModel)]=\"day\"\n      (ngModelChange)=\"change()\">\n  </fs-scroll-picker>\n\n  <fs-scroll-picker\n      *ngIf=\"showYear\"\n      class=\"year\"\n      [values]=\"years\"\n      name=\"year\"\n      [(ngModel)]=\"year\"\n      (ngModelChange)=\"changeYear()\">\n  </fs-scroll-picker>\n</div>","import {\n  ChangeDetectionStrategy,\n  Component,\n} from '@angular/core';\n\nimport { FsDatePickerDialogRef } from '../../../../../dialog/classes/dialog-ref';\n\n\n@Component({\n  templateUrl: './date-scroll-picker-desktop.component.html',\n  styleUrls: ['./date-scroll-picker-desktop.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDateScrollPickerDesktopComponent {\n\n  private _date: Date | null;\n\n  constructor(\n    protected _dialogRef: FsDatePickerDialogRef,\n  ) {}\n\n  public get dialogRef(): FsDatePickerDialogRef {\n    return this._dialogRef;\n  }\n\n  public change(date: Date | null) {\n    this._date = date;\n  }\n\n  public close(save = false) {\n    if (save) {\n      this._dialogRef.updateValue(this._date);\n    }\n\n    this._dialogRef.close();\n  }\n\n}\n","<div class=\"fs-date-picker-dialog fs-date-picker-dialog-shadow fs-date-picker-range\" tabindex=\"0\">\n  <div class=\"wrap\">\n    <fs-date-scroll-picker [model]=\"dialogRef.pickerModel.model\"\n                           [minYear]=\"dialogRef.options.minYear\"\n                           [maxDate]=\"dialogRef.options.maxDate\"\n                           [maxYear]=\"dialogRef.options.maxYear\"\n                           [showDay]=\"dialogRef.options.showDay\"\n                           [showMonth]=\"dialogRef.options.showMonth\"\n                           [showYear]=\"dialogRef.options.showYear\"\n                           (changed)=\"change($event)\">\n    </fs-date-scroll-picker>\n\n    <div class=\"buttons\">\n      <button type=\"button\" mat-button color=\"primary\" (click)=\"close(true)\">Select</button>\n      <button type=\"button\" mat-button (click)=\"close(false)\">Cancel</button>\n    </div>\n  </div>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Inject,\n} from '@angular/core';\n\nimport { MAT_BOTTOM_SHEET_DATA, MatBottomSheetRef } from '@angular/material/bottom-sheet';\n\nimport { FsDatePickerDialogRef } from '../../../../../dialog/classes/dialog-ref';\n\n\n@Component({\n  templateUrl: './date-scroll-picker-mobile-dialog.component.html',\n  styleUrls: ['./date-scroll-picker-mobile-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDateScrollPickerMobileDialogComponent {\n\n  private _date: Date | null;\n\n  private readonly _dialogRef: FsDatePickerDialogRef;\n\n  constructor(\n    @Inject(MAT_BOTTOM_SHEET_DATA)\n    private _data: any,\n    private _bottomSheetRef: MatBottomSheetRef<any>,\n  ) {\n    this._dialogRef = _data.dateDialogRef;\n  }\n\n  public get dialogRef(): FsDatePickerDialogRef {\n    return this._dialogRef;\n  }\n\n  public change(date: Date | null) {\n    this._date = date;\n  }\n\n  public close(save = false) {\n    if (save) {\n      this._dialogRef.updateValue(this._date);\n    }\n\n    this._bottomSheetRef.dismiss();\n  }\n\n}\n","<div class=\"fs-date-picker-dialog fs-date-picker-range\" tabindex=\"0\">\n  <div class=\"wrap\">\n    <fs-date-scroll-picker [model]=\"dialogRef.pickerModel.model\"\n                           [minYear]=\"dialogRef.options.minYear\"\n                           [maxDate]=\"dialogRef.options.maxDate\"\n                           [maxYear]=\"dialogRef.options.maxYear\"\n                           [showDay]=\"dialogRef.options.showDay\"\n                           [showMonth]=\"dialogRef.options.showMonth\"\n                           [showYear]=\"dialogRef.options.showYear\"\n                           (changed)=\"change($event)\">\n    </fs-date-scroll-picker>\n\n    <mat-nav-list class=\"actions\">\n      <mat-list-item (click)=\"close(true)\">\n        <button mat-icon-button color=\"primary\">\n          Select\n        </button>\n      </mat-list-item>\n\n      <mat-list-item (click)=\"close(false)\">\n        <button mat-icon-button>\n          Cancel\n        </button>\n      </mat-list-item>\n    </mat-nav-list>\n  </div>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n} from '@angular/core';\n\n\n@Component({\n  selector: 'fs-date-picker-header-month-range',\n  templateUrl: './header-month-range.component.html',\n  styleUrls: [\n    './header-month-range.component.scss',\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDatePickerHeaderMonthRangeComponent {\n\n  @Input()\n  public calendarDate: Date;\n\n  @Input()\n  public nextCalendarDate: Date;\n\n  @Output()\n  public goNextMonth = new EventEmitter<void>();\n\n  @Output()\n  public goPrevMonth = new EventEmitter<void>();\n\n  public get calendarMonth(): number {\n    return this.calendarDate?.getMonth();\n  }\n\n  public get calendarYear(): number {\n    return this.calendarDate?.getFullYear();\n  }\n\n  public get calendarDay(): number {\n    return this.calendarDate?.getDate();\n  }\n\n  public nextMonth(): void {\n    this.goNextMonth.emit();\n  }\n\n  public prevMonth(): void {\n    this.goPrevMonth.emit();\n  }\n}\n","<div class=\"current-month-header month-year\">\n  <div class=\"actions\">\n    <a (click)=\"prevMonth()\">\n      <mat-icon>navigate_before</mat-icon>\n    </a>\n  </div>\n  <span class=\"month-name\">\n    {{ calendarDate | fsDateFormat: 'full-date-dayless' }}\n  </span>\n</div>\n\n\n\n<div class=\"next-month-header month-year\">\n  <span class=\"month-name\">\n    {{ nextCalendarDate | fsDateFormat: 'full-date-dayless' }}\n  </span>\n  <div class=\"actions\">\n    <a (click)=\"nextMonth()\">\n      <mat-icon>navigate_next</mat-icon>\n    </a>\n  </div>\n</div>\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { Observable } from 'rxjs';\nimport {\n  map,\n  shareReplay,\n} from 'rxjs/operators';\n\nimport { addMonths, isBefore } from 'date-fns';\n\nimport { FsDatePickerDialogModel } from '../../../../../dialog/classes/dialog-model';\nimport { FsDatePickerDialogRef } from '../../../../classes/dialog-ref';\n\n\n@Component({\n  selector: 'fs-datepicker-month-range-picker',\n  templateUrl: './month-range-picker.component.html',\n  styleUrls: ['./month-range-picker.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsMonthRangePickerComponent implements OnChanges {\n\n  @Input()\n  public dialogRef: FsDatePickerDialogRef;\n\n  @Input()\n  public datePickerModel: FsDatePickerDialogModel;\n\n  public leftCalendarDate$: Observable<Date>;\n  public rightCalendarDate$: Observable<Date>;\n\n  public modelFrom$: Observable<Date>;\n  public modelTo$: Observable<Date>;\n\n  constructor() {}\n\n  public ngOnChanges(changes: SimpleChanges): void {\n    if (\n      changes.datePickerModel?.currentValue\n      && changes.datePickerModel?.firstChange\n      && this.datePickerModel.view === 'monthrange'\n    ) {\n      this._initMonthRangeModels();\n    }\n  }\n\n  public viewModeChanged(mode: string) {\n    this.datePickerModel.setCalendarMode(mode);\n  }\n\n  public monthChanged(month: number) {\n    this.datePickerModel.setCalendarMonth(month);\n  }\n\n  public yearChanged(year: number) {\n    this.datePickerModel.setCalendarYear(year);\n  }\n\n  public nextMonth(): void {\n    this.datePickerModel.nextMonth();\n  }\n\n  public prevMonth(): void {\n    this.datePickerModel.prevMonth();\n  }\n\n  public dateChanged(date): void {\n    const rangeRef = this.datePickerModel.rangePickerRef;\n    const { startDate, endDate } = rangeRef;\n\n    if (!startDate && !endDate) {\n      rangeRef.updateStartDate(date);\n    } else if (startDate && !endDate) {\n      if (isBefore(date, startDate)) {\n        rangeRef.updateStartDate(date);\n        rangeRef.updateEndDate(null);\n      } else {\n        rangeRef.updateEndDate(date);\n      }\n    } else if (startDate && endDate) {\n      rangeRef.updateStartDate(date);\n      rangeRef.updateEndDate(null);\n    }\n  }\n\n  public periodChanged(date): void {\n    this.datePickerModel.period = date;\n\n    this.close();\n  }\n\n  public setDateMode(mode) {\n    this.datePickerModel.dateMode = mode;\n  }\n\n  public close(): void {\n    this.dialogRef.close();\n  }\n\n  private _initMonthRangeModels(): void {\n    this.leftCalendarDate$ = this.datePickerModel.calendarDate$;\n    this.rightCalendarDate$ = this.datePickerModel.calendarDate$\n      .pipe(\n        map((value) => value && addMonths(value, 1) || null),\n      );\n\n    this.modelFrom$ = this.datePickerModel\n      .rangePickerRef\n      .startDate$\n      .pipe(\n        shareReplay(),\n      );\n\n    this.modelTo$ = this.datePickerModel\n      .rangePickerRef\n      .endDate$\n      .pipe(\n        shareReplay(),\n      );\n  }\n}\n","<div class=\"calendar-container\">\n  <div class=\"date-time\">\n    <div class=\"calendar-view\">\n      <fs-date-picker-header-month-range\n        [calendarDate]=\"leftCalendarDate$ | async\"\n        [nextCalendarDate]=\"rightCalendarDate$ | async\"\n        (goNextMonth)=\"nextMonth()\"\n        (goPrevMonth)=\"prevMonth()\"\n      >\n      </fs-date-picker-header-month-range>\n\n      <div class=\"month-range-container\">\n        <fs-date-picker-calendar\n          [rangeFrom]=\"modelFrom$ | async\"\n          [rangeTo]=\"modelTo$ | async\"\n          [drawMonth]=\"leftCalendarDate$ | async\"\n          [dateMode]=\"datePickerModel.calendarMode$ | async\"\n          [highlightStartDate]=\"modelFrom$ | async\"\n          [highlightEndDate]=\"modelTo$ | async\"\n          [disabledDays]=\"datePickerModel.disabledDays$ | async\"\n          [hideExtraDays]=\"true\"\n          (change)=\"dateChanged($event)\">\n        </fs-date-picker-calendar>\n\n        <fs-date-picker-calendar\n          [rangeFrom]=\"modelFrom$ | async\"\n          [rangeTo]=\"modelTo$ | async\"\n          [highlightStartDate]=\"modelFrom$ | async\"\n          [highlightEndDate]=\"modelTo$ | async\"\n          [drawMonth]=\"rightCalendarDate$ | async\"\n          [dateMode]=\"datePickerModel.calendarMode$ | async\"\n          [disabledDays]=\"datePickerModel.disabledDays$ | async\"\n          [hideExtraDays]=\"true\"\n          (change)=\"dateChanged($event)\">\n        </fs-date-picker-calendar>\n      </div>\n    </div>\n\n    <ng-container\n      *ngIf=\"datePickerModel.dateMode !== 'year' && datePickerModel.dateMode !== 'month'\">\n      <fs-date-picker-time\n        *ngIf=\"datePickerModel.view === 'datetime' || datePickerModel.view === 'time'\"\n        [date]=\"datePickerModel.model$ | async\"\n        [minutes]=\"datePickerModel.minutes\"\n        [disabledTimes]=\"datePickerModel.disabledTimes$ | async\"\n        (onChange)=\"dateChanged($event)\"\n      ></fs-date-picker-time>\n    </ng-container>\n  </div>\n\n  <div class=\"buttons\">\n    <button class=\"button-done\" type=\"button\" mat-button color=\"primary\" (click)=\"close()\">Done</button>\n  </div>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  AfterViewInit,\n  OnChanges,\n  SimpleChanges,\n  Output,\n  EventEmitter,\n  ElementRef,\n} from '@angular/core';\n\nimport { endOfYear, startOfYear } from 'date-fns';\n\nimport { isRangeDisabled } from '../../../../../common/helpers/is-range-disabled';\nimport { MONTHS } from '../../../../../calendar/consts/months';\nimport { isMonthDisabled } from '../../../../../common/helpers/is-month-disabled';\n\n\ninterface IYearListItem {\n  value: number;\n  disabled: boolean;\n}\n\ninterface IMonthListItem {\n  value: number;\n  name: string;\n  abr: string;\n  disabled: boolean;\n}\n\n\n@Component({\n  selector: 'fs-date-picker-header',\n  templateUrl: './header.component.html',\n  styleUrls: [\n    './header.component.scss',\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDatePickerHeaderComponent implements OnChanges, AfterViewInit {\n\n  @Input()\n  public viewMode: string;\n\n  @Input()\n  public minYear: number;\n\n  @Input()\n  public maxYear: number;\n\n  @Input()\n  public disabledDays: [Date, Date][];\n\n  @Input()\n  public calendarDate: Date;\n\n  @Output()\n  public monthChange = new EventEmitter<number>();\n\n  @Output()\n  public yearChange = new EventEmitter<number>();\n\n  @Output()\n  public goNextMonth = new EventEmitter<void>();\n\n  @Output()\n  public goPrevMonth = new EventEmitter<void>();\n\n  @Output()\n  public viewModeChange = new EventEmitter<string>();\n\n  public readonly now = new Date();\n  public readonly monthNow = this.now.getMonth();\n  public readonly yearNow = this.now.getFullYear();\n\n  public yearsList: IYearListItem[] = [];\n  public monthList: IMonthListItem[] = [];\n\n  constructor(\n    private _elRef: ElementRef,\n  ) {}\n\n  public get calendarMonth(): number {\n    return this.calendarDate?.getMonth();\n  }\n\n  public get calendarYear(): number {\n    return this.calendarDate?.getFullYear();\n  }\n\n  public get calendarDay(): number {\n    return this.calendarDate?.getDate();\n  }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n  }\n\n  public ngAfterViewInit(): void {\n    this._createMonthsList();\n    this._createYearsList();\n  }\n\n  public selectMonth(month: number): void {\n    this.monthChange.emit(month);\n\n    this.setViewMode('date');\n  }\n\n  public selectYear(year: number): void {\n    this.yearChange.emit(year);\n\n    this.setViewMode('date');\n  }\n\n  public setViewMode(mode: string): void {\n    this.viewModeChange.emit(mode);\n\n    this._scrollToSelectedYear();\n    this._scrollToSelectedMonth();\n  }\n\n  public nextMonth(): void {\n    this.goNextMonth.emit();\n  }\n\n  public prevMonth(): void {\n    this.goPrevMonth.emit();\n  }\n\n  private _createYearsList(): void {\n    this.yearsList = [];\n\n    for (let y: number = this.minYear; y < this.maxYear; y++) {\n      const year = new Date().setFullYear(y);\n      this.yearsList.push({ value: y, disabled: this._isYearDisabled(year) });\n    }\n  }\n\n  private _createMonthsList(): void {\n    const year = this.calendarMonth ? this.calendarYear : this.now.getFullYear();\n\n    const checkIfMonthDisabled = (monthNumber: number, disabledDays) => {\n      const month = new Date();\n      month.setFullYear(year);\n      month.setMonth(monthNumber);\n\n      return isMonthDisabled(month, disabledDays)\n    }\n\n    this.monthList = [];\n\n    for (const item of MONTHS) {\n      const monthItem = {\n        ...item,\n        disabled: checkIfMonthDisabled(item.value, this.disabledDays),\n      }\n\n      this.monthList.push(monthItem);\n    }\n  }\n\n  private _isYearDisabled(date): boolean {\n    const startYear = startOfYear(date);\n    const endYear = endOfYear(date);\n\n    return isRangeDisabled(this.disabledDays, startYear, endYear);\n  }\n\n  private _scrollToSelectedYear(): void {\n    setTimeout(() => {\n      const years = this._elRef.nativeElement.querySelector('.years');\n      const selected = years.querySelector('.year.selected');\n\n      if (selected) {\n        selected.scrollIntoView({behavior: 'auto', block: 'center'});\n      }\n    });\n  }\n\n  private _scrollToSelectedMonth(): void {\n    setTimeout(() => {\n      const years = this._elRef.nativeElement.querySelector('.months');\n      const selected = years.querySelector('.month.selected');\n\n      if (selected) {\n        selected.scrollIntoView({behavior: 'auto', block: 'center'});\n      }\n    });\n  }\n\n}\n","<div class=\"months-years\" *ngIf=\"viewMode == 'month' || viewMode == 'year'\">\n  <div class=\"months\">\n    <div\n      *ngFor=\"let month of monthList\"\n      (click)=\"selectMonth(month.value)\"\n      class=\"month\"\n      [ngClass]=\"{\n          now: monthNow == month.value,\n          selected: calendarMonth === month.value,\n          disabled: month.disabled\n        }\">\n      <div class=\"tile-content\">{{ month.abr }}</div>\n    </div>\n  </div>\n\n  <div class=\"years\">\n    <ng-container *ngFor=\"let year of yearsList;\">\n      <div\n        class=\"year data-year-{{ year.value }}\"\n        (click)=\"selectYear(year.value)\"\n        [class.now]=\"yearNow == year.value\"\n        [class.selected]=\"calendarYear === year.value\"\n        [class.disabled]=\"year.disabled\">\n        <div class=\"tile-content\">{{ year.value }}</div>\n      </div>\n    </ng-container>\n    <div class=\"clear\"></div>\n  </div>\n</div>\n\n<div *ngIf=\"viewMode == 'week' || viewMode == 'date' || viewMode == 'datetime' || viewMode == 'monthrange'\" class=\"calendar\">\n  <div class=\"month-year\">\n    <a class=\"month-year-name\" (click)=\"setViewMode('month')\">\n      {{ calendarDate | fsDateFormat: 'full-date-dayless-yearless' }}\n\n      <span *ngIf=\"calendarDay\" class=\"day-name\">\n        {{ calendarDay }},\n      </span>\n\n      {{ calendarYear }}\n      <mat-icon class=\"action\">arrow_drop_down</mat-icon>\n    </a>\n\n    <div class=\"gap\"></div>\n\n    <div class=\"action\">\n      <a (click)=\"prevMonth()\" class=\"action\">\n        <mat-icon>navigate_before</mat-icon>\n      </a>\n      <a (click)=\"nextMonth()\" class=\"action\">\n        <mat-icon>navigate_next</mat-icon>\n      </a>\n    </div>\n  </div>\n\n</div>\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\n\nimport { FsDatePickerDialogModel } from '../../../../../dialog/classes/dialog-model';\n\nimport { FsDatePickerDialogRef } from '../../../../classes/dialog-ref';\n\n\n@Component({\n  selector: 'fs-datepicker-desktop-datepicker',\n  templateUrl: './date-picker.component.html',\n  styleUrls: ['./date-picker.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDesktopDatePickerComponent {\n\n  @Input()\n  public dialogRef: FsDatePickerDialogRef;\n\n  @Input()\n  public datePickerModel: FsDatePickerDialogModel;\n\n  public timePickerExpanded = false;\n\n  constructor() {}\n\n  public viewModeChanged(mode: string) {\n    this.datePickerModel.setCalendarMode(mode);\n  }\n\n  public monthChanged(month: number) {\n    this.datePickerModel.setCalendarMonth(month);\n  }\n\n  public yearChanged(year: number) {\n    this.datePickerModel.setCalendarYear(year);\n  }\n\n  public nextMonth(): void {\n    this.datePickerModel.nextMonth();\n  }\n\n  public prevMonth(): void {\n    this.datePickerModel.prevMonth();\n  }\n\n  public dateChanged(date): void {\n    this.datePickerModel.model = date;\n\n    if (!this.datePickerModel.isDateTimeView && !this.datePickerModel.isTimeView) {\n      this.close();\n    }\n  }\n\n  public periodChanged(date): void {\n    this.datePickerModel.period = date;\n\n    this.close();\n  }\n\n  public toggleTimeExpand() {\n    this.timePickerExpanded = !this.timePickerExpanded;\n  }\n\n  public setDateMode(mode) {\n    this.datePickerModel.dateMode = mode;\n  }\n\n  public close(): void {\n    this.dialogRef.close();\n  }\n}\n","<div class=\"calendar-container\">\n  <div class=\"date-time\">\n    <div class=\"calendar-view\">\n      <fs-date-picker-header\n        [calendarDate]=\"datePickerModel.calendarDate$ | async\"\n        [minYear]=\"datePickerModel.minYear\"\n        [maxYear]=\"datePickerModel.maxYear\"\n        [viewMode]=\"datePickerModel.calendarMode$ | async\"\n        [disabledDays]=\"datePickerModel.disabledDays$ | async\"\n        (viewModeChange)=\"viewModeChanged($event)\"\n        (monthChange)=\"monthChanged($event)\"\n        (yearChange)=\"yearChanged($event)\"\n        (goNextMonth)=\"nextMonth()\"\n        (goPrevMonth)=\"prevMonth()\"\n      >\n      </fs-date-picker-header>\n\n      <ng-container *ngIf=\"dialogRef.components.calendarStart\">\n        <fs-date-picker-calendar\n          [date]=\"datePickerModel.model$ | async\"\n          [drawMonth]=\"datePickerModel.calendarDate$ | async\"\n          [dateMode]=\"datePickerModel.calendarMode$ | async\"\n          [disabledDays]=\"datePickerModel.disabledDays$ | async\"\n          [period]=\"datePickerModel.period\"\n          [seedDate]=\"datePickerModel.seedDate\"\n          [periodWeeks]=\"datePickerModel.periodWeeks\"\n          (change)=\"dateChanged($event)\"\n          (periodChange)=\"periodChanged($event)\">\n        </fs-date-picker-calendar>\n      </ng-container>\n    </div>\n\n    <ng-container\n      *ngIf=\"datePickerModel.dateMode !== 'year' && datePickerModel.dateMode !== 'month'\">\n      <fs-date-picker-time\n        *ngIf=\"datePickerModel.view === 'datetime' || datePickerModel.view === 'time'\"\n        [date]=\"datePickerModel.model$ | async\"\n        [minutes]=\"datePickerModel.minutes\"\n        [disabledTimes]=\"datePickerModel.disabledTimes$ | async\"\n        [expanded]=\"timePickerExpanded\"\n        (onChange)=\"dateChanged($event)\"\n      ></fs-date-picker-time>\n    </ng-container>\n  </div>\n\n  <div class=\"buttons\">\n    <button class=\"button-done\" type=\"button\" mat-button color=\"primary\" (click)=\"close()\">Done</button>\n    <button type=\"button\"\n            mat-button\n            class=\"button-more\"\n            *ngIf=\"datePickerModel.minutes\n                   && (datePickerModel.view === 'datetime' || datePickerModel.view === 'time')\n                   && !(datePickerModel.view === 'datetime' && datePickerModel.dateMode === 'date')\"\n            (click)=\"toggleTimeExpand()\">\n      <ng-container *ngIf=\"!timePickerExpanded; else lessMinutes\">\n        More Minutes\n      </ng-container>\n      <ng-template #lessMinutes>\n        Less Minutes\n      </ng-template>\n    </button>\n  </div>\n</div>\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { FsDatePickerDialogModel } from '../../../../../dialog/classes/dialog-model';\n\nimport { FsDatePickerDialogRef } from '../../../../classes/dialog-ref';\n\n\n@Component({\n  templateUrl: './desktop-dialog.component.html',\n  styleUrls: ['./desktop-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDesktopCalendarDialogComponent {\n\n  constructor(\n    protected _dialogRef: FsDatePickerDialogRef,\n  ) {}\n\n  public get datePickerModel(): FsDatePickerDialogModel {\n    return this._dialogRef.pickerModel;\n  }\n\n  public get dialogRef(): FsDatePickerDialogRef {\n    return this._dialogRef;\n  }\n\n}\n","<div\n  class=\"fs-date-picker-dialog fs-date-picker-dialog-shadow opened {{ 'dialog-view-' + datePickerModel.view }}\"\n  tabindex=\"0\"\n  [ngClass]=\"{\n      'has-view-date': datePickerModel.view === 'date' || datePickerModel.view === 'datetime',\n      'has-view-time': datePickerModel.view === 'time' || datePickerModel.view === 'datetime',\n      'date-mode-date-time': (datePickerModel.calendarMode$ | async) === 'datetime',\n      'date-mode-date': (datePickerModel.calendarMode$ | async) === 'date',\n      'date-mode-time': (datePickerModel.calendarMode$ | async) === 'time',\n      'date-mode-month': (datePickerModel.calendarMode$ | async) === 'month',\n      'date-mode-year': (datePickerModel.calendarMode$ | async) === 'year',\n      'date-mode-week': (datePickerModel.calendarMode$ | async) === 'week'\n    }\">\n\n  <ng-container *ngIf=\"datePickerModel.view === 'monthrange' else defaultPicker\">\n    <fs-datepicker-month-range-picker [dialogRef]=\"dialogRef\" [datePickerModel]=\"datePickerModel\">\n    </fs-datepicker-month-range-picker>\n  </ng-container>\n\n  <ng-template #defaultPicker>\n    <fs-datepicker-desktop-datepicker [dialogRef]=\"dialogRef\" [datePickerModel]=\"datePickerModel\">\n    </fs-datepicker-desktop-datepicker>\n  </ng-template>\n</div>\n","import { ElementRef, Injectable, Injector, Inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\nimport { BreakpointObserver } from '@angular/cdk/layout';\nimport { ComponentPortal, PortalInjector } from '@angular/cdk/portal';\nimport {\n  Overlay,\n  OverlayRef,\n  OverlayConfig,\n  PositionStrategy,\n  FlexibleConnectedPositionStrategy,\n} from '@angular/cdk/overlay';\n\nimport { MatBottomSheet, MatBottomSheetRef } from '@angular/material/bottom-sheet';\n\nimport { fromEvent, Observable } from 'rxjs';\nimport {\n  debounceTime,\n  takeUntil,\n  take,\n  tap,\n  map,\n  switchMap,\n  skip,\n  distinctUntilChanged,\n  filter,\n  finalize,\n} from 'rxjs/operators';\n\nimport { FsMobileCalendarDialogComponent } from '../../dialog/modules/mobile-dialog-container/components/mobile-dialog/mobile-dialog.component';\nimport { FsDateScrollPickerDesktopComponent } from '../../dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker-desktop/date-scroll-picker-desktop.component';\nimport { FsDateScrollPickerMobileDialogComponent } from '../../dialog/modules/scroll-picker-dialog-container/components/date-scroll-picker-mobile-dialog/date-scroll-picker-mobile-dialog.component';\nimport { FsDesktopCalendarDialogComponent } from '../../dialog/modules/desktop-dialog-container/components/desktop-dialog/desktop-dialog.component';\n\nimport { FsDatePickerDialogRef } from '../classes/dialog-ref';\nimport { IDialogFactoryOptions } from '../interfaces/dialog-factory-data.interface';\n\nconst MOBILE_BREAKPOINT = '(max-width: 737px)';\n\n\n@Injectable()\nexport class FsDatePickerDialogFactory {\n\n  private _targetElRef: ElementRef;\n  private _resolutionChanged = false;\n\n  constructor(\n    private _overlay: Overlay,\n    private _breakpointObserver: BreakpointObserver,\n    private _bottomSheet: MatBottomSheet,\n    @Inject(DOCUMENT)\n    private _document,\n  ) {}\n\n  private get _ESCKeyPressed$(): Observable<any> {\n    return fromEvent(this._document, 'keydown')\n      .pipe(\n        filter((event: any) => {\n          return event.code === 'Escape';\n        })\n      )\n  }\n\n\n  public openDatePicker(\n    el: ElementRef,\n    injector: Injector,\n    options: IDialogFactoryOptions,\n  ): FsDatePickerDialogRef {\n    this._targetElRef = el;\n\n    const dateDialogRef = new FsDatePickerDialogRef(options);\n\n    this._openDatePicker(injector, 'date', dateDialogRef);\n\n    return dateDialogRef;\n  }\n\n  public openDateScrollPicker(\n    el: ElementRef,\n    injector: Injector,\n    options: IDialogFactoryOptions,\n  ): FsDatePickerDialogRef {\n    this._targetElRef = el;\n\n    const dateDialogRef = new FsDatePickerDialogRef(options);\n\n    this._openDatePicker(injector, 'scroll', dateDialogRef);\n\n    return dateDialogRef;\n  }\n\n  private _openDatePicker(\n    injector: Injector,\n    type: 'date' | 'scroll',\n    dialogRef: FsDatePickerDialogRef,\n  ): void {\n    const layoutChanges = this._breakpointObserver\n      .observe([\n        MOBILE_BREAKPOINT,\n      ])\n      .pipe(\n        map((result) => {\n          return result.breakpoints[MOBILE_BREAKPOINT];\n        }),\n      );\n\n    layoutChanges\n      .pipe(\n        map((mobile) => {\n          return this._openDatePickerComponent(\n            mobile,\n            injector,\n            type,\n            dialogRef,\n          );\n        }),\n        tap((ref) => {\n          dialogRef.pickerOverlayRef.setActiveOverlay(ref);\n        }),\n        take(1),\n        switchMap(() => {\n          return layoutChanges\n            .pipe(\n              skip(1),\n            )\n        }),\n        debounceTime(100),\n        distinctUntilChanged(),\n        tap(() => {\n          this._resolutionChanged = true;\n        }),\n        tap(() => {\n          dialogRef.pickerOverlayRef.close();\n        }),\n        map((mobile) => {\n          return this._openDatePickerComponent(\n            mobile,\n            injector,\n            type,\n            dialogRef,\n          );\n        }),\n        tap((ref) => {\n          dialogRef.pickerOverlayRef.setActiveOverlay(ref);\n        }),\n        tap(() => {\n          this._resolutionChanged = false;\n        }),\n        finalize(() => {\n          dialogRef.close();\n        }),\n        takeUntil(\n          dialogRef.pickerOverlayRef.destroy$\n            .pipe(\n              filter(() => !this._resolutionChanged),\n            ),\n        ),\n        takeUntil(dialogRef.close$),\n        takeUntil(this._ESCKeyPressed$),\n      )\n      .subscribe();\n  }\n\n  private _openDatePickerComponent(\n    mobile: boolean,\n    injector: Injector,\n    type: 'date' | 'scroll',\n    dialogRef: FsDatePickerDialogRef,\n  ): OverlayRef | MatBottomSheetRef {\n    if (mobile) {\n      if (type === 'date') {\n        return this._openDatePickerMobile(dialogRef);\n      } else {\n        return this._openDateScrollPickerMobile(dialogRef);\n      }\n    } else {\n      if (type === 'date') {\n        return this._openDatePickerDesktop(injector, dialogRef);\n      } else {\n        return this._openDateScrollPickerDesktop(injector, dialogRef);\n      }\n    }\n  }\n\n  private _createOverlay(el: ElementRef, config: OverlayConfig = {}) {\n    config = {\n      ...config,\n      positionStrategy: this._createPopupPositionStrategy(el),\n      scrollStrategy: this._overlay.scrollStrategies.reposition(),\n      hasBackdrop: true,\n      backdropClass: [],\n      panelClass: 'fs-datepicker-overlay-pane',\n    };\n\n    const overlayConfig = new OverlayConfig(config);\n\n    return this._overlay.create(overlayConfig);\n  }\n\n  private _createInjector(\n    parentInjector: Injector,\n    previewRef: FsDatePickerDialogRef,\n  ): PortalInjector {\n    const injectionTokens = new WeakMap<any, any>([\n      [FsDatePickerDialogRef, previewRef],\n    ]);\n\n    return new PortalInjector(parentInjector, injectionTokens);\n  }\n\n  private _createPopupPositionStrategy(el: ElementRef): PositionStrategy {\n    return this._createBasePopupPositionStrategy(el)\n      .withPositions([\n        {\n          originX: 'start',\n          originY: 'bottom',\n          overlayX: 'start',\n          overlayY: 'top',\n          offsetY: 10,\n          offsetX: -29\n        },\n        {\n          originX: 'end',\n          originY: 'top',\n          overlayX: 'start',\n          overlayY: 'bottom',\n        },\n        {\n          originX: 'end',\n          originY: 'top',\n          overlayX: 'start',\n          overlayY: 'center',\n        },\n        {\n          originX: 'end',\n          originY: 'bottom',\n          overlayX: 'start',\n          overlayY: 'bottom',\n        },\n        {\n          originX: 'start',\n          originY: 'bottom',\n          overlayX: 'end',\n          overlayY: 'top',\n          offsetX: -29,\n        },\n        {\n          originX: 'start',\n          originY: 'bottom',\n          overlayX: 'end',\n          overlayY: 'center',\n          offsetX: -29,\n        },\n      ]);\n  }\n\n  private _createBasePopupPositionStrategy(el: ElementRef): FlexibleConnectedPositionStrategy {\n    return this._overlay.position()\n      .flexibleConnectedTo(el)\n      .withGrowAfterOpen(false)\n      .withFlexibleDimensions(false)\n      .withPush(false)\n  }\n\n  private _openDatePickerDesktop (\n    parentInjector: Injector,\n    previewRef: FsDatePickerDialogRef,\n  ): OverlayRef {\n    const overlayRef = this._createOverlay(\n      this._targetElRef,\n      {\n        positionStrategy: this._createBasePopupPositionStrategy(this._targetElRef),\n      }\n    );\n    const injector = this._createInjector(parentInjector, previewRef);\n    const containerPortal = new ComponentPortal(FsDesktopCalendarDialogComponent, undefined, injector);\n    overlayRef.attach(containerPortal);\n\n    return overlayRef;\n  }\n\n\n  private _openDatePickerMobile(dialogRef: FsDatePickerDialogRef): MatBottomSheetRef {\n    return this._bottomSheet.open(FsMobileCalendarDialogComponent, {\n      data: {\n        dateDialogRef: dialogRef,\n      },\n      restoreFocus: false,\n    });\n  }\n\n  private _openDateScrollPickerDesktop (\n    parentInjector: Injector,\n    previewRef: FsDatePickerDialogRef,\n  ): OverlayRef {\n    const overlayRef = this._createOverlay(\n      this._targetElRef,\n      { scrollStrategy: this._overlay.scrollStrategies.block() }\n    );\n    const injector = this._createInjector(parentInjector, previewRef);\n    const containerPortal = new ComponentPortal(FsDateScrollPickerDesktopComponent, undefined, injector);\n    overlayRef.attach(containerPortal);\n\n    return overlayRef;\n  }\n\n\n  private _openDateScrollPickerMobile(dialogRef: FsDatePickerDialogRef): MatBottomSheetRef {\n    return this._bottomSheet.open(FsDateScrollPickerMobileDialogComponent, {\n      data: {\n        dateDialogRef: dialogRef,\n      }\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\n\nimport { FsDateModule } from '@firestitch/date';\n\nimport { FsDatePickerCalendarModule } from '../../../calendar/calendar.module';\n\nimport { FsDesktopCalendarDialogComponent } from './components/desktop-dialog/desktop-dialog.component';\nimport { FsDatePickerHeaderComponent } from './components/header/header.component';\nimport { FsDesktopDatePickerComponent } from './components/date-picker/date-picker.component';\nimport { FsMonthRangePickerComponent } from './components/month-range-picker/month-range-picker.component';\nimport { FsDatePickerHeaderMonthRangeComponent } from './components/header-month-range/header-month-range.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n\n    FsDatePickerCalendarModule,\n    FsDateModule,\n    ScrollingModule,\n  ],\n  declarations: [\n    FsDesktopCalendarDialogComponent,\n    FsDatePickerHeaderComponent,\n    FsDesktopDatePickerComponent,\n    FsMonthRangePickerComponent,\n    FsDatePickerHeaderMonthRangeComponent,\n  ],\n  exports: [\n    FsDesktopCalendarDialogComponent,\n  ],\n})\nexport class FsDatePickerDesktopDialogContainerModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { FsScrollPickerModule } from '@firestitch/scroll-picker';\n\nimport { FsDateScrollPickerMobileDialogComponent } from './components/date-scroll-picker-mobile-dialog/date-scroll-picker-mobile-dialog.component';\nimport { FsDateScrollPickerDesktopComponent } from './components/date-scroll-picker-desktop/date-scroll-picker-desktop.component';\nimport { FsDateScrollPickerDialogComponent } from './components/date-scroll-picker/date-scroll-picker.component';\nimport { MatListModule } from '@angular/material/list';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n\n    MatButtonModule,\n\n    FsScrollPickerModule,\n    MatListModule,\n  ],\n  declarations: [\n    FsDateScrollPickerDesktopComponent,\n    FsDateScrollPickerMobileDialogComponent,\n    FsDateScrollPickerDialogComponent,\n  ],\n  exports: [\n    FsDateScrollPickerDesktopComponent,\n    FsDateScrollPickerMobileDialogComponent,\n  ],\n})\nexport class FsDatePickerScrollPickerDialogContainerModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\n\nimport { ScrollingModule } from '@angular/cdk/scrolling';\n\nimport { FsDateModule } from '@firestitch/date';\n\nimport { FsDatePickerCalendarModule } from '../../../calendar/calendar.module';\n\nimport { FsMobileCalendarDialogComponent } from './components/mobile-dialog/mobile-dialog.component';\nimport { FsDatePickerMobileHeaderComponent } from './components/header/header.component';\nimport { FsMobileTimePickerComponent } from './components/time-picker/time-picker.component';\nimport { FDatePickerMobileDatetimePickerComponent } from './components/date-time-picker/date-time-picker.component';\nimport { FsDatePickerMobileHeaderMonthRangeComponent } from './components/header-month-range/header-month-range.component';\nimport { FsDatePickerVirtualScrollCalendarComponent } from './components/virtual-scroll-calendar/virtual-scroll-calendar.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatTabsModule,\n    MatButtonModule,\n    MatIconModule,\n\n    FsDatePickerCalendarModule,\n    FsDateModule,\n    ScrollingModule,\n    MatListModule,\n  ],\n  declarations: [\n    FsMobileCalendarDialogComponent,\n    FsDatePickerMobileHeaderComponent,\n    FsMobileTimePickerComponent,\n    FDatePickerMobileDatetimePickerComponent,\n    FsDatePickerMobileHeaderMonthRangeComponent,\n    FsDatePickerVirtualScrollCalendarComponent,\n  ],\n  exports: [\n    FsMobileCalendarDialogComponent,\n  ],\n})\nexport class FsDatePickerMobileDialogContainerModule {}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\n\nimport { FsDatePickerDialogFactory } from './services/dialog-factory.service';\nimport { FsDatePickerDesktopDialogContainerModule } from './modules/desktop-dialog-container/desktop-dialog-container.module';\nimport { FsDatePickerScrollPickerDialogContainerModule } from './modules/scroll-picker-dialog-container/scroll-picker-dialog-container.module';\nimport { FsDatePickerMobileDialogContainerModule } from './modules/mobile-dialog-container/mobile-dialog-container.module';\n\n\n@NgModule({\n  imports: [\n    FsDatePickerDesktopDialogContainerModule,\n    FsDatePickerScrollPickerDialogContainerModule,\n    FsDatePickerMobileDialogContainerModule,\n  ],\n})\nexport class FsDatePickerDialogModule {\n  static forRoot(): ModuleWithProviders<FsDatePickerDialogModule> {\n    return {\n      ngModule: FsDatePickerDialogModule,\n      providers: [\n        FsDatePickerDialogFactory,\n      ]\n    };\n  }\n}\n","import * as parseMessyDate from 'parse-messy-time';\nimport { isValid } from 'date-fns';\n\nexport function parseDate(value: string): Date | null {\n  let parsedDate = new Date(Date.parse(value));\n\n  if (isValid(parsedDate)) {\n    return parsedDate;\n  }\n\n  parsedDate = parseMessyDate(value);\n\n  if (isValid(parsedDate)) {\n    return parsedDate;\n  }\n\n  return null;\n}\n","import { Renderer2, HostListener, ElementRef, EventEmitter, Output, OnDestroy, HostBinding, Input, ChangeDetectorRef, Directive, OnInit } from '@angular/core';\n\nimport { fromEvent, Subject } from 'rxjs';\nimport { filter, take, takeUntil, tap } from 'rxjs/operators';\n\nimport { FsDatePickerDialogRef } from '../../libs/dialog/classes/dialog-ref';\n\nimport {\n  AbstractControl,\n  ControlValueAccessor,\n  ValidationErrors,\n  Validator,\n  ValidatorFn,\n  Validators\n} from '@angular/forms';\n\nimport { isEqual, isValid } from 'date-fns';\nimport { zonedTimeToUtc } from 'date-fns-tz';\n\nimport { parseDate } from '../helpers/parse-date';\n\n\n@Directive()\nexport abstract class FsDatePickerBaseComponent<D = any>\n  implements Validator, ControlValueAccessor, OnDestroy, OnInit {\n\n  abstract updateInput(value: Date): void;\n\n  @Input() public ngModelOptions: {\n    name?: string;\n    standalone?: boolean;\n    updateOn?: 'change' | 'blur' | 'submit';\n  };\n\n  @Input()\n  public set clear(value: boolean) {\n    this._clear = value;\n  }\n\n  @Input()\n  public set timezone(value: string) {\n    this._timezone = value;\n\n    this.writeValue(this._originValue);\n  }\n\n  @Output('change')\n  public change$ = new EventEmitter<Date>();\n\n  @Output('selected')\n  public selected$ = new EventEmitter<Date>();\n\n  @Output('blured')\n  public blured$ = new EventEmitter<Date>();\n\n  @HostBinding('class.fs-input-disabled')\n  @HostBinding('attr.readonly')\n  public disabled = false;\n\n  @Input('readonly')\n  public set readonlyState(isReadonly: string) {\n    this.readonly = !!isReadonly || isReadonly === '';\n  }\n\n  @HostBinding('class.fs-input-readonly')\n  @HostBinding('attr.readonly')\n  public readonly = false;\n\n  public opened = false;\n  public registerOnChange(fn: (value: any) => any): void { this._onChange = fn }\n  public registerOnTouched(fn: () => any): void { this._onTouch = fn }\n  public registerOnValidatorChange(fn: () => void): void { this._validatorOnChange = fn; }\n\n  protected _timezone: string;\n  protected _originValue: Date | null; // before timezone\n  protected _value;\n  protected dialog = null;\n  protected elementRef: ElementRef;\n  protected renderer;\n  protected _dateDialogRef: FsDatePickerDialogRef;\n  protected _destroy$ = new Subject();\n\n  private _onChange = (value: any) => { };\n  private _onTouch = () => { };\n  private _validatorOnChange = () => {};\n  private _clear = true;\n  private _lastValueValid = false;\n\n  protected constructor(\n    renderer: Renderer2,\n    elementRef: ElementRef,\n    protected _cdRef: ChangeDetectorRef\n  ) {\n    this.renderer = renderer;\n    this.elementRef = elementRef;\n  }\n\n  public ngOnInit(): void {\n    fromEvent(this.el, 'focus')\n    .pipe(\n      takeUntil(this._destroy$),\n    )\n    .subscribe(() => {\n      this.open();\n      this.el.focus();\n    });\n\n    fromEvent(this.el, 'keydown')\n      .pipe(\n        tap(() => this.close()),\n        filter((event: KeyboardEvent) => ['Tab', 'Enter', 'Escape'].includes(event.key)),\n        takeUntil(this._destroy$),\n      )\n      .subscribe((event: KeyboardEvent) => {\n        if (event.key === 'Enter') {\n          this.inputChange(this.el.value);\n        }\n\n        this.close();\n        this.el.blur();\n      });\n  }\n\n  public get el() {\n    return this.elementRef.nativeElement;\n  }\n\n  public get clear(): boolean {\n    return this._clear;\n  }\n\n  public get value() {\n    return this._value;\n  }\n\n  public get timezone(): string {\n    return this._timezone;\n  }\n\n  public set value(value) {\n    if (value && this.timezone) {\n      value = zonedTimeToUtc(value, this.timezone);\n    }\n\n    this._value = value;\n\n    this._lastValueValid = !value || isValid(value);\n\n    this._onChange(this.value);\n    this.updateInput(this.value);\n\n    this.change$.emit(this.value);\n  }\n\n  public writeValue(obj: any): void {}\n\n  public get dateDialogRef() {\n    return this._dateDialogRef;\n  }\n\n  public cleared(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    this.value = null;\n    this.clearInput();\n    this.selected$.next(null);\n  }\n\n  public ngOnDestroy() {\n    if (this.dateDialogRef) {\n      this.dateDialogRef.close();\n    }\n\n    this._destroy$.next();\n    this._destroy$.complete();\n  }\n\n  public setDisabledState(isDisabled: boolean) {\n    this.disabled = isDisabled;\n\n    this._cdRef.markForCheck();\n  }\n\n  public validate(c: AbstractControl): ValidationErrors | null {\n    return this._validator ? this._validator(c) : null;\n  }\n\n  public open() {\n    this.renderer.addClass(document.body, 'fs-date-picker-open');\n    this.opened = true;\n\n    this._dateDialogRef.value$\n      .pipe(\n        takeUntil(this._dateDialogRef.close$),\n        takeUntil(this._destroy$),\n      )\n      .subscribe((value: Date) => {\n        this.value = value;\n        this.selected$.emit(value);\n      });\n\n    this._dateDialogRef.close$\n      .pipe(\n        take(1),\n        takeUntil(this._destroy$),\n      )\n      .subscribe(() => {\n        this._dateDialogRef = null;\n        this.renderer.removeClass(document.body, 'fs-date-picker-open');\n        this._cdRef.markForCheck();\n      });\n  }\n\n  public clearInput() {\n    this.elementRef.nativeElement.value = null;\n  }\n\n  public triggerClick(): void {\n    this.el.focus();\n    this.el.select();\n\n    this.open();\n  }\n\n  protected updateValue(date): void {\n    this._value = date;\n    this._onChange(this.value);\n    this._onTouch();\n    this.change$.emit(this.value);\n  }\n\n  protected setReadonly() {\n    setTimeout(() => {\n      this.elementRef.nativeElement.setAttribute('readonly', true);\n    });\n  }\n\n  protected close() {\n    if (this._dateDialogRef) {\n      this._dateDialogRef.close();\n    }\n  }\n\n  /** The form control validator for whether the input parses. */\n  protected _parseValidator: ValidatorFn = (): ValidationErrors | null => {\n    return this._lastValueValid\n      ? null\n      : { fsDatepickerParse: 'Invalid Date' };\n  }\n\n  protected _validator: ValidatorFn | null = Validators.compose([this._parseValidator]);\n\n  protected validateDate(date: Date | unknown) {\n    this._lastValueValid = !date || isValid(date);\n  }\n\n  @HostListener('keyup', ['$event', '$event.target.value'])\n  public _inputKeyup(event: KeyboardEvent, value: string): void {\n    if(event.key === 'Enter') {\n      this.inputChange(value);\n    }\n  }\n\n  @HostListener('input', ['$event.target.value', '$event.target'])\n  public _inputChange(value: string, target): void {\n    if (this.ngModelOptions?.updateOn !== 'blur')  {\n      this.inputChange(value);\n    }\n  }\n\n  @HostListener('blur', ['$event.target.value'])\n  public _inputBlur(value: string): void {\n    if (this.ngModelOptions?.updateOn === 'blur')  {\n      this.inputChange(value);\n    }\n\n    this.updateInput(this.value);\n\n    this.blured$.emit(this.value);\n  }\n\n  protected inputChange(value: string): void {\n    if (!!value) {\n      const lastValueWasValid = this._lastValueValid;\n      const date = parseDate(value);\n\n      this.validateDate(date)\n\n      if (!isEqual(date, this._value)) {\n        this.updateValue(date);\n      } else if (lastValueWasValid !== this._lastValueValid) {\n        this._validatorOnChange();\n      }\n    } else {\n      this.updateValue(null);\n    }\n  }\n}\n","import { isDate, isValid } from 'date-fns';\nimport { utcToZonedTime } from 'date-fns-tz';\n\n\nexport function createDateFromValue(value, timezone: string) {\n  if (value && !isDate(value)) {\n    value = new Date(value);\n\n    if (!isValid(value)) {\n      value = null;\n    }\n  } if (value && isDate(value) && !isValid(value)) {\n    value = null\n  }\n\n  if (value && timezone) {\n    return utcToZonedTime(value, timezone);\n  }\n\n  return value;\n}\n","export enum ScrollPickerViewType {\n  Date = 'date',\n  Month = 'month',\n  Year = 'year',\n  MonthDay = 'monthday',\n  MonthYear = 'monthyear',\n}\n","import { isNumber } from 'lodash-es';\nimport { format, isValid } from 'date-fns';\n\nimport { format as fsFormat } from '@firestitch/date';\n\nimport { utcToZonedTime } from 'date-fns-tz';\n\nimport { PickerViewType } from '../../libs/common/enums/picker-view-type.enum';\nimport { ScrollPickerViewType } from '../../libs/common/enums/scroll-picker-view-type.enum';\n\n\nexport function formatDateTime(\n  value,\n  dateFormat: PickerViewType | ScrollPickerViewType = PickerViewType.Date,\n  customDateFormat = '',\n  timezone?: string,\n) {\n\n  if (isNumber(value)) {\n    value = new Date(value);\n  } else if (typeof value === 'string') {\n    value = new Date(value);\n    if (!isValid(value)) {\n      value = Date.parse(value);\n    }\n  }\n\n  if (value && isValid(value)) {\n    const formats = [];\n\n    if (customDateFormat) {\n      return fsFormat(value, customDateFormat, { timezone });\n    } else {\n\n      if (([\n        PickerViewType.Date,\n        PickerViewType.MonthRange,\n        PickerViewType.DateTime,\n      ] as unknown[]).indexOf(dateFormat) != -1) {\n        formats.push('MMM d, yyyy');\n      }\n\n      if (([PickerViewType.Time, PickerViewType.DateTime] as unknown[]).indexOf(dateFormat) != -1) {\n        formats.push('h:mm aa');\n      }\n\n      if (dateFormat === ScrollPickerViewType.MonthDay) {\n        formats.push('MMMM d');\n\n      } else if (dateFormat === ScrollPickerViewType.MonthYear) {\n        formats.push('MMMM yyyy');\n\n      } else if (dateFormat === ScrollPickerViewType.Year) {\n        formats.push('yyyy');\n\n      } else if (dateFormat === ScrollPickerViewType.Month) {\n        formats.push('MMMM');\n      }\n    }\n\n    return format(value, formats.join(' '));\n  }\n\n  return '';\n}\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input, Optional,\n  Output\n} from '@angular/core';\n\nimport { MatFormField } from '@angular/material/form-field';\n\nimport { PickerViewType } from '../../../libs/common/enums/picker-view-type.enum';\n\n\n@Component({\n  selector: 'fs-datepicker-trigger',\n  templateUrl: 'date-picker-trigger.component.html',\n  styleUrls: [ 'date-picker-trigger.component.scss' ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDatePickerTriggerComponent implements AfterViewInit {\n\n  @Input()\n  public disabled: boolean;\n\n  @Input()\n  public view: PickerViewType;\n\n  @Output()\n  public click = new EventEmitter<void>();\n\n  constructor(\n    @Optional() public matFormField: MatFormField,\n    private el: ElementRef,\n  ) {}\n\n  public get isTimeView(): boolean {\n    return this.view === PickerViewType.Time;\n  }\n\n  public ngAfterViewInit() {\n    const matElementRef = this.matFormField._elementRef.nativeElement;\n    const infixEl = matElementRef.querySelector('.mat-form-field-infix');\n\n    matElementRef\n      .querySelector('.mat-form-field-flex')\n      ?.insertBefore(this.el.nativeElement.firstChild, infixEl);\n  }\n\n  public triggerClick(event: UIEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.click.emit();\n  }\n\n}\n","<div class=\"mat-form-field-preffix fs-date-picker-trigger\" [ngClass]=\"{ disabled: disabled }\">\n  <mat-icon (click)=\"triggerClick($event)\">\n    <ng-container *ngIf=\"isTimeView; else calendarIcon\">\n      schedule\n    </ng-container>\n    <ng-template #calendarIcon>\n      calendar_today\n    </ng-template>\n  </mat-icon>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Inject,\n  Injector,\n  Input,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { isValid } from 'date-fns';\n\nimport { PickerViewType } from '../../../libs/common/enums/picker-view-type.enum';\nimport { FsDatePickerDialogFactory } from '../../../libs/dialog/services/dialog-factory.service';\nimport { FsDatePickerBaseComponent } from '../../classes/base-component';\nimport { createDateFromValue } from '../../helpers/create-date-from-value';\nimport { formatDateTime } from '../../helpers/format-date-time';\n\n\n@Component({\n  selector: '[fsDatePicker]',\n  template: FsDatePickerComponent.template,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FsDatePickerComponent),\n      multi: true,\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => FsDatePickerComponent),\n      multi: true,\n    }\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDatePickerComponent extends FsDatePickerBaseComponent {\n\n  static template = `\n    <fs-clear [show]=\"value && !disabled && !readonly && clear\" (clear)=\"cleared($event)\"></fs-clear>\n    <fs-datepicker-trigger (click)=\"triggerClick()\" [disabled]=\"disabled || readonly\" [view]=\"view\"></fs-datepicker-trigger>\n  `;\n\n  @Input() public minYear = null;\n  @Input() public maxYear = null;\n  @Input() public minDate = null;\n  @Input() public maxDate = null;\n  @Input() public startOfDay = true;\n  @Input() public view = PickerViewType.Date;\n  @Input() public format: string;\n  @Input() public minutes = true;\n\n  @Output('change')\n  public change$ = new EventEmitter<any>();\n\n  constructor(\n    @Inject(ElementRef) protected elementRef: ElementRef,\n    protected renderer: Renderer2,\n    protected injector: Injector,\n    protected _cdRef: ChangeDetectorRef,\n    protected fsDatepickerFactory: FsDatePickerDialogFactory,\n  ) {\n    super(renderer, elementRef, _cdRef);\n  }\n\n  public writeValue(value: any): void {\n    this._originValue = value;\n    this._value = createDateFromValue(value, this.timezone);\n    this.validateDate(this.value);\n    this.updateInput(this.value);\n\n    this._cdRef.markForCheck();\n  }\n\n  public updateInput(value) {\n    if (!this.minutes && value) {\n      value.setMinutes(0);\n    }\n\n    this.elementRef.nativeElement.value = formatDateTime(value, this.view, this.format, this.timezone);\n  }\n\n  public open() {\n    if (this.disabled || this.readonly || this._dateDialogRef) {\n      return;\n    }\n\n    const modelValue = isValid(this.value) ? this.value : null;\n\n    this._dateDialogRef = this.fsDatepickerFactory.openDatePicker(\n    this.elementRef,\n    this.injector,\n    {\n      modelValue: modelValue,\n      view: this.view,\n      minutes: this.minutes,\n      minYear: this.minYear,\n      maxYear: this.maxYear,\n      minDate: this.minDate,\n      maxDate: this.maxDate,\n      startOfDay: this.startOfDay,\n      components: this._getDefaultComponents(),\n    });\n\n    super.open();\n  }\n\n  protected updateValue(value) {\n    if (this.view === PickerViewType.Time && isValid(this._value) && isValid(value)) {\n      this._value.setHours(value.getHours());\n      this._value.setMinutes(value.getMinutes());\n      this._value.setSeconds(value.getSeconds());\n\n      value = new Date(this._value);\n    }\n\n    super.updateValue(value);\n  }\n\n  private _getDefaultComponents() {\n    if (this.view === 'time') {\n      return { timeStart: true };\n    } else {\n      return { calendarStart: true };\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n  selector: 'fs-date-range-separator',\n  template: 'to',\n  styleUrls: ['./date-range-separator.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DateRangeSeparatorComponent {}\n","import { lightFormat } from 'date-fns';\n\nexport function isSameDate(startDate, endDate) {\n  return lightFormat(startDate, 'yyyy-MM-dd') === lightFormat(endDate, 'yyyy-MM-dd');\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  Injector,\n  Input,\n  OnInit\n} from '@angular/core';\nimport { ControlValueAccessor, NgControl, ValidationErrors, ValidatorFn, } from '@angular/forms';\n\nimport { Observable, Subject } from 'rxjs';\nimport { filter, map, pairwise, skip, take, takeUntil } from 'rxjs/operators';\n\nimport { isDate, isEqual, isValid, subDays } from 'date-fns';\nimport { zonedTimeToUtc } from 'date-fns-tz';\n\nimport { FsDatePickerDialogFactory } from '../../../../libs/dialog/services/dialog-factory.service';\nimport { FsDatePickerDialogRef } from '../../../../libs/dialog/classes/dialog-ref';\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\nimport { isSameDate } from '../../../../libs/common/helpers/is-same-date';\n\nimport { RangePickerRef } from '../../../classes/range-picker-ref';\nimport { formatDateTime } from '../../../helpers/format-date-time';\nimport { createDateFromValue } from '../../../helpers/create-date-from-value';\nimport { parseDate } from '../../../helpers/parse-date';\n\n\n@Directive()\nexport abstract class RangePickerComponent<D = any>\n  implements ControlValueAccessor, OnInit {\n\n  @Input()\n  public view = PickerViewType.Date;\n\n  @Input()\n  public minYear: number = null;\n\n  @Input()\n  public maxYear: number = null;\n\n  @Input()\n  public minDate: Date = null;\n\n  @Input()\n  public maxDate: Date = null;\n\n  @Input()\n  public clear = true;\n\n  @Input()\n  public format: string;\n\n  @HostBinding('class.fs-input-disabled')\n  @HostBinding('attr.readonly')\n  public disabled = false;\n\n  @Input('readonly')\n  public set readonlyState(isReadonly: string) {\n    this.readonly = !!isReadonly || isReadonly === '';\n  }\n\n  @Input() public ngModelOptions: {\n    name?: string;\n    standalone?: boolean;\n    updateOn?: 'change' | 'blur' | 'submit';\n  };\n\n  @Input()\n  public set timezone(value: string) {\n    this._timezone = value;\n\n    this._tzChanged(this._originValue);\n  }\n\n  @HostBinding('class.fs-input-readonly')\n  @HostBinding('attr.readonly')\n  public readonly = false;\n\n  public onChange: any;\n  public onTouch: any = () => {};\n\n  protected _dateDialogRef: FsDatePickerDialogRef;\n  protected _pickerRef: RangePickerRef;\n  protected _destroy$ = new Subject();\n  protected _value;\n  protected _originValue: Date | null; // before timezone\n  protected _name;\n  protected _timezone: string;\n\n  private _lastValueValid = false;\n\n  protected constructor(\n    protected _elRef: ElementRef,\n    protected _injector: Injector,\n    protected _datepickerFactory: FsDatePickerDialogFactory,\n    protected _type,\n    protected _cdRef: ChangeDetectorRef,\n    protected _ngControl: NgControl,\n  ) {\n    this._ngControl.valueAccessor = this;\n    this._elRef.nativeElement.setAttribute('autocomplete', 'off');\n  }\n\n  public get name() {\n    return this._name;\n  }\n\n  public get timezone(): string {\n    return this._timezone;\n  }\n\n  public set value(value) {\n    if (this._value !== value) {\n      this._value = value;\n\n      this.onChange(value);\n      this.onTouch(value);\n    }\n  }\n\n  public ngOnInit(): void {\n    const control = this._ngControl.control;\n    const validators = control.validator\n      ? [ control.validator, this._parseValidator]\n      : this._parseValidator;\n    control.setValidators(validators);\n    control.updateValueAndValidity();\n  }\n\n  public get value() {\n    return this._value;\n  }\n\n  public get dateDialogRef() {\n    return this._dateDialogRef;\n  }\n\n  public writeValue(value) {\n    value = this._processInputDate(value);\n\n    this._originValue = value;\n\n    this.validateDate(value);\n\n    const [valuesAreDates] = this._checkValuesEquality(value, this.value);\n\n    if ((valuesAreDates) || (!valuesAreDates && this.value !== value)) {\n      this._value = value;\n      this.updateInput(this._value);\n\n      this._cdRef.markForCheck();\n    }\n  }\n\n  public setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  @HostListener('focus')\n  public open() {\n    if (this._dateDialogRef || this.disabled || this.readonly) {\n      return\n    }\n\n    //this._disableInput();\n\n    this._dateDialogRef = this._datepickerFactory.openDatePicker(\n      this._elRef,\n      this._injector,\n      {\n        view: this.view,\n        minYear: this.minYear,\n        maxYear: this.maxYear,\n        minDate: this._getPickerStartDate() || this.minDate,\n        maxDate: this.maxDate,\n        components: this._getDefaultComponents(),\n        modelValue: this.value,\n        pickerRef: this._pickerRef,\n        rangeType: this._type\n      }\n    );\n\n    this._elRef.nativeElement.focus();\n\n    this._listenDialogValueChanges();\n\n    this._dateDialogRef.close$\n      .pipe(\n        take(1),\n        takeUntil(this._destroy$),\n      )\n      .subscribe(() => {\n        this._dateDialogRef = null;\n        this._enableInput();\n\n        this._cdRef.markForCheck();\n      });\n  }\n\n  /**\n   * Set value which was selected in dialog\n   * @param value\n   */\n  public updateValueFromDialog(value: Date) {\n    this.updateValue(value);\n    // this.writeValue(value);\n  }\n\n  public updateValue(value): void {\n    if (this.view === PickerViewType.Time && isValid(this._value) && isValid(value)) {\n      this._value.setHours(value.getHours());\n      this._value.setMinutes(value.getMinutes());\n      this._value.setSeconds(value.getSeconds());\n\n      value = new Date(this._value);\n    }\n\n    this._value = value;\n    this.updateInput(this._value);\n\n    if (value && this.timezone) {\n      value = zonedTimeToUtc(value, this.timezone);\n    }\n\n    this.onChange(value);\n    this.onTouch(value);\n  }\n\n  public updateInput(value) {\n    this._elRef.nativeElement.value = formatDateTime(value, this.view, this.format, this.timezone);\n  }\n\n  @HostListener('keyup', ['$event', '$event.target.value'])\n  public _inputKeyup(event: KeyboardEvent, value: string): void {\n    if(event.key === 'Enter') {\n      this.inputChange(value);\n    }\n  }\n\n  @HostListener('input', ['$event.target.value', '$event.target'])\n  public _inputChange(value: string, target): void {\n    if (this.ngModelOptions?.updateOn !== 'blur')  {\n      this.inputChange(value);\n    }\n  }\n\n  public inputChange(value: string): void {\n    const lastValueWasValid = this._lastValueValid;\n    const date = parseDate(value);\n\n    this._lastValueValid = !date || isValid(date);\n\n    if (!isEqual(date, this._value)) {\n      this.updateValue(date);\n    } else if (lastValueWasValid !== this._lastValueValid) {\n      this._ngControl.control.updateValueAndValidity();\n    }\n  }\n\n  @HostListener('blur', ['$event.target.value'])\n  public _inputBlur(value: string): void {\n    if (this.ngModelOptions?.updateOn === 'blur')  {\n      this.inputChange(value);\n    }\n\n    this.updateInput(this.value);\n  }\n\n  public registerOnChange(fn) { this.onChange = fn;  }\n  public registerOnTouched(fn) { this.onTouch = fn; }\n\n  public triggerClick(): void {\n    this._elRef.nativeElement.focus();\n    this._elRef.nativeElement.select();\n\n    this.open();\n  }\n\n  protected _processInputDate(date: Date | null): Date | null {\n    if (!date) {\n      return null;\n    }\n\n    return createDateFromValue(date, this.timezone);\n  }\n\n  protected _getDefaultComponents() {\n    if (this.view === 'time') {\n      return { timeStart: true };\n    } else {\n      return { calendarStart: true, calendarEnd: true };\n    }\n  }\n\n  protected _enableInput() {\n    this.disabled = false;\n  }\n\n  protected _disableInput() {\n    this.disabled = true;\n\n  }\n\n  protected _tzChanged(originDate: Date | null) {\n    this._value = createDateFromValue(originDate, this.timezone);\n    this.updateInput(this._value);\n\n    this._cdRef.markForCheck();\n  }\n\n  protected _listenDialogValueChanges(): void {\n    this._dateDialogRef.value$\n      .pipe(\n        takeUntil(this._dateDialogRef.close$),\n        takeUntil(this._destroy$),\n      )\n      .subscribe((value: Date) => {\n        this.updateValueFromDialog(value);\n      });\n  }\n\n  protected _checkValuesEquality(newValue, prevValue) {\n    const valuesAreDates = isDate(newValue) && isDate(prevValue) && isValid(newValue) && isValid(prevValue);\n    const valuesDatesEquals = valuesAreDates\n      && isSameDate(newValue, prevValue);\n\n    return [valuesAreDates, valuesDatesEquals];\n  }\n\n  /**\n   * We need picker start date to be able to limit \"Date To\" picker\n   */\n  protected _getPickerStartDate() {\n    if (\n      this.view !== PickerViewType.MonthRange\n      && isDate(this._pickerRef.startDate)\n      && isValid(this._pickerRef.startDate)\n    ) {\n      return subDays(this._pickerRef.startDate, 1);\n    }\n\n    return false;\n  }\n\n  /** The form control validator for whether the input parses. */\n  protected _parseValidator: ValidatorFn = (): ValidationErrors | null => {\n    return this._lastValueValid\n      ? null\n      : { fsDatepickerParse: 'Invalid Date' };\n  }\n\n  protected validateDate(date: Date | unknown) {\n    this._lastValueValid = !date || isValid(date);\n  }\n\n  protected _pickerRefUpdates$(target: Observable<Date | null>): Observable<Date | any> {\n    return target\n      .pipe(\n        skip(1),\n        pairwise(),\n        filter((changes: [Date | null, Date | null]) => {\n          const prevValue = changes[0]?.getTime();\n          const newValue = changes[1]?.getTime();\n\n          return prevValue !== newValue\n            && this.value?.getTime() !== newValue;\n        }),\n        map((changes) => changes[1]),\n      );\n  }\n\n}\n","import { isDate } from 'date-fns';\n\nexport function cloneDate(fromDate: Date): Date | null {\n  if (!isDate(fromDate)) {\n    return null;\n  }\n\n  return new Date(fromDate.getTime());\n}\n","import { isAfter, isEqual, isValid } from 'date-fns';\n\nimport { PickerViewType } from '../../common/enums/picker-view-type.enum';\n\nimport { cloneDate } from './clone-date';\nimport { isSameDate } from './is-same-date';\n\n\nexport function isDateAfter(target, from, view: PickerViewType): boolean {\n  let startDate, endDate;\n\n  if (view === PickerViewType.Time) {\n    if (from) {\n      startDate = cloneDate(from);\n    }\n\n    if (target) {\n      endDate = cloneDate(target);\n    }\n  } else {\n    startDate = from;\n    endDate = target;\n  }\n\n  if (!startDate || !endDate) {\n    return true;\n  }\n\n  if (view === PickerViewType.Date && isValid(startDate) && isValid(endDate) && isSameDate(startDate, endDate)) {\n    return true;\n  }\n\n  if ((view === PickerViewType.DateTime || view === PickerViewType.Time) && isEqual(startDate, endDate)) {\n    return true;\n  }\n\n  return isAfter(endDate, startDate);\n}\n","import { BehaviorSubject, Observable } from 'rxjs';\n\nimport { endOfDay, startOfDay } from 'date-fns';\n\nimport { PickerViewType } from '../../libs/common/enums/picker-view-type.enum';\nimport { isDateAfter } from '../../libs/common/helpers/is-date-after';\n\n\nexport class RangePickerRef {\n\n  private _startDatePickerExists = false;\n  private _endDatePickerExists = false;\n\n  private _startDate$ = new BehaviorSubject<Date | null>(null);\n  private _endDate$ = new BehaviorSubject<Date | null>(null);\n\n  private _startDate: Date = null;\n  private _endDate: Date = null;\n\n  constructor(public view: string) {}\n\n  public get startDate(): Date {\n    return this._startDate;\n  }\n\n  public get endDate(): Date {\n    return this._endDate;\n  }\n\n  public get startDate$(): Observable<Date> {\n    return this._startDate$.asObservable();\n  }\n\n  public get endDate$(): Observable<Date> {\n    return this._endDate$.asObservable();\n  }\n\n  public get startDatePickerExists() {\n    return this._startDatePickerExists;\n  }\n\n  public get endDatePickerExists() {\n    return this._endDatePickerExists;\n  }\n\n  public get isRangeValid() {\n    return isDateAfter(this._endDate, this._startDate, this.view as PickerViewType);\n  }\n\n  /**\n   * Update start date and change end date if needed\n   * @param value\n   */\n  public updateStartDate(value: Date) {\n    this._startDatePickerExists = true;\n\n    if (!!value\n      && (this.view === PickerViewType.Date || this.view === PickerViewType.MonthRange)\n    ) {\n      value = startOfDay(value);\n    }\n\n    this._startDate = value && new Date(value) || null;\n    this._startDate$.next(this._startDate);\n  }\n\n  /**\n   * Update end date\n   * @param value\n   */\n  public updateEndDate(value: Date) {\n    if (!!value\n      && (this.view === PickerViewType.Date || this.view === PickerViewType.MonthRange)\n    ) {\n      value = endOfDay(value);\n    }\n\n    this._endDate = value && new Date(value) || null;\n    this._endDatePickerExists = true;\n\n    this._endDate$.next(this._endDate);\n  }\n\n  public sameAsStartDate(value: Date): boolean {\n    if (!!value\n      && (this.view === PickerViewType.Date || this.view === PickerViewType.MonthRange)\n    ) {\n      value = startOfDay(value);\n    }\n\n    return this._startDate === value;\n  }\n\n  public sameAsEndDate(value: Date): boolean {\n    if (!!value\n      && (this.view === PickerViewType.Date || this.view === PickerViewType.MonthRange)\n    ) {\n      value = endOfDay(value);\n    }\n\n    return this._endDate === value;\n  }\n\n  /**\n   * Mark start date picker as destroyed\n   */\n  public destroyStartDatePicker() {\n    this._startDatePickerExists = false;\n  }\n\n  /**\n   * Mark end date picker as destroyed\n   */\n  public destroyEndDatePicker() {\n    this._endDatePickerExists = false;\n  }\n\n  /**\n   * destroy everything related with picker\n   */\n  public destroy() {}\n\n}\n","import { Injectable } from '@angular/core';\nimport { RangePickerRef } from '../classes/range-picker-ref';\n\n\n@Injectable()\nexport class FsRangePickerStoreService {\n  private _store = new Map<string, RangePickerRef>();\n\n  constructor() {\n  }\n\n  public registerPickerFrom(name, value, view) {\n    this._createIfNotExistsPicker(name, view);\n\n    const pickerRef = this._store.get(name);\n\n    // pickerRef.updateStartDate(value);\n\n    return pickerRef;\n  }\n\n  public destroyStartDatePicker(name: string) {\n    const pickerRef = this._store.get(name);\n\n    if (pickerRef) {\n      pickerRef.destroyStartDatePicker();\n\n      this._destroyRefIfRelatedDestroyed(name, pickerRef);\n    }\n  }\n\n  public destroyEndDatePicker(name: string) {\n    const pickerRef = this._store.get(name);\n\n    if (pickerRef) {\n      pickerRef.destroyEndDatePicker();\n\n      this._destroyRefIfRelatedDestroyed(name, pickerRef);\n    }\n  }\n\n  public registerPickerTo(name, value, view): RangePickerRef {\n    this._createIfNotExistsPicker(name, view);\n\n    const pickerRef = this._store.get(name);\n\n    // pickerRef.updateEndDate(value);\n\n    return pickerRef;\n  }\n\n  private _createIfNotExistsPicker(name: string, view: string) {\n    if (!this._store.has(name)) {\n      this._store.set(name, new RangePickerRef(view));\n    }\n  }\n\n  private _destroyRefIfRelatedDestroyed(name, ref) {\n    if (!ref.startDatePickerExists && !ref.endDatePickerExists) {\n      ref.destroy();\n      this._store.delete(name);\n    }\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  ElementRef,\n  Injector,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Self,\n} from '@angular/core';\nimport { NgControl } from '@angular/forms';\n\nimport { startOfDay } from 'date-fns';\n\nimport { FsDatePickerDialogFactory } from '../../../../libs/dialog/services/dialog-factory.service';\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { RangePickerComponent } from '../base/range-picker-base.component';\nimport { FsRangePickerStoreService } from '../../../services/range-picker-store.service';\n\n\n@Directive()\nexport abstract class RangePickerFromComponent extends RangePickerComponent implements OnInit, OnDestroy {\n\n  public constructor(\n    protected _elRef: ElementRef,\n    protected _injector: Injector,\n    protected _datepickerFactory: FsDatePickerDialogFactory,\n    protected _cdRef: ChangeDetectorRef,\n    @Optional() @Self() protected _ngControl: NgControl,\n    private _rangePickerStore: FsRangePickerStoreService,\n  ) {\n    super(_elRef, _injector, _datepickerFactory, 'from', _cdRef, _ngControl);\n  }\n\n  public ngOnInit() {\n    this.registerPicker();\n\n    super.ngOnInit();\n  }\n\n  public ngOnDestroy() {\n    this._rangePickerStore.destroyStartDatePicker(this.name);\n\n    this._destroy$.next();\n    this._destroy$.complete();\n  }\n\n  public registerPicker() {\n    this._pickerRef = this._rangePickerStore.registerPickerFrom(this.name, this.value, this.view);\n  }\n\n  public writeValue(value) {\n    // Hot fix while angular has ongoing issue\n    // https://github.com/angular/angular/issues/29218\n    if (!this.onChange) {\n      return;\n    }\n    super.writeValue(value);\n\n    const [valuesAreDates] = this._checkValuesEquality(this.value, this._pickerRef.startDate);\n\n    if ((valuesAreDates && !this._pickerRef.sameAsStartDate(this.value)) || (!valuesAreDates)) {\n      this._pickerRef.updateStartDate(this.value);\n    }\n  }\n\n  public cleared(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.writeValue(null);\n\n    this.onChange(this.value);\n    this.onTouch(this.value);\n  }\n\n  /**\n   * Set value which was selected in dialog\n   * @param value\n   */\n  public updateValueFromDialog(value: Date) {\n    this.updateValue(value);\n\n    super.updateValueFromDialog(value);\n  }\n\n  public updateValue(value): void {\n    if (this.view === PickerViewType.Date) {\n      value = startOfDay(value);\n    }\n\n    this._pickerRef.updateStartDate(value);\n\n    super.updateValue(value);\n  }\n\n  protected _tzChanged(originDate: Date | null): void {\n    super._tzChanged(originDate);\n\n    this._pickerRef?.updateStartDate(this.value);\n  }\n\n  protected _processInputDate(date: Date | null): Date | null {\n    date = super._processInputDate(date);\n\n    if (this.view === PickerViewType.Date && date) {\n      date = startOfDay(date);\n    }\n\n    return date;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerFromComponent } from '../base/range-picker-from.component';\n\n\n@Component({\n  selector: '[fsDateTimeRangeFrom],[fsDateTimeRangeFromPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DateTimeRangePickerFromComponent extends RangePickerFromComponent {\n\n  @Input() set fsDateTimeRangeFrom(value) {\n    this._name = value;\n  }\n\n  @Input() set fsDateTimeRangeFromPicker(value) {\n    this._name = value;\n  }\n\n  @Input()\n  public view = PickerViewType.DateTime;\n\n  public updateValue(value): void {\n    this._pickerRef.updateStartDate(value);\n\n    super.updateValue(value);\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  ElementRef,\n  Injector,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Self,\n} from '@angular/core';\nimport { NgControl, ValidationErrors, ValidatorFn, } from '@angular/forms';\n\nimport { takeUntil } from 'rxjs/operators';\n\nimport { endOfDay, startOfDay } from 'date-fns';\n\nimport { FsDatePickerDialogFactory } from '../../../../libs/dialog/services/dialog-factory.service';\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { RangePickerComponent } from '../base/range-picker-base.component';\nimport { FsRangePickerStoreService } from '../../../services/range-picker-store.service';\n\n\n@Directive()\nexport abstract class RangePickerToComponent extends RangePickerComponent implements OnInit, OnDestroy {\n\n  public constructor(\n    protected _elRef: ElementRef,\n    protected _injector: Injector,\n    protected _datepickerFactory: FsDatePickerDialogFactory,\n    protected _cdRef: ChangeDetectorRef,\n    @Optional() @Self() protected _ngControl: NgControl,\n    private _rangePickerStore: FsRangePickerStoreService,\n  ) {\n    super(_elRef, _injector, _datepickerFactory, 'to', _cdRef, _ngControl);\n  }\n\n  public ngOnInit() {\n    this.registerPicker();\n    this._subscribeToPickerRefUpdates();\n\n    super.ngOnInit();\n  }\n\n  public ngOnDestroy() {\n    this._rangePickerStore.destroyEndDatePicker(this.name);\n\n    this._destroy$.next();\n    this._destroy$.complete();\n  }\n\n  public registerPicker() {\n    this._pickerRef = this._rangePickerStore.registerPickerTo(this.name, this.value, this.view);\n  }\n\n  public writeValue(value) {\n    // Hot fix while angular has ongoing issue\n    // https://github.com/angular/angular/issues/29218\n    if (!this.onChange) {\n      return;\n    }\n\n    super.writeValue(value);\n\n    const [valuesAreDates] = this._checkValuesEquality(this.value, this._pickerRef.endDate);\n\n    if ((valuesAreDates && !this._pickerRef.sameAsEndDate(this.value)) || !valuesAreDates) {\n      this._pickerRef.updateEndDate(this.value);\n    }\n  }\n\n  public cleared(event?) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n\n    this.writeValue(null);\n\n    this.onChange(this.value);\n    this.onTouch(this.value);\n  }\n\n  /**\n   * Set value which was selected in dialog\n   * @param value\n   */\n  public updateValueFromDialog(value) {\n    this.updateValue(value);\n\n    super.updateValueFromDialog(this._pickerRef.endDate);\n  }\n\n  public updateValue(value: Date) {\n    if (this.view === PickerViewType.Date) {\n      value = endOfDay(value);\n    }\n\n    this._pickerRef.updateEndDate(value as Date);\n\n    super.updateValue(value);\n  }\n\n  protected _tzChanged(originDate: Date | null): void {\n    super._tzChanged(originDate);\n\n    this._pickerRef?.updateEndDate(this.value);\n  }\n\n  /** The form control validator for whether the input parses. */\n  protected _parseValidator: ValidatorFn = (): ValidationErrors | null => {\n    return this._pickerRef.isRangeValid\n      ? null\n      : { fsDatepickerRange: 'Invalid Range' };\n  }\n\n  protected _processInputDate(date: Date | null): Date | null {\n    date = super._processInputDate(date);\n\n    if (this.view === PickerViewType.Date && date) {\n      date = endOfDay(date);\n    }\n\n    return date;\n  }\n\n  protected _subscribeToPickerRefUpdates() {\n    this._pickerRefUpdates$(this._pickerRef.startDate$)\n      .pipe(\n        takeUntil(this._destroy$),\n      )\n      .subscribe((value: Date | null) => {\n        if (!this._pickerRef.isRangeValid) {\n          this.cleared();\n        }\n\n        if (this.value) {\n          this._ngControl.control.markAsDirty();\n          this._ngControl.control.updateValueAndValidity();\n        }\n\n        this._cdRef.markForCheck();\n      });\n  }\n\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerToComponent } from '../base/range-picker-to.component';\n\n\n@Component({\n  selector: '[fsDateTimeRangeTo],[fsDateTimeRangeToPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DateTimeRangePickerToComponent extends RangePickerToComponent {\n\n  @Input() set fsDateTimeRangeTo(value) {\n    this._name = value;\n  }\n\n  @Input() set fsDateTimeRangeToPicker(value) {\n    this._name = value;\n  }\n\n  @Input()\n  public view = PickerViewType.DateTime;\n\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerFromComponent } from '../base/range-picker-from.component';\n\n\n@Component({\n  selector: '[fsTimeRangeFrom],[fsTimeRangeFromPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TimeRangePickerFromComponent extends RangePickerFromComponent {\n\n  @Input() set fsTimeRangeFrom(value) {\n    this._name = value;\n  }\n\n  @Input() set fsTimeRangeFromPicker(value) {\n    this._name = value;\n  }\n\n  @Input()\n  public view = PickerViewType.Time;\n\n  public updateValue(value): void {\n    this._pickerRef.updateStartDate(value);\n\n    super.updateValue(value);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerToComponent } from '../base/range-picker-to.component';\n\n\n@Component({\n  selector: '[fsTimeRangeTo],[fsTimeRangeToPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TimeRangePickerToComponent extends RangePickerToComponent {\n\n  @Input() set fsTimeRangeTo(value) {\n    this._name = value;\n  }\n\n  @Input() set fsTimeRangeToPicker(value) {\n    this._name = value;\n  }\n\n  @Input()\n  public view = PickerViewType.Time;\n\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerFromComponent } from '../base/range-picker-from.component';\n\n\n@Component({\n  selector: '[fsDateRangeFrom],[fsDateRangeFromPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DateRangePickerFromComponent extends RangePickerFromComponent {\n\n  @Input() set fsDateRangeFrom(value) {\n    this._name = value;\n  }\n\n  @Input() set fsDateRangeFromPicker(value) {\n    this._name = value;\n  }\n\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerToComponent } from '../base/range-picker-to.component';\n\n\n@Component({\n  selector: '[fsDateRangeTo],[fsDateRangeToPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DateRangePickerToComponent extends RangePickerToComponent {\n\n  @Input() set fsDateRangeTo(value) {\n    this._name = value;\n  }\n\n  @Input() set fsDateRangeToPicker(value) {\n    this._name = value;\n  }\n\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  forwardRef,\n  Inject,\n  Injector,\n  Input,\n  Renderer2,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { FsDatePickerDialogFactory } from '../../../libs/dialog/services/dialog-factory.service';\nimport { ScrollPickerViewType } from '../../../libs/common/enums/scroll-picker-view-type.enum';\nimport { FsDatePickerBaseComponent } from '../../classes/base-component';\nimport { createDateFromValue } from '../../helpers/create-date-from-value';\nimport { formatDateTime } from '../../helpers/format-date-time';\nimport { FsDatePickerComponent } from '../date-picker/date-picker.component';\n\n\n@Component({\n  selector: '[fsDateScrollPicker]',\n  template: FsDatePickerComponent.template,\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => FsDateScrollPickerComponent),\n    multi: true\n  }],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDateScrollPickerComponent extends FsDatePickerBaseComponent\n        implements ControlValueAccessor {\n\n  @Input() public minYear = (new Date()).getFullYear() - 50;\n  @Input() public maxYear = (new Date()).getFullYear() + 50;\n  @Input() public maxDate;\n  @Input() public showMonth = true;\n  @Input() public showYear = true;\n  @Input() public showDay = true;\n\n  public view = ScrollPickerViewType.Date;\n\n  constructor(\n    protected renderer: Renderer2,\n    protected injector: Injector,\n    @Inject(ElementRef) protected elementRef: ElementRef,\n    protected _datepickerFactory: FsDatePickerDialogFactory,\n    protected _cdRef: ChangeDetectorRef,\n  ) {\n    super(renderer, elementRef, _cdRef);\n  }\n\n  public writeValue(value: any): void {\n    this._originValue = value;\n    this._value = createDateFromValue(value, this.timezone);\n    this.validateDate(this.value);\n    this.updateInput(value);\n\n    this._cdRef.markForCheck();\n  }\n\n  public updateInput(value) {\n\n    let format = ScrollPickerViewType.Date;\n\n    if (this.showYear && this.showMonth && !this.showDay) {\n      format = ScrollPickerViewType.MonthYear;\n\n    } else if (!this.showYear && this.showMonth && this.showDay) {\n      format = ScrollPickerViewType.MonthDay;\n\n    } else if (!this.showYear && this.showMonth && !this.showDay) {\n      format = ScrollPickerViewType.Month;\n\n    } else if (this.showYear && !this.showMonth && !this.showDay) {\n      format = ScrollPickerViewType.Year;\n    }\n\n    this.elementRef.nativeElement.value = formatDateTime(value, format);\n  }\n\n  public open() {\n\n    if (this._dateDialogRef || this.disabled || this.readonly) {\n      return;\n    }\n\n    this._dateDialogRef = this._datepickerFactory.openDateScrollPicker(\n      this.elementRef,\n      this.injector,\n      {\n        modelValue: this.value,\n        minYear: this.minYear,\n        maxYear: this.maxYear,\n        maxDate: this.maxDate,\n        showMonth: this.showMonth,\n        showDay: this.showDay,\n        showYear: this.showYear,\n        view: this.view,\n      }\n    );\n\n    super.open();\n  }\n}\n","import {\n  ChangeDetectionStrategy, ChangeDetectorRef,\n  Component, ElementRef,\n  forwardRef, Inject,\n  Injector,\n  Input,\n  Renderer2,\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { FsDatePickerComponent } from '../date-picker/date-picker.component';\nimport { FsDateScrollPickerComponent } from '../date-scroll-picker/date-scroll-picker.component';\nimport { FsDatePickerDialogFactory } from '../../../libs/dialog/services/dialog-factory.service';\n\n\n@Component({\n  selector: '[fsDatePickerBirthday]',\n  template: FsDatePickerComponent.template,\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => FsDatePickerBirthdayComponent),\n    multi: true\n  }],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport  class FsDatePickerBirthdayComponent extends FsDateScrollPickerComponent {\n\n  @Input()\n  public minYear = (new Date()).getFullYear() - 120;\n\n  @Input()\n  public maxYear = (new Date()).getFullYear();\n\n  constructor(\n    renderer: Renderer2,\n    injector: Injector,\n    elementRef: ElementRef,\n    _datepickerFactory: FsDatePickerDialogFactory,\n    _cdRef: ChangeDetectorRef,\n  ) {\n    super(renderer, injector, elementRef, _datepickerFactory, _cdRef);\n  }\n}\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  HostListener,\n  Inject,\n  Injector,\n  Input,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { isDate, format } from 'date-fns';\n\nimport { FsDatePickerDialogFactory } from '../../../libs/dialog/services/dialog-factory.service';\nimport { PickerViewType } from '../../../libs/common/enums/picker-view-type.enum';\nimport { FsDatePickerBaseComponent } from '../../classes/base-component';\nimport { FsDatePickerComponent } from '../date-picker/date-picker.component';\n\n\n@Component({\n  selector: '[fsDateWeekPicker]',\n  template: FsDatePickerComponent.template,\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => FsDateWeekPickerComponent),\n    multi: true\n  }],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDateWeekPickerComponent extends FsDatePickerBaseComponent implements AfterViewInit {\n\n  @Input() public minYear = null;\n  @Input() public maxYear = null;\n  @Input() public minDate = null;\n  @Input() public maxDate = null;\n  @Input() public seedDate = null;\n  @Input() public periodWeeks = 1;\n  @Input() public view = PickerViewType.Week;\n\n  @Output('change')\n  public change$ = new EventEmitter<any>();\n\n  constructor(\n    protected renderer: Renderer2,\n    protected injector: Injector,\n    @Inject(ElementRef) protected elementRef: ElementRef,\n    protected _cdRef: ChangeDetectorRef,\n    protected fsDatepickerFactory: FsDatePickerDialogFactory,\n  ) {\n    super(renderer, elementRef, _cdRef);\n  }\n\n  @HostListener('click')\n  @HostListener('focus')\n  public inputClick() {\n    if (!this.disabled && !this.readonly) {\n      this.open();\n    }\n  }\n\n  public ngAfterViewInit() {\n    this.setReadonly();\n  }\n\n  public writeValue(value: any): void {\n    this._value = value;\n    this.validateDate(this.value);\n    this.updateInput(value);\n\n    this._cdRef.markForCheck();\n  }\n\n  public updateInput(value) {\n    if (value && isDate(value.from) && isDate(value.to)) {\n      if (value.from.getFullYear() == value.to.getFullYear()) {\n        const from = format(value.from, 'MMM d');\n        const to = format(value.to, 'MMM d yyyy');\n        this.elementRef.nativeElement.value = `#${value.period}: ${from} - ${to}`;\n      } else {\n        const from = format(value.from, 'MMM d yyyy');\n        const to = format(value.to, 'MMM d yyyy');\n        this.elementRef.nativeElement.value = `#${value.period}: ${from} - ${to}`;\n      }\n    } else {\n      this.elementRef.nativeElement.value = '';\n    }\n  }\n\n  public open() {\n    if (this._dateDialogRef) {\n      return;\n    }\n\n    this._dateDialogRef = this.fsDatepickerFactory.openDatePicker(\n      this.elementRef,\n      this.injector,\n      {\n        modelValue: this.value,\n        view: this.view,\n        minYear: this.minYear,\n        maxYear: this.maxYear,\n        minDate: this.minDate,\n        maxDate: this.maxDate,\n        components: this._getDefaultComponents(),\n        seedDate: this.seedDate,\n        periodWeeks: this.periodWeeks,\n      }\n    );\n\n    super.open();\n  }\n\n  private _getDefaultComponents() {\n    if (this.view === 'time') {\n      return { timeStart: true };\n    } else {\n      return { calendarStart: true };\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  forwardRef,\n  Input,\n} from '@angular/core';\nimport { NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { PickerViewType } from '../../../libs/common/enums/picker-view-type.enum';\nimport { FsDatePickerComponent } from '../date-picker/date-picker.component';\n\n\n@Component({\n  selector: '[fsDateTimePicker]',\n  template: FsDatePickerComponent.template,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FsDateTimePickerComponent),\n      multi: true,\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => FsDateTimePickerComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsDateTimePickerComponent extends FsDatePickerComponent {\n\n  @Input() public view = PickerViewType.DateTime;\n\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  forwardRef,\n  Input,\n} from '@angular/core';\nimport { NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { PickerViewType } from '../../../libs/common/enums/picker-view-type.enum';\nimport { FsDatePickerComponent } from '../date-picker/date-picker.component';\n\n\n@Component({\n  selector: '[fsTimePicker]',\n  template: FsDatePickerComponent.template,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FsTimePickerComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => FsTimePickerComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FsTimePickerComponent extends FsDatePickerComponent {\n\n  @Input() public view = PickerViewType.Time;\n\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnInit,\n} from '@angular/core';\n\nimport { takeUntil } from 'rxjs/operators';\n\nimport { startOfDay } from 'date-fns';\nimport { zonedTimeToUtc } from 'date-fns-tz';\n\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerFromComponent } from '../base/range-picker-from.component';\n\n\n@Component({\n  selector: '[fsMonthRangeFrom],[fsMonthRangeFromPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MonthRangePickerFromComponent extends RangePickerFromComponent implements OnInit {\n\n  @Input() set fsMonthRangeFrom(value) {\n    this._name = value;\n  }\n\n  @Input() set fsMonthRangeFromPicker(value) {\n    this._name = value;\n  }\n\n  public view = PickerViewType.MonthRange;\n\n  private _skipUpdateValue = false;\n\n  public ngOnInit() {\n    super.ngOnInit();\n\n    this._subscribeToPickerRefUpdates();\n  }\n\n  public cleared(event) {\n    super.cleared(event);\n\n    this._pickerRef.updateEndDate(null);\n  }\n\n  public updateValue(value: Date) {\n    value = startOfDay(value);\n\n    this._value = value;\n    this.updateInput(this._value);\n\n    if (value && this.timezone) {\n      value = zonedTimeToUtc(value, this.timezone);\n    }\n\n    this.onChange(value);\n    this.onTouch(value);\n  }\n\n  protected _tzChanged(originDate: Date | null) {\n    this._skipUpdateValue = true;\n\n    super._tzChanged(originDate);\n  }\n\n  protected _processInputDate(date: Date | null): Date | null {\n    date = super._processInputDate(date);\n\n    if (date) {\n      date = startOfDay(date);\n    }\n\n    return date;\n  }\n\n  /**\n   * When it's month range picker - we have to listen changes over rangePickerRef\n   */\n  protected _listenDialogValueChanges() {\n    // NOOP\n  }\n\n  protected _subscribeToPickerRefUpdates() {\n    this._pickerRefUpdates$(this._pickerRef.startDate$)\n      .pipe(\n        takeUntil(this._destroy$),\n      )\n      .subscribe((newValue: Date | null) => {\n        if (this._skipUpdateValue) {\n          this._skipUpdateValue = false;\n          return;\n        }\n\n        this.updateValue(newValue);\n\n        this._ngControl.control.markAsDirty();\n        this._ngControl.control.updateValueAndValidity();\n        this._cdRef.markForCheck();\n      });\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n} from '@angular/core';\n\nimport { takeUntil } from 'rxjs/operators';\n\nimport { zonedTimeToUtc } from 'date-fns-tz';\nimport { endOfDay } from 'date-fns';\n\nimport { PickerViewType } from '../../../../libs/common/enums/picker-view-type.enum';\n\nimport { FsDatePickerComponent } from '../../date-picker/date-picker.component';\nimport { RangePickerToComponent } from '../base/range-picker-to.component';\n\n\n@Component({\n  selector: '[fsMonthRangeTo],[fsMonthRangeToPicker]',\n  template: FsDatePickerComponent.template,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MonthRangePickerToComponent extends RangePickerToComponent {\n\n  @Input() set fsMonthRangeTo(value) {\n    this._name = value;\n  }\n\n  @Input() set fsMonthRangeToPicker(value) {\n    this._name = value;\n  }\n\n  public view = PickerViewType.MonthRange;\n\n  private _skipUpdateValue = false;\n\n  public updateValue(value: Date) {\n    if (value) {\n      value = endOfDay(value);\n    }\n\n    this._value = value;\n    this.updateInput(this._value);\n\n    if (value && this.timezone) {\n      value = zonedTimeToUtc(value, this.timezone);\n    }\n\n    this.onChange(value);\n    this.onTouch(value);\n  }\n\n  protected _tzChanged(originDate: Date | null) {\n    this._skipUpdateValue = true;\n\n    super._tzChanged(originDate);\n  }\n\n  protected _processInputDate(date: Date | null): Date | null {\n    date = super._processInputDate(date);\n\n    if (date) {\n      date = endOfDay(date);\n    }\n\n    return date;\n  }\n\n  /**\n   * When it's month range picker - we have to listen changes over rangePickerRef\n   */\n  protected _listenDialogValueChanges() {\n    // NOOP\n  }\n\n  protected _subscribeToPickerRefUpdates() {\n    this._pickerRefUpdates$(this._pickerRef.endDate$)\n      .pipe(\n        takeUntil(this._destroy$),\n      )\n      .subscribe((newValue: Date | null) => {\n        if (this._skipUpdateValue) {\n          this._skipUpdateValue = false;\n          return;\n        }\n\n        this.updateValue(newValue);\n\n        this._ngControl.control.markAsDirty();\n        this._ngControl.control.updateValueAndValidity();\n        this._cdRef.markForCheck();\n      });\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { LayoutModule } from '@angular/cdk/layout';\n\nimport { FsClearModule } from '@firestitch/clear';\nimport { FsScrollPickerModule } from '@firestitch/scroll-picker';\n\nimport { FsDatePickerCalendarModule } from '../libs/calendar/calendar.module';\nimport { FsDatePickerDialogModule } from '../libs/dialog/dialog.module';\n\nimport { FsDatePickerComponent } from './components/date-picker/date-picker.component';\nimport { DateRangeSeparatorComponent } from './components/date-range-separator/date-range-separator.component';\nimport { DateTimeRangePickerFromComponent } from './components/range-picker/from/date-time-range-picker-from.component';\nimport { DateTimeRangePickerToComponent } from './components/range-picker/to/date-time-range-picker-to.component';\nimport { TimeRangePickerFromComponent } from './components/range-picker/from/time-range-picker-from.component';\nimport { TimeRangePickerToComponent } from './components/range-picker/to/time-range-picker-to.component';\nimport { DateRangePickerFromComponent } from './components/range-picker/from/date-range-picker-from.component';\nimport { DateRangePickerToComponent } from './components/range-picker/to/date-range-picker-to.component';\nimport { FsDateScrollPickerComponent } from './components/date-scroll-picker/date-scroll-picker.component';\nimport { FsDatePickerBirthdayComponent } from './components/date-picker-birthday/date-picker-birthday.component';\nimport { FsDateWeekPickerComponent } from './components/date-week-picker/date-week-picker.component';\nimport { FsDateTimePickerComponent } from './components/date-time-picker/date-time-picker.component';\nimport { FsTimePickerComponent } from './components/time-picker/time-picker.component';\nimport { FsDatePickerTriggerComponent } from './components/date-picker-trigger/date-picker-trigger.component';\nimport { MonthRangePickerFromComponent } from './components/range-picker/from/month-range-picker-from.component';\nimport { MonthRangePickerToComponent } from './components/range-picker/to/month-range-picker-to.component';\n\nimport { FsRangePickerStoreService } from './services/range-picker-store.service';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatButtonModule,\n    MatTabsModule,\n    MatIconModule,\n    MatMenuModule,\n    MatSelectModule,\n    LayoutModule,\n    FsClearModule,\n    FsScrollPickerModule,\n    FsDatePickerCalendarModule,\n  ],\n  declarations: [\n    FsDatePickerComponent,\n    DateRangeSeparatorComponent,\n    DateRangePickerFromComponent,\n    DateRangePickerToComponent,\n    FsDateScrollPickerComponent,\n    FsDatePickerBirthdayComponent,\n    FsDatePickerTriggerComponent,\n    FsDateWeekPickerComponent,\n    FsTimePickerComponent,\n    DateTimeRangePickerFromComponent,\n    DateTimeRangePickerToComponent,\n    FsDateTimePickerComponent,\n    TimeRangePickerFromComponent,\n    TimeRangePickerToComponent,\n    MonthRangePickerFromComponent,\n    MonthRangePickerToComponent,\n  ],\n  exports: [\n    FsDatePickerComponent,\n    DateRangeSeparatorComponent,\n    DateRangePickerFromComponent,\n    DateRangePickerToComponent,\n    FsDateScrollPickerComponent,\n    FsDatePickerBirthdayComponent,\n    FsDateWeekPickerComponent,\n    FsTimePickerComponent,\n    DateTimeRangePickerFromComponent,\n    DateTimeRangePickerToComponent,\n    FsDateTimePickerComponent,\n    TimeRangePickerFromComponent,\n    TimeRangePickerToComponent,\n    MonthRangePickerFromComponent,\n    MonthRangePickerToComponent,\n  ],\n})\nexport class FsDatePickerModule {\n  static forRoot(): ModuleWithProviders<FsDatePickerModule> {\n    return {\n      ngModule: FsDatePickerModule,\n      providers: [\n        [...FsDatePickerDialogModule.forRoot().providers],\n        FsRangePickerStoreService,\n      ]\n    };\n  }\n}\n","/*\n * Public API Surface of fs-menu\n */\n\nexport { FsDatePickerModule } from './app/datepicker.module';\n\nexport { FsDatePickerComponent } from './app/components/date-picker/date-picker.component';\nexport { DateRangeSeparatorComponent } from './app/components/date-range-separator/date-range-separator.component';\nexport { DateRangePickerToComponent } from './app/components/range-picker/to/date-range-picker-to.component';\nexport { DateRangePickerFromComponent } from './app/components/range-picker/from/date-range-picker-from.component';\nexport { FsDateScrollPickerComponent } from './app/components/date-scroll-picker/date-scroll-picker.component';\nexport { FsDatePickerBirthdayComponent } from './app/components/date-picker-birthday/date-picker-birthday.component';\nexport { FsDateWeekPickerComponent } from './app/components/date-week-picker/date-week-picker.component';\nexport { FsTimePickerComponent } from './app/components/time-picker/time-picker.component';\nexport { DateTimeRangePickerFromComponent } from './app/components/range-picker/from/date-time-range-picker-from.component';\nexport { DateTimeRangePickerToComponent } from './app/components/range-picker/to/date-time-range-picker-to.component';\nexport { FsDateTimePickerComponent } from './app/components/date-time-picker/date-time-picker.component';\nexport { TimeRangePickerFromComponent } from './app/components/range-picker/from/time-range-picker-from.component';\nexport { TimeRangePickerToComponent } from './app/components/range-picker/to/time-range-picker-to.component';\nexport { MonthRangePickerFromComponent } from './app/components/range-picker/from/month-range-picker-from.component';\nexport { MonthRangePickerToComponent } from './app/components/range-picker/to/month-range-picker-to.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["MONTHS","isEqual","fsFormat"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAGgB,eAAe;IAC7B,OAAO,UAAU,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;AAChC;;SCFgB,qBAAqB,CAAC,IAAU;IAC9C,IAAI,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;QACzC,OAAO;YACL,IAAI,EAAE,WAAW,CAAC,IAAI,EAAE,YAAY,CAAC;YACrC,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE;YACrB,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE;YACzB,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE;YACxB,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE;YACtB,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE;SACpB,CAAC;KACH;SAAM;QACL,OAAO;YACL,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,MAAM,EAAE,IAAI;YACZ,IAAI,EAAE,IAAI;YACV,KAAK,EAAE,IAAI;YACX,GAAG,EAAE,IAAI;SACV,CAAC;KACH;AACH;;ACvBO,MAAM,QAAQ,GAAG;IACtB,KAAK;IACL,KAAK;IACL,MAAM;IACN,KAAK;IACL,OAAO;IACP,KAAK;IACL,KAAK;CACN;;SCNe,eAAe,CAAC,YAAY,EAAE,KAAK,EAAE,GAAG;IACtD,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;QACzC,OAAO,KAAK,CAAC;KACd;IAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC5C,MAAM,KAAK,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;QAE9B,MAAM,QAAQ,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAElC,MAAM,6BAA6B,GACjC,gBAAgB,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC;eACtD,WAAW,CAAC,KAAK,EAAE,YAAY,CAAC,KAAK,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;QAE9E,MAAM,2BAA2B,GAC/B,gBAAgB,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC;eACpD,WAAW,CAAC,GAAG,EAAE,YAAY,CAAC,KAAK,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;QAE5E,IAAI,6BAA6B,IAAI,2BAA2B,EAAE;YAChE,OAAO,IAAI,CAAC;SACb;KACF;IAED,OAAO,KAAK,CAAC;AACf;;SCvBgB,aAAa,CAAC,YAAY,EAAE,IAAI;IAC9C,MAAM,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;IAClC,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;IAE9B,OAAO,eAAe,CAAC,YAAY,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;AACzD;;MCKa,IAAI;IAYf,YACU,UAAgB,EAChB,SAAe,EACf,YAAoB;QAFpB,eAAU,GAAV,UAAU,CAAM;QAChB,cAAS,GAAT,SAAS,CAAM;QACf,iBAAY,GAAZ,YAAY,CAAQ;QAbvB,SAAI,GAAc,EAAE,CAAC;QAIrB,sBAAiB,GAAG,KAAK,CAAC;QAC1B,qBAAgB,GAAG,KAAK,CAAC;QAExB,mBAAc,GAAG,KAAK,CAAC;QAQ7B,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,YAAY,EAAE;YACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;SACrC;QAED,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;KAC9C;IAED,IAAW,SAAS;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;IAED,IAAW,OAAO;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC;KACtB;IAED,IAAW,kBAAkB;QAC3B,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;;;;;IAMM,MAAM,CAAC,GAAY;QACxB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACrB;;;;;IAMM,SAAS,CAAC,MAAc;QAC7B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACtB;;;;;IAMM,mBAAmB,CAAC,IAAa;QACtC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;KAC5B;;;;IAKM,4BAA4B;QACjC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;KAC/B;IAEM,2BAA2B;QAChC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;KAC9B;;;;IAKO,YAAY;;;;QAIlB,IAAI,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE;YAC7C,MAAM,WAAW,GAAG,iBAAiB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YACvE,MAAM,mBAAmB,GAAG,yBAAyB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAEvF,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;;;YAK1C,MAAM,QAAQ,GAAG,UAAU,CACzB,IAAI,CAAC,UAAU,EACf,QAAQ,CAAC,QAAQ,EAAE,WAAW,CAAC,EAC/B,EAAE,YAAY,EAAO,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAC,CAC9C,CAAC;YAEF,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aACpE;iBAAM;gBACL,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,mBAAmB,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aAC5E;YAED,MAAM,SAAS,GAAG,yBAAyB,CACzC,IAAI,CAAC,UAAU,EACf,QAAQ,EACR,EAAE,YAAY,EAAO,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAC,CAC5C,GAAG,IAAI,CAAC,YAAY,CAAC;;YAGxB,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;SACnC;aAAM;YACL,MAAM,WAAW,GAAG,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAEpF,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC1C,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,GAAG,WAAW,CAAC,CAAC;YAE3D,MAAM,SAAS,GAAG,yBAAyB,CACzC,IAAI,CAAC,UAAU,EACf,QAAQ,EACR,EAAE,YAAY,EAAO,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAC,CAC5C,GAAG,IAAI,CAAC,YAAY,CAAC;;YAGxB,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;SACnC;KACF;;;MCjIU,MAAM;IAUjB,YACS,QAAgB,EAChB,SAAe,EACf,QAAc,EACd,WAAmB,EAClB,YAAY,KAAK;QAJlB,aAAQ,GAAR,QAAQ,CAAQ;QAChB,cAAS,GAAT,SAAS,CAAM;QACf,aAAQ,GAAR,QAAQ,CAAM;QACd,gBAAW,GAAX,WAAW,CAAQ;QAClB,cAAS,GAAT,SAAS,CAAQ;QAbpB,cAAS,GAAG,KAAK,CAAC;QAEjB,WAAM,GAAW,EAAE,CAAC;QACpB,kBAAa,GAAG,CAAC,CAAC;QAYxB,IAAI,CAAC,qBAAqB,EAAE,CAAC;KAC9B;IAED,IAAW,YAAY;QACrB,OAAO,IAAI,CAAC,aAAa,CAAC;KAC3B;IAED,IAAW,QAAQ;QACjB,OAAO,IAAI,CAAC,SAAS,CAAC;KACvB;IAED,IAAW,IAAI;QACb,OAAO,IAAI,CAAC,KAAK,CAAC;KACnB;IAED,IAAW,EAAE;QACX,OAAO,IAAI,CAAC,GAAG,CAAC;KACjB;IAED,IAAW,IAAI;QACb,OAAO,IAAI,CAAC,KAAK,CAAC;KACnB;IAED,IAAW,IAAI,CAAC,KAAa;QAC3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAW,QAAQ,CAAC,KAAc;QAChC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI;YACvB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG;gBACpB,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC;aACtB,CAAC,CAAA;SACH,CAAC,CAAA;KACH;IAEM,OAAO,CAAC,IAAU;QACvB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvB,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,WAAW,EAAE;YACrC,IAAI,CAAC,UAAU,EAAE,CAAC;YAElB,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC5B,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;aAChC;SACF;QAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;KACzC;;;;IAKM,kBAAkB;QACvB,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACjC,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAErD,SAAS,CAAC,4BAA4B,EAAE,CAAC;QACzC,QAAQ,CAAC,2BAA2B,EAAE,CAAC;KACxC;IAEO,UAAU;QAChB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YACpB,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE;gBAC7B,OAAO,CAAC,CAAC,CAAA;aACV;iBAAM,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE;gBACpC,OAAO,CAAC,CAAC;aACV;iBAAM;gBACL,OAAO,CAAC,CAAC;aACV;SACF,CAAC,CAAA;KACH;;;;IAKO,qBAAqB;QAC3B,MAAM,mBAAmB,GAAG,yBAAyB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAErF,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACzC,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,GAAG,mBAAmB,CAAC,CAAC;QAEnE,MAAM,kBAAkB,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;QAEpE,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,QAAQ,EAAE,kBAAkB,CAAC,CAAC;QACpD,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAClD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;KACvC;;;ACzGH,MAAM,oBAAoB,GAAG,EAAE,CAAC;MAEnB,KAAK;IAkBhB,YAAmB,IAAU,EACV,QAAc,EACd,WAAmB,EAClB,aAAa,EACb,cAAuB;QAJxB,SAAI,GAAJ,IAAI,CAAM;QACV,aAAQ,GAAR,QAAQ,CAAM;QACd,gBAAW,GAAX,WAAW,CAAQ;QAClB,kBAAa,GAAb,aAAa,CAAA;QACb,mBAAc,GAAd,cAAc,CAAS;QAdpC,UAAK,GAAW,EAAE,CAAC;QAgBxB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAEtB,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,WAAW,EAAE;YACrC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC;YAClC,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC5C;aAAM;YACL,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;SAChC;KACF;IAED,IAAW,OAAO;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC;KACtB;;;;IAKM,UAAU;QACf,IAAI,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAC/D,IAAI,gBAAgB,GAAG,IAAI,CAAC,cAAc;cACtC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,mBAAmB;cACpD,oBAAoB,CAAC;;QAGzB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,WAAW,EAAE;YAC3C,gBAAgB,IAAI,CAAC,IAAI,gBAAgB,GAAG,CAAC,CAAC,CAAC;SAChD;QAED,IAAI,IAAI,CAAC;QAET,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,gBAAgB,EAAE,CAAC,EAAE,EAAE;YACzC,MAAM,SAAS,GAAG,WAAW,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;YAEhD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;gBACd,IAAI,GAAG,IAAI,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;gBAE9D,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACvB;YAED,MAAM,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,mBAAmB,GAAG,CAAC;mBAC5C,CAAC,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC;YAEvD,IAAI,CAAC,MAAM,CAAC;gBACV,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,WAAW,CAAC,WAAW,EAAE,YAAY,CAAC;gBAC5C,MAAM,EAAE,SAAS;gBACjB,KAAK,EAAE,WAAW,CAAC,QAAQ,EAAE;gBAC7B,IAAI,EAAE,WAAW,CAAC,WAAW,EAAE;gBAC/B,QAAQ,EAAE,aAAa,CAAC,IAAI,CAAC,aAAa,EAAE,WAAW,CAAC;aACzD,CAAC,CAAC;YAEH,WAAW,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;SACvC;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,WAAW,EAAE;YACrC,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,sBAAsB,EAAE,CAAC;SAC/B;KACF;IAEM,aAAa,CAAC,EAAU;QAC7B,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;YAC/B,OAAO,KAAK,CAAC;SACd;QAED,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;KACnC;;;;;;;IAQM,wBAAwB,CAAC,MAAc;QAC5C,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAE9C,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,IAAI,EAAE;YAC/B,CAAC,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;YAE7B,OAAO,CAAC,CAAC;SACV;aAAM;YACL,OAAO,KAAK,CAAC;SACd;KACF;;;;;IAMO,UAAU,CAAC,IAAU;QAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAErB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACzC,IAAI,CAAC,YAAY,GAAG,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE9C,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QACtC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;QACnC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACpC,IAAI,CAAC,YAAY,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC;QACzE,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QACjF,IAAI,CAAC,KAAK,GAAG,CAAE,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAE,CAAC;KAC1C;;;;;IAMO,sBAAsB,CAAC,OAAO;QACpC,IAAI,IAAI,CAAC,cAAc,IAAI,OAAO,EAAE;YAClC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC;SAC1D;aAAM;YACL,IAAI,CAAC,mBAAmB,GAAG,CAAC,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;SAChE;;;KAIF;;;;IAKO,WAAW;QACjB,IAAI,CAAC,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC;QAE/B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI;YACtB,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;gBAC1C,MAAM,SAAS,GAAG,IAAI,MAAM,CAC1B,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,WAAW,CACjB,CAAC;gBAEF,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;aAClD;YAED,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa;iBAC9B,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEtB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SACxB,CAAC,CAAC;KACJ;IAEO,sBAAsB;QAC5B,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,MAAM;YAChC,MAAM,CAAC,kBAAkB,EAAE,CAAA;SAC5B,CAAC,CAAA;KACH;;;MC/IU,6BAA6B;IAqExC,YACS,OAAmB;QAAnB,YAAO,GAAP,OAAO,CAAY;QAnErB,SAAI,GAAS,IAAI,CAAC;QAGlB,WAAM,GAAY,IAAI,CAAC;QAGvB,cAAS,GAAS,IAAI,CAAC;QAGvB,YAAO,GAAS,IAAI,CAAC;QAGrB,uBAAkB,GAAS,IAAI,CAAC;QAGhC,qBAAgB,GAAS,IAAI,CAAC;QAG9B,aAAQ,GAAW,IAAI,CAAC;QAGxB,iBAAY,GAAmB,IAAI,CAAC;QAGpC,cAAS,GAAS,IAAI,CAAC;QASvB,kBAAa,GAAG,KAAK,CAAC;QAGtB,WAAM,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGlC,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGvC,iBAAY,GAAG,IAAI,YAAY,EAAW,CAAC;QAG3C,aAAQ,GAAG,IAAI,YAAY,EAAO,CAAC;QAEnC,aAAQ,GAAQ,EAAE,CAAC;QAEnB,kBAAa,GAAmC,EAAE,CAAA;QAClD,UAAK,GAAU,IAAI,CAAC;QAEpB,iBAAY,GAAG,EAAE,CAAC;QAElB,gBAAW,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,UAAK,GAAQ;YAClB,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,YAAY,CAAC;YAC5C,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;YAClC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE;SACrC,CAAC;QAEK,yBAAoB,GAAG,IAAI,CAAC;;QAG3B,kBAAa,GAAG,MAAM,CAAC;KAI3B;IAEG,QAAQ;QAEb,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC;QAEnC,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,EAAE;YAC5B,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;gBAChC,IAAI,CAAC,cAAc,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBAC9G,IAAI,CAAC,cAAc,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;gBAE1D,MAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBAEhF,IAAI,cAAc,EAAE;oBAClB,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;iBACtC;aACF;SACF;aAAM,IAAI,IAAI,CAAC,IAAI,EAAE;YACpB,IAAI,CAAC,QAAQ,GAAG,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAClD;KACF;IAEM,WAAW,CAAC,OAAO;QACxB,IAAI,OAAO,EAAE;YAEX,IAAI,OAAO,CAAC,IAAI,EAAE;gBAChB,IAAI,CAAC,QAAQ,GAAG,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACjD,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;iBAAM,IAAI,OAAO,CAAC,kBAAkB,IAAI,OAAO,CAAC,gBAAgB,EAAE;gBACjE,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;YAED,IAAI,OAAO,CAAC,SAAS,EAAE;gBACrB,IAAI,OAAO,CAAC,SAAS,CAAC,YAAY,EAAE;oBAClC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;iBACjD;aACF;YAED,IAAI,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,OAAO,EAAE;gBACxC,IAAI,CAAC,aAAa,GAAG;oBACnB,IAAI,EAAE,IAAI,CAAC,SAAS,IAAI,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,YAAY,CAAC,IAAI,IAAI;oBACzE,EAAE,EAAE,IAAI,CAAC,OAAO,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC,IAAI,IAAI;iBACpE,CAAA;aACF;SACF;KACF;IAEM,eAAe,CAAC,GAAG;QACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACzB;IAEM,cAAc,CAAC,IAAU;QAC9B,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,EAAE;YAC5B,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;SAC9B;KACF;IAEM,cAAc,CAAC,IAAU;QAC9B,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,EAAE;YAC5B,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;SAC/B;KACF;IAEM,qBAAqB;QAC1B,IAAI,CAAC,oBAAoB,GAAG;YAC1B,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,IAAI;YACT,GAAG,EAAE,IAAI;SACV,CAAC;QAEF,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,IAAI,GAAG,GAAG,IAAI,CAAC;QAEf,IAAI,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACpD,IAAI,OAAO,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,gBAAgB,CAAC,EAAE;gBAC3D,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;gBAC9B,GAAG,GAAG,IAAI,CAAC,kBAAkB,CAAC;aAC/B;iBAAM;gBACL,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC;gBAChC,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC;aAC7B;YAED,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;YAC1B,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;YAEtB,MAAM,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;YAE5D,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;gBACjB,OAAO;aACR;YAED,KAAK,MAAM,GAAG,IAAI,KAAK,EAAE;gBACvB,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC;aACvE;YAED,IAAI,CAAC,oBAAoB,CAAC,GAAG,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;YACpE,IAAI,CAAC,oBAAoB,CAAC,GAAG,GAAG,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;SACpF;KACF;IAEM,WAAW;QAChB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,IAAI,CAAC,IAAI,GAAG,eAAe,EAAE,CAAC;SAC/B;KACF;IAEM,OAAO,CAAC,IAAI;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACxB;;;;;;;IAQM,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK;QAC9B,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,EAAE;YAC5B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAChC;aAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,YAAY,EAAE;YACzC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;SAC5B;aAAM;YACL,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SACrB;KACF;IAEM,SAAS,CAAC,GAAG;QAClB,IAAI,GAAG,CAAC,QAAQ,EAAE;YAChB,OAAO;SACR;QAED,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAGD,MAAM,IAAI,GAAG,IAAI,IAAI,CACnB,GAAG,CAAC,IAAI,EACR,GAAG,CAAC,KAAK,EACT,GAAG,CAAC,MAAM,EACV,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EACpB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,EACtB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CACvB,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACpB;IAEM,gBAAgB,CAAC,GAAY;QAClC,MAAM,IAAI,GAAG,IAAI,IAAI,CACnB,GAAG,CAAC,IAAI,EACR,GAAG,CAAC,KAAK,EACT,CAAC,GAAG,CAAC,MAAM,EACX,CAAC,EACD,CAAC,EACD,CAAC,CACF,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACpB;IAEM,YAAY,CAAC,MAAc;QAChC,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,IAAI,CAAC,cAAc,KAAK,MAAM,EAAE;gBAClC,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC;aAC9D;iBAAM;gBACL,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACrC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;aAC9B;SACF;aAAM;YACL,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;SAC9B;QAED,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE;YAChC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;gBACrB,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ;gBACpC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI;gBAC9B,EAAE,EAAE,IAAI,CAAC,cAAc,CAAC,EAAE;aAC3B,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC9B;KACF;IAEM,UAAU,CAAC,IAAI;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KACrC;IAEM,WAAW,CAAC,IAAU;QAC3B,MAAM,KAAK,GAAG,IAAI,KAAK,CACrB,IAAI,EACJ,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,aAAa,CACnB,CAAC;QAEF,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,EAAE;YAC5B,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG;gBACzC,OAAO,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC;aACrC,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC;SACtC;QAED,KAAK,CAAC,UAAU,EAAE,CAAC;QAEnB,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,IAAI,IAAI,CAAC,cAAc,EAAE;YACnD,MAAM,cAAc,GAAG,KAAK,CAAC,wBAAwB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAE3E,IAAI,cAAc,EAAE;gBAClB,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;aACtC;SACF;QAED,OAAO,KAAK,CAAC;KACd;;2HAlSU,6BAA6B;+GAA7B,6BAA6B,8jBCxC1C,kmFA2DA;4FDnBa,6BAA6B;kBATzC,SAAS;mBAAC;oBACT,QAAQ,EAAE,yBAAyB;oBACnC,WAAW,EAAE,2BAA2B;oBACxC,SAAS,EAAE,CAAC,2BAA2B,CAAC;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAC/C,IAAI,EAAE;wBACJ,OAAO,EAAE,yBAAyB;qBACnC;iBACF;iGAIQ,IAAI;sBADV,KAAK;gBAIC,MAAM;sBADZ,KAAK;gBAIC,SAAS;sBADf,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,kBAAkB;sBADxB,KAAK;gBAIC,gBAAgB;sBADtB,KAAK;gBAIC,QAAQ;sBADd,KAAK;gBAIC,YAAY;sBADlB,KAAK;gBAIC,SAAS;sBADf,KAAK;gBAIC,QAAQ;sBADd,KAAK;gBAIC,WAAW;sBADjB,KAAK;gBAIC,aAAa;sBADnB,KAAK;gBAIC,MAAM;sBADZ,MAAM;gBAIA,WAAW;sBADjB,MAAM;gBAIA,YAAY;sBADlB,MAAM;gBAIA,QAAQ;sBADd,MAAM;;;MEhEI,yBAAyB;IA2EpC,YACS,OAAmB,EAClB,gBAAiC;QADlC,YAAO,GAAP,OAAO,CAAY;QAClB,qBAAgB,GAAhB,gBAAgB,CAAiB;QA3E3B,SAAI,GAAG,IAAI,CAAC;QACZ,oBAAe,GAAG,EAAE,CAAC;QACrB,kBAAa,GAAG,EAAE,CAAC;QACnB,kBAAa,GAAG,EAAE,CAAC;QACnB,aAAQ,GAAG,KAAK,CAAC;QACjB,YAAO,GAAG,IAAI,CAAC;QACf,oBAAe,GAAG,IAAI,CAAC;QAEtB,aAAQ,GAAG,IAAI,YAAY,EAAO,CAAC;QAE7C,aAAQ,GAAQ,EAAE,CAAC;QACnB,wBAAmB,GAAQ,EAAE,CAAC;QAC9B,sBAAiB,GAAQ,EAAE,CAAC;QAC5B,2BAAsB,GAAQ,EAAE,CAAC;QAGjC,uBAAkB,GAAG;YAC1B;gBACE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACZ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACZ,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;aACf;YACD;gBACE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;gBAChB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;gBAChB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;aACjB;SACF,CAAC;QAEK,yBAAoB,GAAG;YAC5B,CAAC,CAAC,EAAE,CAAC,CAAC;YACN,CAAC,EAAE,EAAE,EAAE,CAAC;YACR,CAAC,EAAE,EAAE,EAAE,CAAC;YACR,CAAC,EAAE,EAAE,EAAE,CAAC;YACR,CAAC,EAAE,EAAE,EAAE,CAAC;YACR,CAAC,EAAE,EAAE,EAAE,CAAC;SACT,CAAC;QAEK,sBAAiB,GAAG;YACzB,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,CAAC,EAAE,EAAE,CAAC;YACP,CAAC,EAAE,EAAE,EAAE,CAAC;YACR,CAAC,EAAE,EAAE,EAAE,CAAC;SACT,CAAC;QAEK,wBAAmB,GAAG;YACjB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACf,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;YACpB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;SACrB,CAAC;QAEJ,0BAAqB,GAAG,IAAI,CAAC;QAC7B,wBAAmB,GAAG,IAAI,CAAC;QAC3B,wBAAmB,GAAG,IAAI,CAAC;QAOjC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACvE,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACzE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;KACxE;IAEM,QAAQ;QACb,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,QAAQ,EAAE,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO;cACzB,CAAC,IAAI,IAAI,EAAE,EAAE,UAAU,EAAE;cACzB,CAAC,CAAC;KACP;IAEM,WAAW,CAAC,OAAO;QACxB,IAAI,OAAO,IAAI,OAAO,CAAC,IAAI,EAAE;YAC3B,IAAI,CAAC,QAAQ,GAAG,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjD,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;gBAEzB,IAAI,IAAI,CAAC,IAAI,EAAE;oBACb,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;iBACzB;aACF;SACF;KACF;IAEM,SAAS;QACd,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;YACrD,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;YACrD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,EAC/C;YACA,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;KACF;IAEM,iBAAiB;QAEtB,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,sBAAsB,GAAG,EAAE,CAAC;QAEjC,IAAI,IAAI,CAAC,eAAe,KAAK,SAAS,EAAE;YACtC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,eAAe,EAAE;gBACxC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;aAChC;SACF;QAED,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE;YACpC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,aAAa,EAAE;gBACtC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;aAC9B;SACF;QAED,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE;YACpC,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,aAAa,EAAE;gBAEtC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACzC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEzC,MAAM,UAAU,GAAG,GAAG,GAAG,EAAE,CAAC;gBAC5B,MAAM,UAAU,GAAG,GAAG,GAAG,EAAE,CAAC;gBAE5B,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;gBACrC,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;gBAErC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;oBAE5B,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;oBAEpC,IAAI,CAAC,GAAG,OAAO,IAAI,CAAC,GAAG,OAAO,EAAG;wBAC/B,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;qBAC1B;yBAAM,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,UAAU,IAAI,OAAO,IAAI,OAAO,EAAE;wBAC5D,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;qBAC1B;oBAED,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,IAAI,OAAO,EAAE;wBAChC,KAAK,IAAI,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAE;4BAC5C,MAAM,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;4BACrB,IAAI,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC,IAAI,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC,EAAE;gCAC5C,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;6BAC1C;yBACF;qBACF;iBACF;aACF;SACF;KACF;IAEM,kBAAkB,CAAC,KAAK;QAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACxB,KAAK,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC/B,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aACpC;SACF;aAAM;YACL,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;SACxC;KACF;IAEM,gBAAgB,CAAC,KAAK;QAC3B,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACxB,KAAK,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC/B,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aAClC;SACF;aAAM;YACL,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;SACtC;KACF;IAEM,WAAW;QAChB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC;SACjC;KACF;IAEM,OAAO,CAAC,IAAI;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC1B;IAEM,SAAS,CAAC,IAAI;QAEnB,IAAI,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE;YAChC,OAAO;SACR;QAED,IAAI,OAAa,CAAC;QAElB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,OAAO,GAAG,eAAe,EAAE,CAAC;SAC7B;aAAM;YACL,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC/B;QAED,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAEvB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACvB;IAEM,WAAW,CAAC,MAAM;QACvB,IAAI,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC;gBAC9B,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,EAC/G;YACA,OAAO;SACR;QAED,IAAI,OAAa,CAAC;QAElB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,OAAO,GAAG,eAAe,EAAE,CAAC;SAC7B;aAAM;YACL,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC/B;QAED,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAE3B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACvB;;uHA/OU,yBAAyB;2GAAzB,yBAAyB,+TCvBtC,qwIA8HA;4FDvGa,yBAAyB;kBANrC,SAAS;mBAAC;oBACT,QAAQ,EAAE,qBAAqB;oBAC/B,WAAW,EAAE,uBAAuB;oBACpC,SAAS,EAAE,CAAC,uBAAuB,CAAC;oBACpC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;+HAGiB,IAAI;sBAAnB,KAAK;gBACU,eAAe;sBAA9B,KAAK;gBACU,aAAa;sBAA5B,KAAK;gBACU,aAAa;sBAA5B,KAAK;gBACU,QAAQ;sBAAvB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,eAAe;sBAA9B,KAAK;gBAEW,QAAQ;sBAAxB,MAAM;;;METI,0BAA0B;;wHAA1B,0BAA0B;yHAA1B,0BAA0B,iBARnC,6BAA6B;QAC7B,yBAAyB,aANzB,YAAY;QAEZ,aAAa,aAOb,6BAA6B;QAC7B,yBAAyB;yHAGhB,0BAA0B,YAd5B;YACP,YAAY;YAEZ,aAAa;SACd;4FAUU,0BAA0B;kBAftC,QAAQ;mBAAC;oBACR,OAAO,EAAE;wBACP,YAAY;wBAEZ,aAAa;qBACd;oBACD,YAAY,EAAE;wBACZ,6BAA6B;wBAC7B,yBAAyB;qBAC1B;oBACD,OAAO,EAAE;wBACP,6BAA6B;wBAC7B,yBAAyB;qBAC1B;iBACF;;;SCvBe,aAAa,CAC3B,gBAAwB,EACxB,UAAkB,EAClB,cAAsB;;;IAItB,OAAO,KAAK,CAAC,IAAI,CACf,EAAE,MAAM,EAAE,EAAE,EAAE,EACd,CAAC,CAAC,EAAE,CAAC;;QAEH,OAAO,KAAK,CAAC,IAAI,CACf,EAAE,MAAM,EAAE,EAAE,EAAE,EACd,CAAC,EAAE,EAAE,KAAK;;YAER,OAAO,gBAAgB,GAAG,SAAS,CAAC,CAAC,EAAE,KAAK,EAAE,cAAc,CAAC,GAAG,UAAU,CAAA;SAC3E,CAAC,CAAC;KACN,CACF,CAAC;AACJ,CAAC;AAED;;;SAGgB,WAAW,CACzB,UAAgD,EAChD,QAAQ,GAAG,EAAE,EACb,SAAS,GAAG,EAAE;IAEd,OAAO,UAAU,CAAC,MAAM,CACtB,CAAC,KAAK,EAAE,IAAI,EAAE,SAAS;QACrB,IAAI,SAAS,IAAI,QAAQ,EAAE;YACzB,MAAM,oBAAoB,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,UAAU;gBAC9D,IAAI,SAAS,GAAG,QAAQ,KAAK,SAAS,KAAK,QAAQ,IAAI,UAAU,GAAG,SAAS,CAAC,EAAE;oBAC9E,GAAG,IAAI,KAAK,CAAC;iBACd;gBAED,OAAO,GAAG,CAAC;aACZ,EAAE,CAAC,CAAC,CAAC;YAEN,KAAK,IAAI,oBAAoB,CAAC;SAC/B;QAED,OAAO,KAAK,CAAC;KACd,EAAE,CAAC,CAAC,CAAC;AACV,CAAC;AAED;;;AAGA,SAAS,SAAS,CAAC,cAAsB,EAAE,KAAa,EAAE,cAAsB;IAC9E,MAAM,YAAY,GAAG,IAAI,IAAI,CAAC,cAAc,GAAG,cAAc,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;IACzE,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,cAAc,GAAG,cAAc,EAAE,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5E,MAAM,IAAI,GAAG,YAAY,CAAC,MAAM,EAAE,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;IAE3D,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;AAC7B;;AChDO,MAAM,oBAAoB,GAAG,GAAG,CAAC;AACjC,MAAM,gBAAgB,GAAG,IAAI,CAAC;AAErC,MAAM,aAAa,GAAG,GAAG,CAAC;AAE1B;AACA,MAAM,kBAAkB,GAAG,EAAE,CAAC;AAC9B;AACA,MAAM,WAAW,GAAG,EAAE,CAAC;AAQvB;;;;MAKa,sBAAsB;IADnC;QAGmB,YAAO,GAAG,IAAI,OAAO,EAAU,CAAC;QAEjC,wBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC;QAExE,cAAS,GAAoC,IAAI,CAAC;QAElD,qBAAgB,GAAG,IAAI,CAAC;QAEf,eAAU,GAAG,aAAa,CAAC,kBAAkB,EAAE,WAAW,EAAE,gBAAgB,CAAC,CAAC;;QAE9E,qBAAgB,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KAiKlE;IA/JQ,MAAM,CAAC,QAAkC;QAC9C,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;;;;;QAM1B,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC;KAC/D;IAEM,MAAM;QACX,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;KACvB;IAEM,iBAAiB;QACtB,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC7B;KACF;IAEM,mBAAmB,MAAW;IAC9B,iBAAiB,MAAW;IAC5B,uBAAuB,MAAW;;;;IAKlC,cAAc,CAAC,IAAU;QAC9B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC1B;;;;IAKM,aAAa,CAAC,KAAa,EAAE,QAAwB;QAC1D,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,EAAE,QAAQ,CAAC,CAAC;SACzE;KACF;;;;IAKM,YAAY,CAAC,IAAU,EAAE,QAAyB;QACvD,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,QAAQ,CAAC,CAAC;SACvE;KACF;;;;IAKO,oBAAoB;QAC1B,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,OAAO;SACR;;;QAID,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,IAAI,CAAC,YAAY,EAAE;gBACrB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aACtC;YAED,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;SAC/B;QAED,MAAM,mBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE,CAAC;QACjE,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC;QACnF,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;QACtD,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC;QAClD,MAAM,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,CAAC;;;;QAKvE,MAAM,eAAe,GAAG,mBAAmB,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAA;QAEnF,IAAI,QAAQ,GAAG,YAAY,CAAC;QAC5B,IAAI,MAAM,GAAG,UAAU,CAAC;QAExB,IAAI,eAAe,GAAG,aAAa,IAAI,YAAY,KAAK,CAAC,EAAE;;YAEzD,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,GAAG,aAAa,GAAG,CAAC,CAAC,CAAC,CAAA;YACxF,MAAM,GAAG,IAAI,CAAC,GAAG,CACf,UAAU,EACV,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,GAAG,YAAY,GAAG,aAAa,CAAC,CAC5E,CAAC;SACH;aAAM;YACL,MAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,GAAG,mBAAmB,GAAG,YAAY,CAAC;YAEpG,IAAI,kBAAkB,GAAG,aAAa,IAAI,UAAU,KAAK,UAAU,EAAE;gBACnE,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,GAAG,aAAa,CAAC,CAAC,CAAC;gBAErF,MAAM,GAAG,IAAI,CAAC,GAAG,CACf,UAAU;;gBAEV,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,GAAG,YAAY,GAAG,aAAa,GAAG,CAAC,CAAC,CAChF,CAAC;aACH;SACF;QAED,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC;QAClE,IAAI,CAAC,SAAS,CAAC,wBAAwB,CAAC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC;QAE3E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;KACtC;IAEO,kBAAkB,CAAC,KAAa;QACtC,MAAM,KAAK,GAAG,KAAK,GAAG,EAAE,CAAC;QACzB,MAAM,IAAI,GAAG,CAAC,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;QAElC,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KACzC;IAEO,kBAAkB,CAAC,MAAc;;QAEvC,MAAM,SAAS,GAAG,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC;QACjD,MAAM,kBAAkB,GAAI,CAAC,MAAM,GAAG,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC;QACzE,MAAM,KAAK,GAAG,kBAAkB,GAAG,EAAE,CAAC;QAEtC,IAAI,iBAAiB,GAAG,CAAC,CAAC;;QAG1B,KAAK,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE;YACxD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBACjE,iBAAiB,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC;gBAElD,IAAI,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,SAAS,EAAE;oBACpE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,GAAG,KAAK,EAAE,CAAC,CAAC,CAAC;iBACjD;aACF;SACF;QAED,OAAO,oBAAoB,CAAC;KAC7B;IAEO,iBAAiB,CAAC,IAAU;QAClC,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,CAAC,CAAC;SACV;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAChC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC9B,MAAM,KAAK,GAAG,CAAC,IAAI,GAAG,gBAAgB,IAAI,EAAE,GAAG,KAAK,CAAC;QAErD,OAAO,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;KACvC;;IAGO,cAAc,CAAC,IAAY,EAAE,KAAc;QACjD,MAAM,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;QAC5B,MAAM,eAAe,GAAG,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;QACvE,MAAM,UAAU,GAAG,CAAC,IAAI,GAAG,SAAS,IAAI,EAAE,CAAC;QAC3C,MAAM,gBAAgB,GAAG,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAE5D,OAAO,gBAAgB,GAAG,eAAe,CAAC;KAC3C;;oHA5KU,sBAAsB;wHAAtB,sBAAsB;4FAAtB,sBAAsB;kBADlC,UAAU;;;MClBE,oBAAqB,SAAQ,UAAgB;IAQxD;QACE,KAAK,EAAE,CAAC;QAPF,kBAAa,GAAW,EAAE,CAAC;QAC3B,kBAAa,GAAG,IAAI,GAAG,EAAU,CAAC;QAEzB,gBAAW,GAAG,IAAI,eAAe,CAAS,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9D,kBAAa,GAAG,IAAI,YAAY,EAAE,CAAC;QAKlD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KAC3C;IAEM,OAAO,CAAC,gBAAkC;QAC/C,MAAM,GAAG,GAAG,gBAAgB;aACzB,UAAU;aACV,SAAS,CAAC,CAAC,KAAK;YACf,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC7C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aACpB;SACF,CAAC,CAAC;QAEL,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAE5B,OAAO,IAAI,CAAC,WAAW,CAAC;KACzB;IAED,UAAU;QACR,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;KAClC;IAEO,UAAU,CAAC,IAAY;QAC7B,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAChC,OAAO;SACR;QAED,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAE7B,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;QACzC,MAAM,WAAW,GAAG,IAAI,GAAG,EAAE,CAAC;QAE9B,MAAM,KAAK,GAAG,IAAI,IAAI,CACpB,UAAU,GAAG,gBAAgB,EAC7B,WAAW,EACX,CAAC,CACF,CAAC;QAEF,IAAI,CAAC,aAAa,CAAC,MAAM,CACvB,IAAI,EACJ,CAAC,EACD,KAAK,CACN,CAAC;QAEF,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;KAC3C;IAEO,kBAAkB;QACxB,IAAI,CAAC,aAAa,GAAG,KAAK;aACvB,IAAI,CACH,EAAC,MAAM,EAAE,oBAAoB,GAAG,EAAE,EAAE;QACpC,CAAC,CAAC,EAAE,CAAC;YACH,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,gBAAgB,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;SACnE,CACF,CAAC;KAEL;;;AC7EH,IAAY,cAMX;AAND,WAAY,cAAc;IACxB,+BAAa,CAAA;IACb,uCAAqB,CAAA;IACrB,+BAAa,CAAA;IACb,+BAAa,CAAA;IACb,2CAAyB,CAAA;AAC3B,CAAC,EANW,cAAc,KAAd,cAAc;;SCGV,eAAe,CAAC,OAAa,EAAE,OAAa,EAAE,OAAe,EAAE,OAAe;IAC5F,MAAM,MAAM,GAAG,EAAE,CAAC;IAElB,IAAI,OAAO,EAAE;QACX,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC;QAC3C,MAAM,EAAE,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC;QAE7B,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;KACzB;IAED,IAAI,OAAO,EAAE;QACX,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;KACjE;IAED,OAAO,MAAM,CAAC;AAChB;;SCdgB,gBAAgB,CAAC,KAAkB,EAAE,GAAmB;IACtE,IAAI,CAAC,GAAG,EAAE;QAAE,OAAM;KAAE;IAEpB,MAAM,GAAG,GAAG,EAAE,CAAC;IACf,IACE,CAAC,GAAG,CAAC,IAAI,KAAK,MAAM,IAAI,GAAG,CAAC,SAAS;SACpC,GAAG,CAAC,IAAI,KAAK,UAAU,IAAI,GAAG,CAAC,SAAS,IAAI,KAAK,IAAI,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,EACtF;QACA,MAAM,IAAI,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,UAAU,EAAE,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;QAC9E,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;KACrB;IAED,OAAO,GAAG,CAAC;AACb;;MCKa,uBAAuB;IAqClC,YACE,aAAoC;;;;;;QA/B/B,aAAQ,GAAG,IAAI,CAAC;QAChB,YAAO,GAAG,IAAI,CAAC;QACf,YAAO,GAAG,IAAI,CAAC;QACf,eAAU,GAAG,IAAI,CAAC;QAClB,aAAQ,GAAG,IAAI,CAAC;QAChB,gBAAW,GAAG,IAAI,CAAC;QACnB,YAAO,GAAG,IAAI,CAAC;QAEd,aAAQ,GAAG,IAAI,CAAC;QAChB,aAAQ,GAAG,IAAI,CAAC;QAIhB,YAAO,GAAG,IAAI,eAAe,CAAc,IAAI,CAAC,CAAC;QACjD,aAAQ,GAAG,IAAI,eAAe,CAAiB,IAAI,CAAC,CAAC;QAErD,UAAK,GAAG,IAAI,eAAe,CAAO,IAAI,IAAI,EAAE,CAAC,CAAC;QAE9C,mBAAc,GAAG,IAAI,eAAe,CAAiB,EAAE,CAAC,CAAC;QACzD,oBAAe,GAAG,IAAI,eAAe,CAAiB,EAAE,CAAC,CAAC;QAC1D,mBAAc,GAAG,IAAI,eAAe,CAAO,IAAI,CAAC,GAAG,CAAC,CAAC;QACrD,mBAAc,GAAG,IAAI,eAAe,CAAS,MAAM,CAAC,CAAC;QACrD,mBAAc,GAAG,IAAI,eAAe,CAAU,KAAK,CAAC,CAAC;;;;;QAMrD,WAAM,GAAG,IAAI,eAAe,CAAS,MAAM,CAAC,CAAC;QAKnD,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QAClC,IAAI,CAAC,eAAe,EAAE,CAAC;KACxB;IAED,IAAW,GAAG;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;KACzB;IAED,IAAW,YAAY,CAAC,KAAW;QACjC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACjC;IAED,IAAW,YAAY;QACrB,OAAO,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;KAClC;IAED,IAAW,aAAa;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;IAED,IAAW,KAAK;QACd,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;KACnC;IAED,IAAW,IAAI;QACb,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;KAC1B;IAED,IAAW,IAAI,CAAC,IAAI;QAClB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACxB;IAED,IAAW,UAAU;QACnB,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,CAAC;KAC1C;IAED,IAAW,cAAc;QACvB,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,QAAQ,CAAC;KAC9C;IAED,IAAW,UAAU;QACnB,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,CAAC;KAC1C;IAED,IAAW,UAAU;QACnB,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,CAAC;KAC1C;IAED,IAAW,gBAAgB;QACzB,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,UAAU,CAAC;KAChD;IAED,IAAW,aAAa;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;IAED,IAAW,YAAY;QACrB,OAAO,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;KAClC;IAED,IAAW,KAAK,CAAC,KAAkB;QACjC,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;YAClB,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,EAAE;gBACtC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;aAC3B;;;;;;YAOD,IAAI,IAAI,CAAC,cAAc;mBAClB,IAAI,CAAC,cAAc,CAAC,SAAS,KAAK,IAAI;mBACtC,CAAC,IAAI,CAAC,KAAK;mBACX,KAAK,EACR;gBACA,IAAI,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;oBAClD,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;iBACjD;aACF;SACF;aAAM;YACL,KAAK,GAAG,IAAI,CAAC;SACd;QAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEzB,IAAI,CAAC,oBAAoB,EAAE,CAAC;KAC7B;IAED,IAAW,KAAK;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;KAC3B;IAED,IAAW,MAAM;QACf,OAAO,IAAI,CAAC,OAAO,CAAC;KACrB;IAED,IAAW,MAAM,CAAC,KAAqB;QACrC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC3B;IAED,IAAW,MAAM;QACf,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;KAC5B;IAED,IAAW,OAAO;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC;KACtB;IAED,IAAW,YAAY,CAAC,KAAqB;QAC3C,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACjC;IAED,IAAW,aAAa;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;IAED,IAAW,aAAa,CAAC,KAAqB;QAC5C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAClC;IAED,IAAW,cAAc;QACvB,OAAO,IAAI,CAAC,eAAe,CAAC;KAC7B;IAED,IAAW,OAAO,CAAC,OAAO;QACxB,IAAI,CAAC,QAAQ,GAAG,OAAO,KAAK,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,GAAG,GAAG,CAAC,CAAC;KAC7D;IAED,IAAW,OAAO;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC;KACtB;IAED,IAAW,OAAO,CAAC,OAAO;QACxB,IAAI,CAAC,QAAQ,GAAG,OAAO,KAAK,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,GAAG,GAAG,CAAC,CAAC;KAC7D;IAED,IAAW,OAAO;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC;KACtB;IAED,IAAY,aAAa,CAAC,KAAa;QACrC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACjC;IAED,IAAW,aAAa;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;KAC3C;IAED,IAAW,YAAY;QACrB,OAAO,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;KAClC;IAED,IAAW,YAAY,CAAC,IAAa;QACnC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAChC;IAED,IAAW,cAAc;QACvB,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC;KACtC;IAEM,gBAAgB,CAAC,KAAa;QACnC,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;KACxD;IAEM,eAAe,CAAC,IAAY;QACjC,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,eAAe,EAAE,CAAC;KACxB;IAEM,SAAS;QACd,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;KACrD;IAEM,SAAS;QACd,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;KACrD;IAEM,eAAe,CAAC,IAAY;QACjC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;KAC3B;IAEO,aAAa,CAAC,OAA8B;;QAClD,IAAI,CAAC,cAAc,qBAAQ,OAAO,CAAE,CAAC;QAErC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;QAEzB,QAAQ,IAAI,CAAC,IAAI;YACf,KAAK,cAAc,CAAC,IAAI;gBAAE;oBACxB,IAAI,CAAC,MAAM,GAAI,OAAO,CAAC,UAAsB,CAAC;oBAC9C,IAAI,CAAC,YAAY,GAAG,CAAA,MAAC,OAAO,CAAC,UAAsB,0CAAE,IAAI,KAAI,IAAI,IAAI,EAAE,CAAC;iBACzE;gBAAC,MAAM;YAER,KAAK,cAAc,CAAC,UAAU;gBAAE;oBAC9B,IAAI,CAAC,YAAY,GAAI,OAAO,CAAC,UAAmB,IAAI,IAAI,IAAI,EAAE,CAAC;iBAChE;gBAAC,MAAM;YAER,SAAS;gBACP,IAAI,CAAC,KAAK,GAAI,OAAO,CAAC,UAAmB,CAAC;gBAC1C,IAAI,CAAC,YAAY,GAAI,OAAO,CAAC,UAAmB,IAAI,IAAI,IAAI,EAAE,CAAC;aAChE;SACF;QAED,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,IAAI,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;QACrC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,KAAK,SAAS;cACxC,IAAI;cACJ,OAAO,CAAC,OAAO,CAAC;QAGpB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YAC3D,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;SAC5D;aAAM;YACL,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;SAClC;QAED,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;QAEvC,IAAI,CAAC,mBAAmB,EAAE,CAAC;KAC5B;IAEO,eAAe;QACrB,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,oBAAoB,EAAE,CAAC;KAC7B;IAEO,mBAAmB;QACzB,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE;YACjC,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC1C,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;aAC7F;SACF;aAAM;YACL,IAAI,CAAC,YAAY,GAAG,eAAe,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAC7F;KACF;IAEO,oBAAoB;QAC1B,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;QAE7B,IAAI,UAAU,KAAK,cAAc,CAAC,QAAQ,IAAI,UAAU,KAAK,cAAc,CAAC,IAAI,EAAE;YAChF,OAAO;SACR;QAED,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE;YACjC,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,KAAK,IAAI,EAAE;gBAC1C,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;aAClF;SACF;aAAM;YACL,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;SAClF;KACF;;;AC5TI,MAAMA,QAAM,GAAG;IACpB,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE;IACzC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE;IAC1C,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE;IACrC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE;IACxC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,EAAE,MAAM,EAAE;IAC5C,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE;IACzC,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE;IAC3C,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE;CAC5C;;SCRe,eAAe,CAAC,IAAU,EAAE,YAA4B;IACtE,MAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;IACtC,MAAM,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;IAElC,OAAO,eAAe,CAAC,YAAY,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;AAC7D;;MC8Ba,iCAAiC;IAuC5C,YACU,MAAkB;QAAlB,WAAM,GAAN,MAAM,CAAY;QAtBrB,gBAAW,GAAG,IAAI,YAAY,EAAU,CAAC;QAGzC,eAAU,GAAG,IAAI,YAAY,EAAU,CAAC;QAGxC,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGvC,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGvC,mBAAc,GAAG,IAAI,YAAY,EAAU,CAAC;QAEnC,QAAG,GAAG,IAAI,IAAI,EAAE,CAAC;QACjB,aAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC/B,YAAO,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;QAE1C,cAAS,GAAoB,EAAE,CAAC;QAChC,cAAS,GAAqB,EAAE,CAAC;KAIpC;IAEJ,IAAW,aAAa;;QACtB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,QAAQ,EAAE,CAAC;KACtC;IAED,IAAW,YAAY;;QACrB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,WAAW,EAAE,CAAC;KACzC;IAED,IAAW,WAAW;;QACpB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,OAAO,EAAE,CAAC;KACrC;IAEM,WAAW,CAAC,OAAsB;KACxC;IAEM,eAAe;QACpB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,gBAAgB,EAAE,CAAC;KACzB;IAEM,WAAW,CAAC,KAAa;QAC9B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE7B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC1B;IAEM,UAAU,CAAC,IAAY;QAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC1B;IAEM,WAAW,CAAC,IAAY;QAC7B,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE/B,IAAI,IAAI,KAAK,MAAM,EAAE;YACnB,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;KACF;IAEM,SAAS;QACd,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KACzB;IAEM,SAAS;QACd,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KACzB;IAEO,gBAAgB;QACtB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,KAAK,IAAI,CAAC,GAAW,IAAI,CAAC,OAAO,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE;YACxD,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACzE;KACF;IAEO,iBAAiB;QACvB,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;QAE7E,MAAM,oBAAoB,GAAG,CAAC,WAAmB,EAAE,YAAY;YAC7D,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;YACzB,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACxB,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAE5B,OAAO,eAAe,CAAC,KAAK,EAAE,YAAY,CAAC,CAAA;SAC5C,CAAA;QAED,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,KAAK,MAAM,IAAI,IAAIA,QAAM,EAAE;YACzB,MAAM,SAAS,mCACV,IAAI,KACP,QAAQ,EAAE,oBAAoB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,GAC9D,CAAA;YAED,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAChC;KACF;IAEO,eAAe,CAAC,IAAI;QAC1B,MAAM,SAAS,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;QACpC,MAAM,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QAEhC,OAAO,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;KAC/D;IAEO,qBAAqB;QAC3B,UAAU,CAAC;YACT,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAChE,MAAM,QAAQ,GAAG,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;YAEvD,IAAI,QAAQ,EAAE;gBACZ,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;aACtC;SACF,EAAE,EAAE,CAAC,CAAC;KACR;;+HA3IU,iCAAiC;mHAAjC,iCAAiC,4XCxC9C,w2BA2BA;4FDaa,iCAAiC;kBAR7C,SAAS;mBAAC;oBACT,QAAQ,EAAE,8BAA8B;oBACxC,WAAW,EAAE,yBAAyB;oBACtC,SAAS,EAAE;wBACT,yBAAyB;qBAC1B;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;iGAIQ,QAAQ;sBADd,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,YAAY;sBADlB,KAAK;gBAIC,YAAY;sBADlB,KAAK;gBAIC,WAAW;sBADjB,MAAM;gBAIA,UAAU;sBADhB,MAAM;gBAIA,WAAW;sBADjB,MAAM;gBAIA,WAAW;sBADjB,MAAM;gBAIA,cAAc;sBADpB,MAAM;;;MErDI,2CAA2C;IAStD,YACU,MAAkB;QAAlB,WAAM,GAAN,MAAM,CAAY;KACxB;;yIAXO,2CAA2C;6HAA3C,2CAA2C,wIChBxD,0aAeA;4FDCa,2CAA2C;kBARvD,SAAS;mBAAC;oBACT,QAAQ,EAAE,0CAA0C;oBACpD,WAAW,EAAE,qCAAqC;oBAClD,SAAS,EAAE;wBACT,qCAAqC;qBACtC;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;iGAIQ,SAAS;sBADf,KAAK;gBAIC,OAAO;sBADb,KAAK;;;MEiCK,0CAA0C;IA0BrD,YACU,GAAe,EACf,eAAuC,EAEvC,eAA+C;QAH/C,QAAG,GAAH,GAAG,CAAY;QACf,oBAAe,GAAf,eAAe,CAAwB;QAEvC,oBAAe,GAAf,eAAe,CAAgC;QAxBlD,cAAS,GAAG,IAAI,CAAC;QAcjB,eAAU,GAAG,IAAI,oBAAoB,EAAE,CAAC;QAIvC,cAAS,GAAG,IAAI,OAAO,EAAQ,CAAC;KAOpC;IAEJ,IAAW,SAAS;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;IAED,IAAW,cAAc;QACvB,OAAO,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC;KAC5C;IAEM,QAAQ;QACb,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,IAAI,IAAI,IAAI,EAAE,CAAC,CAAC;QAC9E,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;KACF;IAEM,WAAW,CAAC,OAAsB;;QACvC,IAAI,CAAA,MAAA,OAAO,CAAC,eAAe,0CAAE,YAAY;gBACpC,MAAA,OAAO,CAAC,eAAe,0CAAE,WAAW,CAAA;eACpC,IAAI,CAAC,eAAe,CAAC,IAAI,KAAK,YAAY,EAAE;YAC/C,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;KACF;IAEM,WAAW;QAChB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;KAC3B;IAEM,WAAW,CAAC,IAAI;QAErB,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,KAAK,YAAY,EAAE;YAC9C,IAAI,CAAC,eAAe,CAAC,KAAK,GAAG,IAAI,CAAC;YAClC,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;aAAM;YACL,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;SAC7B;KACF;IAEM,gBAAgB,CAAC,IAAI;QAC1B,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;QACrC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,QAAQ,CAAC;QAExC,IAAI,CAAC,SAAS,IAAI,CAAC,OAAO,EAAE;YAC1B,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;SAChC;aAAM,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YAChC,IAAI,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;gBAC7B,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBAC/B,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aAC9B;iBAAM;gBACL,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aAC9B;SACF;aAAM,IAAI,SAAS,IAAI,OAAO,EAAE;YAC/B,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YAC/B,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SAC9B;KACF;IAEM,KAAK;QACV,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;SAChC;KACF;IAEM,gBAAgB,CAAC,WAAmB;QACzC,IAAI,CAAC,kBAAkB,GAAG,WAAW,CAAC;KACvC;IAEO,qBAAqB;QAC3B,MAAM,WAAW,GAAG,SAAS,CAC3B,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,aAAa,EAC3C,YAAY,CACb,CAAC;QAEF,MAAM,SAAS,GAAG,SAAS,CACzB,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,aAAa,EAC3C,UAAU,CACX,CAAC;QAEF,MAAM,kBAAkB,GAAG,EAAE,CAAC;QAE9B,WAAW;aACR,IAAI,CACH,SAAS,CAAC,MAAM,SAAS,CAAC,EAC1B,SAAS,CAAC,MACR,IAAI,CACF,IAAI,CAAC,aAAa,CAAC,eAAe,EAAE,EACpC,KAAK,CAAC,kBAAkB,CAAC,CAC1B,CAAC,IAAI,CACJ,YAAY,CAAC,kBAAkB,GAAG,CAAC,CAAC,EACpC,IAAI,CAAC,CAAC,CAAC,EACP,SAAS,CAAC,WAAW,CAAC,CACvB,CACF,EACD,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC;YACT,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC;SACrE,CAAC,CAAA;KACL;IAEO,qBAAqB;QAC3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe;aACnC,cAAc;aACd,UAAU;aACV,IAAI,CACH,WAAW,EAAE,CACd,CAAC;QAEJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe;aACjC,cAAc;aACd,QAAQ;aACR,IAAI,CACH,WAAW,EAAE,CACd,CAAC;KACL;IAEO,qBAAqB;QAC3B,IAAI,CAAC,cAAc,CAAC,mBAAmB;aACpC,IAAI,CACH,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,KAAK,IAAI,CAAC,cAAc,CAAC,EAChD,KAAK,CAAC,CAAC,CAAC,EACR,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC;YACT,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,IAAI,IAAI,IAAI,EAAE,CAAC,CAAC;SAC7E,CAAC,CAAC;KACN;;wIAjKU,0CAA0C,+EA6B3C,uBAAuB;4HA7BtB,0CAA0C,2MAP1C;QACT;YACE,OAAO,EAAE,uBAAuB;YAChC,QAAQ,EAAE,sBAAsB;SACjC;KACF,yEAgBU,wBAAwB,mFCpErC,uoDAyCA;4FDaa,0CAA0C;kBAZtD,SAAS;mBAAC;oBACT,QAAQ,EAAE,sCAAsC;oBAChD,WAAW,EAAE,0CAA0C;oBACvD,SAAS,EAAE,CAAC,0CAA0C,CAAC;oBACvD,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAC/C,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,uBAAuB;4BAChC,QAAQ,EAAE,sBAAsB;yBACjC;qBACF;iBACF;;0BA8BI,MAAM;2BAAC,uBAAuB;4CA1B1B,eAAe;sBADrB,KAAK;gBAIC,SAAS;sBADf,KAAK;gBAIC,cAAc;sBADpB,KAAK;gBAIC,cAAc;sBADpB,KAAK;gBAIC,aAAa;sBADnB,SAAS;uBAAC,wBAAwB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;;;MEnD1C,2BAA2B;IAWtC,YACU,YAA+B;QAA/B,iBAAY,GAAZ,YAAY,CAAmB;QANlC,cAAS,GAAG,IAAI,CAAC;QAGjB,oBAAe,GAAG,IAAI,CAAC;KAK7B;IAEM,WAAW,CAAC,IAAI;QACrB,IAAI,CAAC,eAAe,CAAC,KAAK,GAAG,IAAI,CAAC;KACnC;IAEM,KAAK;QACV,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;SAC7B;KACF;;yHAxBU,2BAA2B;6GAA3B,2BAA2B,mLCjBxC,+WASA;4FDQa,2BAA2B;kBANvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,iCAAiC;oBAC3C,WAAW,EAAE,8BAA8B;oBAC3C,SAAS,EAAE,CAAC,8BAA8B,CAAC;oBAC3C,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;0GAIQ,eAAe;sBADrB,KAAK;gBAIC,SAAS;sBADf,KAAK;gBAIC,eAAe;sBADrB,KAAK;;;MEXK,wCAAwC;IANrD;QAYS,cAAS,GAAG,IAAI,YAAY,EAAU,CAAC;KAM/C;IAJQ,yBAAyB,CAAC,KAAa;QAC5C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC5B;;sIAVU,wCAAwC;0HAAxC,wCAAwC,iKCdrD,i1CAmCA;4FDrBa,wCAAwC;kBANpD,SAAS;mBAAC;oBACT,QAAQ,EAAE,sCAAsC;oBAChD,WAAW,EAAE,mCAAmC;oBAChD,SAAS,EAAE,CAAC,mCAAmC,CAAC;oBAChD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAIQ,eAAe;sBADrB,KAAK;gBAIC,SAAS;sBADf,MAAM;;;MEFI,+BAA+B;IAM1C,YAEU,KAAU,EACV,eAAuC;QADvC,UAAK,GAAL,KAAK,CAAK;QACV,oBAAe,GAAf,eAAe,CAAwB;QAP1C,wBAAmB,GAAG,CAAC,CAAC;QAS7B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;KAC5C;IAED,IAAW,eAAe;QACxB,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;KACpC;IAED,IAAW,SAAS;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;IAEM,gBAAgB;QACrB,IAAI,CAAC,eAAe,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;KACxE;IAEM,yBAAyB,CAAC,KAAK;QACpC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;KAClC;IAEM,KAAK;QACV,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;KAChC;IAEM,kBAAkB,CAAC,KAAa;QACrC,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;KAClC;;6HApCU,+BAA+B,kBAOhC,qBAAqB;iHAPpB,+BAA+B,oDCjB5C,ymEA2DA;4FD1Ca,+BAA+B;kBAL3C,SAAS;mBAAC;oBACT,WAAW,EAAE,gCAAgC;oBAC7C,SAAS,EAAE,CAAC,gCAAgC,CAAC;oBAC7C,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAQI,MAAM;2BAAC,qBAAqB;;;MEhBpB,sBAAsB;IAAnC;QAEU,uBAAkB,GAAG,IAAI,eAAe,CAAwC,IAAI,CAAC,CAAC;KA2C/F;IAzCC,IAAW,QAAQ;QACjB,OAAO,IAAI,CAAC,kBAAkB;aAC3B,IAAI,CACH,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,EACtB,SAAS,CAAC,CAAC,GAAG;YACZ,IAAI,GAAG,YAAY,UAAU,EAAE;gBAC7B,OAAO,KAAK,CACV,GAAG,CAAC,WAAW,EAAE,EACjB,GAAG,CAAC,aAAa,EAAE,CACpB,CAAC;aACH;iBAAM;gBACL,OAAO,KAAK,CACV,GAAG,CAAC,cAAc,EAAE,EACpB,GAAG,CAAC,aAAa,EAAE,CACpB,CAAC;aACH;SACF,CAAC,CACH,CAAC;KACL;IAED,IAAW,gBAAgB;QACzB,OAAO,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;KAC3C;IAEM,gBAAgB,CAAC,GAAmC;QACzD,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACnC;IAEM,KAAK;;QACV,IAAI,IAAI,CAAC,gBAAgB,YAAY,UAAU,EAAE;YAC/C,MAAA,IAAI,CAAC,gBAAgB,0CAAE,MAAM,EAAE,CAAC;YAChC,MAAA,IAAI,CAAC,gBAAgB,0CAAE,OAAO,EAAE,CAAC;SAClC;QAED,IAAI,IAAI,CAAC,gBAAgB,YAAY,iBAAiB,EAAE;YACtD,MAAA,IAAI,CAAC,gBAAgB,0CAAE,OAAO,EAAE,CAAC;SAClC;QAED,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;KAC7B;;;MCtCU,qBAAqB;IAmBhC,YACU,cAAqC;QAArC,mBAAc,GAAd,cAAc,CAAuB;QAlBvC,gBAAW,GAAG,IAAI,sBAAsB,EAAE,CAAC;QAE3C,YAAO,GAAG,IAAI,OAAO,EAAQ,CAAC;;;;QAM9B,uBAAkB,GAAkC;YAC1D,aAAa,EAAE,KAAK;YACpB,WAAW,EAAE,KAAK;YAClB,SAAS,EAAE,KAAK;YAChB,OAAO,EAAE,KAAK;SACf,CAAC;QAEM,gBAAW,GAAkC,IAAI,CAAC;QAKxD,IAAI,CAAC,KAAK,EAAE,CAAC;KACd;IAED,IAAW,WAAW;QACpB,OAAO,IAAI,CAAC,YAAY,CAAC;KAC1B;IAED,IAAW,OAAO;QAChB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;IAED,IAAW,MAAM;QACf,OAAO,IAAI,CAAC,OAAO,CAAC;KACrB;IAED,IAAW,gBAAgB;QACzB,OAAO,IAAI,CAAC,WAAW,CAAC;KACzB;IAED,IAAW,MAAM;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;KACpC;IAED,IAAI,UAAU;QACZ,OAAO,IAAI,CAAC,WAAW,CAAC;KACzB;IAEM,WAAW,CAAC,KAAK;QACtB,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC;KACjC;IAEM,KAAK;QACV,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;QAC9B,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;KACzB;IAEO,KAAK;QACX,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;IAEO,UAAU;QAChB,IAAI,CAAC,YAAY,GAAG,IAAI,uBAAuB,CAC7C,IAAI,CAAC,cAAc,CACpB,CAAC;QAEF,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;IAEO,UAAU;QAChB,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,MAAM,EAAE;YAChC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO;iBACrC,IAAI,CACH,IAAI,CAAC,CAAC,CAAC,CACR,CAAC;SACL;aAAM;YACL,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM;iBACpC,IAAI,CACH,IAAI,CAAC,CAAC,CAAC,CACR,CAAC;SACL;KACF;IAEO,eAAe;QACrB,MAAM,KAAK,mCACN,IAAI,CAAC,kBAAkB,GACvB,IAAI,CAAC,cAAc,CAAC,UAAU,IAAI,EAAE,CACxC,CAAC;QACF,MAAM,QAAQ,qBAAQ,KAAK,CAAE,CAAC;QAC9B,MAAM,SAAS,GAAG,EAAE,CAAC;QAErB,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;YACvF,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAChC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAC/B;QAED,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;YACjE,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC5B,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC3B;QAED,OAAO,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,KAAK;YAC5B,QAAQ,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC;SAClE,CAAC,CAAC;;QAGH,IAAI,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,EAAE;YAC5B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC1B;KACF;;;AC7HI,MAAM,MAAM,GAAG;IACpB,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE;IACzC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE;IAC1C,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE;IACrC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE;IACvC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE;IACxC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,EAAE,MAAM,EAAE;IAC5C,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE;IACzC,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE;IAC3C,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,KAAK,EAAE;CAC5C;;MCcY,iCAAiC;IAkC5C,YACS,OAAmB,EAClB,MAAyB,EACzB,SAAoB,EAEpB,SAAS;QAJV,YAAO,GAAP,OAAO,CAAY;QAClB,WAAM,GAAN,MAAM,CAAmB;QACzB,cAAS,GAAT,SAAS,CAAW;QAEpB,cAAS,GAAT,SAAS,CAAA;QAfZ,YAAO,GAAG,IAAI,YAAY,EAAQ,CAAC;QAEnC,UAAK,GAAU,EAAE,CAAC;QAClB,WAAM,GAAU,EAAE,CAAC;QAKnB,WAAM,GAAG,CAAC,CAAC;KAQd;IAEG,QAAQ;QACb,MAAM,UAAU,GAAS,IAAI,CAAC,KAAK,CAAC;QAEpC,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,IAAI,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE;YACrC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;SAC3B;aAAM;YAEL,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;YAExB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;aACjB;YAED,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACnB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aAClB;YAED,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAClB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aACrB;YAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SACrB;QAED,IAAI,CAAC,qBAAqB,EAAE,CAAC;KAC9B;IAEM,WAAW;QAChB,IAAI,CAAC,qBAAqB,EAAE,CAAC;KAC9B;IAEO,QAAQ,CAAC,IAAU;QACzB,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YAC1B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YAC/B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;SAC9B;KACF;IAEO,SAAS,CAAC,KAAK;QACrB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI;YAC1B,OAAO,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC;SAC7B,CAAC,CAAC;KACJ;IAEM,MAAM;QACX,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;SAC/C;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;SACnC;QAED,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;YACb,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;SACd;QAED,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACpE,IAAI,IAAI,CAAC,GAAG,GAAG,WAAW,EAAE;YAC1B,IAAI,CAAC,GAAG,GAAG,WAAW,CAAC;SACxB;QAED,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QAEvD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;KAC5B;IAEM,WAAW;QAChB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,MAAM,EAAE,CAAC;KACf;IAEM,UAAU;QACf,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC5B;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;KACf;IAEO,kBAAkB;QACxB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,MAAM,MAAM,GAAG,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE,CAAC;QAC5C,MAAM,QAAQ,GAAG,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC;QAC/C,MAAM,OAAO,GAAG,OAAO,IAAI,OAAO,CAAC,WAAW,EAAE,CAAC;QAEjD,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,MAAM,IAAI,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,OAAO,KAAK,IAAI,CAAC,IAAI,EAAE;gBACnE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;aACtB;iBAAM;gBACL,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;gBACpE,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC;aAC3B;SACF;QAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;SAClB;KACF;IAEO,mBAAmB;QACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACtB;IAEO,mBAAmB;QACzB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC3B,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAE3B,IAAI,CAAC,OAAO,EAAE;YACZ,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;YACzB,OAAO,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;SAC/B;QAEA,KAAM,OAAO,EAAE,OAAO,IAAI,OAAO,EAAE,OAAO,EAAE,EAAG;YAC7C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;SACpD;KACH;IAEO,qBAAqB;QAC3B,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,wCAAwC,CAAC,CAAC;KACxF;IAEO,qBAAqB;QAC3B,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,wCAAwC,CAAC,CAAC;KAC3F;;+HA7KU,iCAAiC,sGAsClC,QAAQ;mHAtCP,iCAAiC,wPC3B9C,2qBA4BM;4FDDO,iCAAiC;kBAN7C,SAAS;mBAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,WAAW,EAAE,qCAAqC;oBAClD,SAAS,EAAE,CAAC,qCAAqC,CAAC;oBAClD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAuCI,MAAM;2BAAC,QAAQ;4CAnCX,KAAK;sBADX,KAAK;gBAIC,SAAS;sBADf,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,QAAQ;sBADd,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,MAAM;;;MErCI,kCAAkC;IAI7C,YACY,UAAiC;QAAjC,eAAU,GAAV,UAAU,CAAuB;KACzC;IAEJ,IAAW,SAAS;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;IAEM,MAAM,CAAC,IAAiB;QAC7B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;KACnB;IAEM,KAAK,CAAC,IAAI,GAAG,KAAK;QACvB,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACzC;QAED,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;KACzB;;gIAtBU,kCAAkC;oHAAlC,kCAAkC,oDCb/C,g7BAkBA;4FDLa,kCAAkC;kBAL9C,SAAS;mBAAC;oBACT,WAAW,EAAE,6CAA6C;oBAC1D,SAAS,EAAE,CAAC,6CAA6C,CAAC;oBAC1D,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;;MEIY,uCAAuC;IAMlD,YAEU,KAAU,EACV,eAAuC;QADvC,UAAK,GAAL,KAAK,CAAK;QACV,oBAAe,GAAf,eAAe,CAAwB;QAE/C,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,aAAa,CAAC;KACvC;IAED,IAAW,SAAS;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;IAEM,MAAM,CAAC,IAAiB;QAC7B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;KACnB;IAEM,KAAK,CAAC,IAAI,GAAG,KAAK;QACvB,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACzC;QAED,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;KAChC;;qIA5BU,uCAAuC,kBAOxC,qBAAqB;yHAPpB,uCAAuC,oDChBpD,+hCA2BA;4FDXa,uCAAuC;kBALnD,SAAS;mBAAC;oBACT,WAAW,EAAE,mDAAmD;oBAChE,SAAS,EAAE,CAAC,mDAAmD,CAAC;oBAChE,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAQI,MAAM;2BAAC,qBAAqB;;;MENpB,qCAAqC;IARlD;QAiBS,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGvC,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;KAqB/C;IAnBC,IAAW,aAAa;;QACtB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,QAAQ,EAAE,CAAC;KACtC;IAED,IAAW,YAAY;;QACrB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,WAAW,EAAE,CAAC;KACzC;IAED,IAAW,WAAW;;QACpB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,OAAO,EAAE,CAAC;KACrC;IAEM,SAAS;QACd,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KACzB;IAEM,SAAS;QACd,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KACzB;;mIAhCU,qCAAqC;uHAArC,qCAAqC,8NCjBlD,6jBAuBA;4FDNa,qCAAqC;kBARjD,SAAS;mBAAC;oBACT,QAAQ,EAAE,mCAAmC;oBAC7C,WAAW,EAAE,qCAAqC;oBAClD,SAAS,EAAE;wBACT,qCAAqC;qBACtC;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAIQ,YAAY;sBADlB,KAAK;gBAIC,gBAAgB;sBADtB,KAAK;gBAIC,WAAW;sBADjB,MAAM;gBAIA,WAAW;sBADjB,MAAM;;;MERI,2BAA2B;IActC,iBAAgB;IAET,WAAW,CAAC,OAAsB;;QACvC,IACE,CAAA,MAAA,OAAO,CAAC,eAAe,0CAAE,YAAY;gBAClC,MAAA,OAAO,CAAC,eAAe,0CAAE,WAAW,CAAA;eACpC,IAAI,CAAC,eAAe,CAAC,IAAI,KAAK,YAAY,EAC7C;YACA,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC9B;KACF;IAEM,eAAe,CAAC,IAAY;QACjC,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;KAC5C;IAEM,YAAY,CAAC,KAAa;QAC/B,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;KAC9C;IAEM,WAAW,CAAC,IAAY;QAC7B,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;KAC5C;IAEM,SAAS;QACd,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC;KAClC;IAEM,SAAS;QACd,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC;KAClC;IAEM,WAAW,CAAC,IAAI;QACrB,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC;QACrD,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,QAAQ,CAAC;QAExC,IAAI,CAAC,SAAS,IAAI,CAAC,OAAO,EAAE;YAC1B,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;SAChC;aAAM,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YAChC,IAAI,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;gBAC7B,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBAC/B,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aAC9B;iBAAM;gBACL,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aAC9B;SACF;aAAM,IAAI,SAAS,IAAI,OAAO,EAAE;YAC/B,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YAC/B,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SAC9B;KACF;IAEM,aAAa,CAAC,IAAI;QACvB,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,KAAK,EAAE,CAAC;KACd;IAEM,WAAW,CAAC,IAAI;QACrB,IAAI,CAAC,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC;KACtC;IAEM,KAAK;QACV,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;KACxB;IAEO,qBAAqB;QAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC;QAC5D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa;aACzD,IAAI,CACH,GAAG,CAAC,CAAC,KAAK,KAAK,KAAK,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,CACrD,CAAC;QAEJ,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe;aACnC,cAAc;aACd,UAAU;aACV,IAAI,CACH,WAAW,EAAE,CACd,CAAC;QAEJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe;aACjC,cAAc;aACd,QAAQ;aACR,IAAI,CACH,WAAW,EAAE,CACd,CAAC;KACL;;yHAnGU,2BAA2B;6GAA3B,2BAA2B,qKCpBxC,8oEAsDA;4FDlCa,2BAA2B;kBANvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,kCAAkC;oBAC5C,WAAW,EAAE,qCAAqC;oBAClD,SAAS,EAAE,CAAC,qCAAqC,CAAC;oBAClD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;0EAIQ,SAAS;sBADf,KAAK;gBAIC,eAAe;sBADrB,KAAK;;;MEeK,2BAA2B;IAuCtC,YACU,MAAkB;QAAlB,WAAM,GAAN,MAAM,CAAY;QAtBrB,gBAAW,GAAG,IAAI,YAAY,EAAU,CAAC;QAGzC,eAAU,GAAG,IAAI,YAAY,EAAU,CAAC;QAGxC,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGvC,gBAAW,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGvC,mBAAc,GAAG,IAAI,YAAY,EAAU,CAAC;QAEnC,QAAG,GAAG,IAAI,IAAI,EAAE,CAAC;QACjB,aAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC/B,YAAO,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;QAE1C,cAAS,GAAoB,EAAE,CAAC;QAChC,cAAS,GAAqB,EAAE,CAAC;KAIpC;IAEJ,IAAW,aAAa;;QACtB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,QAAQ,EAAE,CAAC;KACtC;IAED,IAAW,YAAY;;QACrB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,WAAW,EAAE,CAAC;KACzC;IAED,IAAW,WAAW;;QACpB,OAAO,MAAA,IAAI,CAAC,YAAY,0CAAE,OAAO,EAAE,CAAC;KACrC;IAEM,WAAW,CAAC,OAAsB;KACxC;IAEM,eAAe;QACpB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,gBAAgB,EAAE,CAAC;KACzB;IAEM,WAAW,CAAC,KAAa;QAC9B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE7B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC1B;IAEM,UAAU,CAAC,IAAY;QAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC1B;IAEM,WAAW,CAAC,IAAY;QAC7B,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE/B,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,sBAAsB,EAAE,CAAC;KAC/B;IAEM,SAAS;QACd,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KACzB;IAEM,SAAS;QACd,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;KACzB;IAEO,gBAAgB;QACtB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,KAAK,IAAI,CAAC,GAAW,IAAI,CAAC,OAAO,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE;YACxD,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACzE;KACF;IAEO,iBAAiB;QACvB,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;QAE7E,MAAM,oBAAoB,GAAG,CAAC,WAAmB,EAAE,YAAY;YAC7D,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;YACzB,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACxB,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAE5B,OAAO,eAAe,CAAC,KAAK,EAAE,YAAY,CAAC,CAAA;SAC5C,CAAA;QAED,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,KAAK,MAAM,IAAI,IAAIA,QAAM,EAAE;YACzB,MAAM,SAAS,mCACV,IAAI,KACP,QAAQ,EAAE,oBAAoB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,GAC9D,CAAA;YAED,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAChC;KACF;IAEO,eAAe,CAAC,IAAI;QAC1B,MAAM,SAAS,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;QACpC,MAAM,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QAEhC,OAAO,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;KAC/D;IAEO,qBAAqB;QAC3B,UAAU,CAAC;YACT,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAChE,MAAM,QAAQ,GAAG,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;YAEvD,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,cAAc,CAAC,EAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAC,CAAC,CAAC;aAC9D;SACF,CAAC,CAAC;KACJ;IAEO,sBAAsB;QAC5B,UAAU,CAAC;YACT,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;YACjE,MAAM,QAAQ,GAAG,KAAK,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;YAExD,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,cAAc,CAAC,EAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAC,CAAC,CAAC;aAC9D;SACF,CAAC,CAAC;KACJ;;yHArJU,2BAA2B;6GAA3B,2BAA2B,qXCxCxC,yuDAwDA;4FDhBa,2BAA2B;kBARvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,WAAW,EAAE,yBAAyB;oBACtC,SAAS,EAAE;wBACT,yBAAyB;qBAC1B;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;iGAIQ,QAAQ;sBADd,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,YAAY;sBADlB,KAAK;gBAIC,YAAY;sBADlB,KAAK;gBAIC,WAAW;sBADjB,MAAM;gBAIA,UAAU;sBADhB,MAAM;gBAIA,WAAW;sBADjB,MAAM;gBAIA,WAAW;sBADjB,MAAM;gBAIA,cAAc;sBADpB,MAAM;;;MExDI,4BAA4B;IAUvC;QAFO,uBAAkB,GAAG,KAAK,CAAC;KAElB;IAET,eAAe,CAAC,IAAY;QACjC,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;KAC5C;IAEM,YAAY,CAAC,KAAa;QAC/B,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;KAC9C;IAEM,WAAW,CAAC,IAAY;QAC7B,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;KAC5C;IAEM,SAAS;QACd,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC;KAClC;IAEM,SAAS;QACd,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC;KAClC;IAEM,WAAW,CAAC,IAAI;QACrB,IAAI,CAAC,eAAe,CAAC,KAAK,GAAG,IAAI,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE;YAC5E,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;KACF;IAEM,aAAa,CAAC,IAAI;QACvB,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,KAAK,EAAE,CAAC;KACd;IAEM,gBAAgB;QACrB,IAAI,CAAC,kBAAkB,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC;KACpD;IAEM,WAAW,CAAC,IAAI;QACrB,IAAI,CAAC,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC;KACtC;IAEM,KAAK;QACV,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;KACxB;;0HAxDU,4BAA4B;8GAA5B,4BAA4B,gJCbzC,imFA+DA;4FDlDa,4BAA4B;kBANxC,SAAS;mBAAC;oBACT,QAAQ,EAAE,kCAAkC;oBAC5C,WAAW,EAAE,8BAA8B;oBAC3C,SAAS,EAAE,CAAC,8BAA8B,CAAC;oBAC3C,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;0EAIQ,SAAS;sBADf,KAAK;gBAIC,eAAe;sBADrB,KAAK;;;MENK,gCAAgC;IAE3C,YACY,UAAiC;QAAjC,eAAU,GAAV,UAAU,CAAuB;KACzC;IAEJ,IAAW,eAAe;QACxB,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;KACpC;IAED,IAAW,SAAS;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;;8HAZU,gCAAgC;kHAAhC,gCAAgC,oDCZ7C,wwCAwBA;4FDZa,gCAAgC;kBAL5C,SAAS;mBAAC;oBACT,WAAW,EAAE,iCAAiC;oBAC9C,SAAS,EAAE,CAAC,iCAAiC,CAAC;oBAC9C,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;;AE0BD,MAAM,iBAAiB,GAAG,oBAAoB,CAAC;MAIlC,yBAAyB;IAKpC,YACU,QAAiB,EACjB,mBAAuC,EACvC,YAA4B,EAE5B,SAAS;QAJT,aAAQ,GAAR,QAAQ,CAAS;QACjB,wBAAmB,GAAnB,mBAAmB,CAAoB;QACvC,iBAAY,GAAZ,YAAY,CAAgB;QAE5B,cAAS,GAAT,SAAS,CAAA;QAPX,uBAAkB,GAAG,KAAK,CAAC;KAQ/B;IAEJ,IAAY,eAAe;QACzB,OAAO,SAAS,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC;aACxC,IAAI,CACH,MAAM,CAAC,CAAC,KAAU;YAChB,OAAO,KAAK,CAAC,IAAI,KAAK,QAAQ,CAAC;SAChC,CAAC,CACH,CAAA;KACJ;IAGM,cAAc,CACnB,EAAc,EACd,QAAkB,EAClB,OAA8B;QAE9B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,MAAM,aAAa,GAAG,IAAI,qBAAqB,CAAC,OAAO,CAAC,CAAC;QAEzD,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;QAEtD,OAAO,aAAa,CAAC;KACtB;IAEM,oBAAoB,CACzB,EAAc,EACd,QAAkB,EAClB,OAA8B;QAE9B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QAEvB,MAAM,aAAa,GAAG,IAAI,qBAAqB,CAAC,OAAO,CAAC,CAAC;QAEzD,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;QAExD,OAAO,aAAa,CAAC;KACtB;IAEO,eAAe,CACrB,QAAkB,EAClB,IAAuB,EACvB,SAAgC;QAEhC,MAAM,aAAa,GAAG,IAAI,CAAC,mBAAmB;aAC3C,OAAO,CAAC;YACP,iBAAiB;SAClB,CAAC;aACD,IAAI,CACH,GAAG,CAAC,CAAC,MAAM;YACT,OAAO,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;SAC9C,CAAC,CACH,CAAC;QAEJ,aAAa;aACV,IAAI,CACH,GAAG,CAAC,CAAC,MAAM;YACT,OAAO,IAAI,CAAC,wBAAwB,CAClC,MAAM,EACN,QAAQ,EACR,IAAI,EACJ,SAAS,CACV,CAAC;SACH,CAAC,EACF,GAAG,CAAC,CAAC,GAAG;YACN,SAAS,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;SAClD,CAAC,EACF,IAAI,CAAC,CAAC,CAAC,EACP,SAAS,CAAC;YACR,OAAO,aAAa;iBACjB,IAAI,CACH,IAAI,CAAC,CAAC,CAAC,CACR,CAAA;SACJ,CAAC,EACF,YAAY,CAAC,GAAG,CAAC,EACjB,oBAAoB,EAAE,EACtB,GAAG,CAAC;YACF,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;SAChC,CAAC,EACF,GAAG,CAAC;YACF,SAAS,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;SACpC,CAAC,EACF,GAAG,CAAC,CAAC,MAAM;YACT,OAAO,IAAI,CAAC,wBAAwB,CAClC,MAAM,EACN,QAAQ,EACR,IAAI,EACJ,SAAS,CACV,CAAC;SACH,CAAC,EACF,GAAG,CAAC,CAAC,GAAG;YACN,SAAS,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;SAClD,CAAC,EACF,GAAG,CAAC;YACF,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;SACjC,CAAC,EACF,QAAQ,CAAC;YACP,SAAS,CAAC,KAAK,EAAE,CAAC;SACnB,CAAC,EACF,SAAS,CACP,SAAS,CAAC,gBAAgB,CAAC,QAAQ;aAChC,IAAI,CACH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CACvC,CACJ,EACD,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,EAC3B,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAChC;aACA,SAAS,EAAE,CAAC;KAChB;IAEO,wBAAwB,CAC9B,MAAe,EACf,QAAkB,EAClB,IAAuB,EACvB,SAAgC;QAEhC,IAAI,MAAM,EAAE;YACV,IAAI,IAAI,KAAK,MAAM,EAAE;gBACnB,OAAO,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;aAC9C;iBAAM;gBACL,OAAO,IAAI,CAAC,2BAA2B,CAAC,SAAS,CAAC,CAAC;aACpD;SACF;aAAM;YACL,IAAI,IAAI,KAAK,MAAM,EAAE;gBACnB,OAAO,IAAI,CAAC,sBAAsB,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;aACzD;iBAAM;gBACL,OAAO,IAAI,CAAC,4BAA4B,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;aAC/D;SACF;KACF;IAEO,cAAc,CAAC,EAAc,EAAE,SAAwB,EAAE;QAC/D,MAAM,mCACD,MAAM,KACT,gBAAgB,EAAE,IAAI,CAAC,4BAA4B,CAAC,EAAE,CAAC,EACvD,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAE,EAC3D,WAAW,EAAE,IAAI,EACjB,aAAa,EAAE,EAAE,EACjB,UAAU,EAAE,4BAA4B,GACzC,CAAC;QAEF,MAAM,aAAa,GAAG,IAAI,aAAa,CAAC,MAAM,CAAC,CAAC;QAEhD,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;KAC5C;IAEO,eAAe,CACrB,cAAwB,EACxB,UAAiC;QAEjC,MAAM,eAAe,GAAG,IAAI,OAAO,CAAW;YAC5C,CAAC,qBAAqB,EAAE,UAAU,CAAC;SACpC,CAAC,CAAC;QAEH,OAAO,IAAI,cAAc,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;KAC5D;IAEO,4BAA4B,CAAC,EAAc;QACjD,OAAO,IAAI,CAAC,gCAAgC,CAAC,EAAE,CAAC;aAC7C,aAAa,CAAC;YACb;gBACE,OAAO,EAAE,OAAO;gBAChB,OAAO,EAAE,QAAQ;gBACjB,QAAQ,EAAE,OAAO;gBACjB,QAAQ,EAAE,KAAK;gBACf,OAAO,EAAE,EAAE;gBACX,OAAO,EAAE,CAAC,EAAE;aACb;YACD;gBACE,OAAO,EAAE,KAAK;gBACd,OAAO,EAAE,KAAK;gBACd,QAAQ,EAAE,OAAO;gBACjB,QAAQ,EAAE,QAAQ;aACnB;YACD;gBACE,OAAO,EAAE,KAAK;gBACd,OAAO,EAAE,KAAK;gBACd,QAAQ,EAAE,OAAO;gBACjB,QAAQ,EAAE,QAAQ;aACnB;YACD;gBACE,OAAO,EAAE,KAAK;gBACd,OAAO,EAAE,QAAQ;gBACjB,QAAQ,EAAE,OAAO;gBACjB,QAAQ,EAAE,QAAQ;aACnB;YACD;gBACE,OAAO,EAAE,OAAO;gBAChB,OAAO,EAAE,QAAQ;gBACjB,QAAQ,EAAE,KAAK;gBACf,QAAQ,EAAE,KAAK;gBACf,OAAO,EAAE,CAAC,EAAE;aACb;YACD;gBACE,OAAO,EAAE,OAAO;gBAChB,OAAO,EAAE,QAAQ;gBACjB,QAAQ,EAAE,KAAK;gBACf,QAAQ,EAAE,QAAQ;gBAClB,OAAO,EAAE,CAAC,EAAE;aACb;SACF,CAAC,CAAC;KACN;IAEO,gCAAgC,CAAC,EAAc;QACrD,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;aAC5B,mBAAmB,CAAC,EAAE,CAAC;aACvB,iBAAiB,CAAC,KAAK,CAAC;aACxB,sBAAsB,CAAC,KAAK,CAAC;aAC7B,QAAQ,CAAC,KAAK,CAAC,CAAA;KACnB;IAEO,sBAAsB,CAC5B,cAAwB,EACxB,UAAiC;QAEjC,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CACpC,IAAI,CAAC,YAAY,EACjB;YACE,gBAAgB,EAAE,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,YAAY,CAAC;SAC3E,CACF,CAAC;QACF,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;QAClE,MAAM,eAAe,GAAG,IAAI,eAAe,CAAC,gCAAgC,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;QACnG,UAAU,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAEnC,OAAO,UAAU,CAAC;KACnB;IAGO,qBAAqB,CAAC,SAAgC;QAC5D,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,+BAA+B,EAAE;YAC7D,IAAI,EAAE;gBACJ,aAAa,EAAE,SAAS;aACzB;YACD,YAAY,EAAE,KAAK;SACpB,CAAC,CAAC;KACJ;IAEO,4BAA4B,CAClC,cAAwB,EACxB,UAAiC;QAEjC,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CACpC,IAAI,CAAC,YAAY,EACjB,EAAE,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAK,EAAE,EAAE,CAC3D,CAAC;QACF,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;QAClE,MAAM,eAAe,GAAG,IAAI,eAAe,CAAC,kCAAkC,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;QACrG,UAAU,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAEnC,OAAO,UAAU,CAAC;KACnB;IAGO,2BAA2B,CAAC,SAAgC;QAClE,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,uCAAuC,EAAE;YACrE,IAAI,EAAE;gBACJ,aAAa,EAAE,SAAS;aACzB;SACF,CAAC,CAAC;KACJ;;uHAjRU,yBAAyB,+GAS1B,QAAQ;2HATP,yBAAyB;4FAAzB,yBAAyB;kBADrC,UAAU;;0BAUN,MAAM;2BAAC,QAAQ;;;MCXP,wCAAwC;;sIAAxC,wCAAwC;uIAAxC,wCAAwC,iBAVjD,gCAAgC;QAChC,2BAA2B;QAC3B,4BAA4B;QAC5B,2BAA2B;QAC3B,qCAAqC,aAbrC,YAAY;QACZ,eAAe;QACf,aAAa;QAEb,0BAA0B;QAC1B,YAAY;QACZ,eAAe,aAUf,gCAAgC;uIAGvB,wCAAwC,YApB1C;YACP,YAAY;YACZ,eAAe;YACf,aAAa;YAEb,0BAA0B;YAC1B,YAAY;YACZ,eAAe;SAChB;4FAYU,wCAAwC;kBArBpD,QAAQ;mBAAC;oBACR,OAAO,EAAE;wBACP,YAAY;wBACZ,eAAe;wBACf,aAAa;wBAEb,0BAA0B;wBAC1B,YAAY;wBACZ,eAAe;qBAChB;oBACD,YAAY,EAAE;wBACZ,gCAAgC;wBAChC,2BAA2B;wBAC3B,4BAA4B;wBAC5B,2BAA2B;wBAC3B,qCAAqC;qBACtC;oBACD,OAAO,EAAE;wBACP,gCAAgC;qBACjC;iBACF;;;MCJY,6CAA6C;;2IAA7C,6CAA6C;4IAA7C,6CAA6C,iBATtD,kCAAkC;QAClC,uCAAuC;QACvC,iCAAiC,aAXjC,YAAY;QACZ,WAAW;QAEX,eAAe;QAEf,oBAAoB;QACpB,aAAa,aAQb,kCAAkC;QAClC,uCAAuC;4IAG9B,6CAA6C,YAnB/C;YACP,YAAY;YACZ,WAAW;YAEX,eAAe;YAEf,oBAAoB;YACpB,aAAa;SACd;4FAWU,6CAA6C;kBApBzD,QAAQ;mBAAC;oBACR,OAAO,EAAE;wBACP,YAAY;wBACZ,WAAW;wBAEX,eAAe;wBAEf,oBAAoB;wBACpB,aAAa;qBACd;oBACD,YAAY,EAAE;wBACZ,kCAAkC;wBAClC,uCAAuC;wBACvC,iCAAiC;qBAClC;oBACD,OAAO,EAAE;wBACP,kCAAkC;wBAClC,uCAAuC;qBACxC;iBACF;;;MCaY,uCAAuC;;qIAAvC,uCAAuC;sIAAvC,uCAAuC,iBAXhD,+BAA+B;QAC/B,iCAAiC;QACjC,2BAA2B;QAC3B,wCAAwC;QACxC,2CAA2C;QAC3C,0CAA0C,aAhB1C,YAAY;QACZ,aAAa;QACb,eAAe;QACf,aAAa;QAEb,0BAA0B;QAC1B,YAAY;QACZ,eAAe;QACf,aAAa,aAWb,+BAA+B;sIAGtB,uCAAuC,YAvBzC;YACP,YAAY;YACZ,aAAa;YACb,eAAe;YACf,aAAa;YAEb,0BAA0B;YAC1B,YAAY;YACZ,eAAe;YACf,aAAa;SACd;4FAaU,uCAAuC;kBAxBnD,QAAQ;mBAAC;oBACR,OAAO,EAAE;wBACP,YAAY;wBACZ,aAAa;wBACb,eAAe;wBACf,aAAa;wBAEb,0BAA0B;wBAC1B,YAAY;wBACZ,eAAe;wBACf,aAAa;qBACd;oBACD,YAAY,EAAE;wBACZ,+BAA+B;wBAC/B,iCAAiC;wBACjC,2BAA2B;wBAC3B,wCAAwC;wBACxC,2CAA2C;wBAC3C,0CAA0C;qBAC3C;oBACD,OAAO,EAAE;wBACP,+BAA+B;qBAChC;iBACF;;;MC9BY,wBAAwB;IACnC,OAAO,OAAO;QACZ,OAAO;YACL,QAAQ,EAAE,wBAAwB;YAClC,SAAS,EAAE;gBACT,yBAAyB;aAC1B;SACF,CAAC;KACH;;sHARU,wBAAwB;uHAAxB,wBAAwB,YALjC,wCAAwC;QACxC,6CAA6C;QAC7C,uCAAuC;uHAG9B,wBAAwB,YAN1B;YACP,wCAAwC;YACxC,6CAA6C;YAC7C,uCAAuC;SACxC;4FAEU,wBAAwB;kBAPpC,QAAQ;mBAAC;oBACR,OAAO,EAAE;wBACP,wCAAwC;wBACxC,6CAA6C;wBAC7C,uCAAuC;qBACxC;iBACF;;;SCXe,SAAS,CAAC,KAAa;IACrC,IAAI,UAAU,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;IAE7C,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE;QACvB,OAAO,UAAU,CAAC;KACnB;IAED,UAAU,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;IAEnC,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE;QACvB,OAAO,UAAU,CAAC;KACnB;IAED,OAAO,IAAI,CAAC;AACd;;MCMsB,yBAAyB;IAiE7C,YACE,QAAmB,EACnB,UAAsB,EACZ,MAAyB;QAAzB,WAAM,GAAN,MAAM,CAAmB;QA5C9B,YAAO,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGnC,cAAS,GAAG,IAAI,YAAY,EAAQ,CAAC;QAGrC,YAAO,GAAG,IAAI,YAAY,EAAQ,CAAC;QAInC,aAAQ,GAAG,KAAK,CAAC;QASjB,aAAQ,GAAG,KAAK,CAAC;QAEjB,WAAM,GAAG,KAAK,CAAC;QAQZ,WAAM,GAAG,IAAI,CAAC;QAId,cAAS,GAAG,IAAI,OAAO,EAAE,CAAC;QAE5B,cAAS,GAAG,CAAC,KAAU,QAAQ,CAAC;QAChC,aAAQ,GAAG,SAAS,CAAC;QACrB,uBAAkB,GAAG,SAAQ,CAAC;QAC9B,WAAM,GAAG,IAAI,CAAC;QACd,oBAAe,GAAG,KAAK,CAAC;;QA+JtB,oBAAe,GAAgB;YACvC,OAAO,IAAI,CAAC,eAAe;kBACvB,IAAI;kBACJ,EAAE,iBAAiB,EAAE,cAAc,EAAE,CAAC;SAC3C,CAAA;QAES,eAAU,GAAuB,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;QA9JpF,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;KAC9B;IA7DD,IACW,KAAK,CAAC,KAAc;QAC7B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;KACrB;IAED,IACW,QAAQ,CAAC,KAAa;QAC/B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;KACpC;IAeD,IACW,aAAa,CAAC,UAAkB;QACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,UAAU,IAAI,UAAU,KAAK,EAAE,CAAC;KACnD;IAOM,gBAAgB,CAAC,EAAuB,IAAU,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA,EAAE;IACvE,iBAAiB,CAAC,EAAa,IAAU,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAA,EAAE;IAC7D,yBAAyB,CAAC,EAAc,IAAU,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC,EAAE;IA0BjF,QAAQ;QACb,SAAS,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC;aAC1B,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC;YACT,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;SACjB,CAAC,CAAC;QAEH,SAAS,CAAC,IAAI,CAAC,EAAE,EAAE,SAAS,CAAC;aAC1B,IAAI,CACH,GAAG,CAAC,MAAM,IAAI,CAAC,KAAK,EAAE,CAAC,EACvB,MAAM,CAAC,CAAC,KAAoB,KAAK,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAChF,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC,CAAC,KAAoB;YAC9B,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE;gBACzB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;aACjC;YAED,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;SAChB,CAAC,CAAC;KACN;IAED,IAAW,EAAE;QACX,OAAO,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC;KACtC;IAED,IAAW,KAAK;QACd,OAAO,IAAI,CAAC,MAAM,CAAC;KACpB;IAED,IAAW,KAAK;QACd,OAAO,IAAI,CAAC,MAAM,CAAC;KACpB;IAED,IAAW,QAAQ;QACjB,OAAO,IAAI,CAAC,SAAS,CAAC;KACvB;IAED,IAAW,KAAK,CAAC,KAAK;QACpB,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE;YAC1B,KAAK,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9C;QAED,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAEpB,IAAI,CAAC,eAAe,GAAG,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;QAEhD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC/B;IAEM,UAAU,CAAC,GAAQ,KAAU;IAEpC,IAAW,aAAa;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;IAEM,OAAO,CAAC,KAAK;QAClB,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,KAAK,CAAC,cAAc,EAAE,CAAC;QAEvB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC3B;IAEM,WAAW;QAChB,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SAC5B;QAED,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;KAC3B;IAEM,gBAAgB,CAAC,UAAmB;QACzC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;QAE3B,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;KAC5B;IAEM,QAAQ,CAAC,CAAkB;QAChC,OAAO,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;KACpD;IAEM,IAAI;QACT,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,EAAE,qBAAqB,CAAC,CAAC;QAC7D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAEnB,IAAI,CAAC,cAAc,CAAC,MAAM;aACvB,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,EACrC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC,CAAC,KAAW;YACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC5B,CAAC,CAAC;QAEL,IAAI,CAAC,cAAc,CAAC,MAAM;aACvB,IAAI,CACH,IAAI,CAAC,CAAC,CAAC,EACP,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC;YACT,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,qBAAqB,CAAC,CAAC;YAChE,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;SAC5B,CAAC,CAAC;KACN;IAEM,UAAU;QACf,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC;KAC5C;IAEM,YAAY;QACjB,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QAChB,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC;QAEjB,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;IAES,WAAW,CAAC,IAAI;QACxB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3B,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC/B;IAES,WAAW;QACnB,UAAU,CAAC;YACT,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;SAC9D,CAAC,CAAC;KACJ;IAES,KAAK;QACb,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;SAC7B;KACF;IAWS,YAAY,CAAC,IAAoB;QACzC,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;KAC/C;IAGM,WAAW,CAAC,KAAoB,EAAE,KAAa;QACpD,IAAG,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE;YACxB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;KACF;IAGM,YAAY,CAAC,KAAa,EAAE,MAAM;;QACvC,IAAI,CAAA,MAAA,IAAI,CAAC,cAAc,0CAAE,QAAQ,MAAK,MAAM,EAAG;YAC7C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;KACF;IAGM,UAAU,CAAC,KAAa;;QAC7B,IAAI,CAAA,MAAA,IAAI,CAAC,cAAc,0CAAE,QAAQ,MAAK,MAAM,EAAG;YAC7C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC/B;IAES,WAAW,CAAC,KAAa;QACjC,IAAI,CAAC,CAAC,KAAK,EAAE;YACX,MAAM,iBAAiB,GAAG,IAAI,CAAC,eAAe,CAAC;YAC/C,MAAM,IAAI,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;YAE9B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAA;YAEvB,IAAI,CAACC,SAAO,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;gBAC/B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;aACxB;iBAAM,IAAI,iBAAiB,KAAK,IAAI,CAAC,eAAe,EAAE;gBACrD,IAAI,CAAC,kBAAkB,EAAE,CAAC;aAC3B;SACF;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SACxB;KACF;;uHAlRmB,yBAAyB;2GAAzB,yBAAyB;4FAAzB,yBAAyB;kBAD9C,SAAS;yJAMQ,cAAc;sBAA7B,KAAK;gBAOK,KAAK;sBADf,KAAK;gBAMK,QAAQ;sBADlB,KAAK;gBAQC,OAAO;sBADb,MAAM;uBAAC,QAAQ;gBAIT,SAAS;sBADf,MAAM;uBAAC,UAAU;gBAIX,OAAO;sBADb,MAAM;uBAAC,QAAQ;gBAKT,QAAQ;sBAFd,WAAW;uBAAC,yBAAyB;;sBACrC,WAAW;uBAAC,eAAe;gBAIjB,aAAa;sBADvB,KAAK;uBAAC,UAAU;gBAOV,QAAQ;sBAFd,WAAW;uBAAC,yBAAyB;;sBACrC,WAAW;uBAAC,eAAe;gBAiMrB,WAAW;sBADjB,YAAY;uBAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,qBAAqB,CAAC;gBAQjD,YAAY;sBADlB,YAAY;uBAAC,OAAO,EAAE,CAAC,qBAAqB,EAAE,eAAe,CAAC;gBAQxD,UAAU;sBADhB,YAAY;uBAAC,MAAM,EAAE,CAAC,qBAAqB,CAAC;;;SC3Q/B,mBAAmB,CAAC,KAAK,EAAE,QAAgB;IACzD,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;QAC3B,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QAExB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACnB,KAAK,GAAG,IAAI,CAAC;SACd;KACF;IAAC,IAAI,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QAC/C,KAAK,GAAG,IAAI,CAAA;KACb;IAED,IAAI,KAAK,IAAI,QAAQ,EAAE;QACrB,OAAO,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;KACxC;IAED,OAAO,KAAK,CAAC;AACf;;ACpBA,IAAY,oBAMX;AAND,WAAY,oBAAoB;IAC9B,qCAAa,CAAA;IACb,uCAAe,CAAA;IACf,qCAAa,CAAA;IACb,6CAAqB,CAAA;IACrB,+CAAuB,CAAA;AACzB,CAAC,EANW,oBAAoB,KAApB,oBAAoB;;SCWhB,cAAc,CAC5B,KAAK,EACL,aAAoD,cAAc,CAAC,IAAI,EACvE,gBAAgB,GAAG,EAAE,EACrB,QAAiB;IAGjB,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;QACnB,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;KACzB;SAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;QACpC,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QACxB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACnB,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SAC3B;KACF;IAED,IAAI,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;QAC3B,MAAM,OAAO,GAAG,EAAE,CAAC;QAEnB,IAAI,gBAAgB,EAAE;YACpB,OAAOC,QAAQ,CAAC,KAAK,EAAE,gBAAgB,EAAE,EAAE,QAAQ,EAAE,CAAC,CAAC;SACxD;aAAM;YAEL,IAAK;gBACH,cAAc,CAAC,IAAI;gBACnB,cAAc,CAAC,UAAU;gBACzB,cAAc,CAAC,QAAQ;aACV,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE;gBACzC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7B;YAED,IAAK,CAAC,cAAc,CAAC,IAAI,EAAE,cAAc,CAAC,QAAQ,CAAe,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE;gBAC3F,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;YAED,IAAI,UAAU,KAAK,oBAAoB,CAAC,QAAQ,EAAE;gBAChD,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAExB;iBAAM,IAAI,UAAU,KAAK,oBAAoB,CAAC,SAAS,EAAE;gBACxD,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aAE3B;iBAAM,IAAI,UAAU,KAAK,oBAAoB,CAAC,IAAI,EAAE;gBACnD,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAEtB;iBAAM,IAAI,UAAU,KAAK,oBAAoB,CAAC,KAAK,EAAE;gBACpD,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACtB;SACF;QAED,OAAO,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;KACzC;IAED,OAAO,EAAE,CAAC;AACZ;;MC3Ca,4BAA4B;IAWvC,YACqB,YAA0B,EACrC,EAAc;QADH,iBAAY,GAAZ,YAAY,CAAc;QACrC,OAAE,GAAF,EAAE,CAAY;QAJjB,UAAK,GAAG,IAAI,YAAY,EAAQ,CAAC;KAKpC;IAEJ,IAAW,UAAU;QACnB,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,CAAC;KAC1C;IAEM,eAAe;;QACpB,MAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,aAAa,CAAC;QAClE,MAAM,OAAO,GAAG,aAAa,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;QAErE,MAAA,aAAa;aACV,aAAa,CAAC,sBAAsB,CAAC,0CACpC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;KAC7D;IAEM,YAAY,CAAC,KAAc;QAChC,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;KACnB;;0HAjCU,4BAA4B;8GAA5B,4BAA4B,0ICrBzC,wVAUA;4FDWa,4BAA4B;kBANxC,SAAS;mBAAC;oBACT,QAAQ,EAAE,uBAAuB;oBACjC,WAAW,EAAE,oCAAoC;oBACjD,SAAS,EAAE,CAAE,oCAAoC,CAAE;oBACnD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAaI,QAAQ;qEATJ,QAAQ;sBADd,KAAK;gBAIC,IAAI;sBADV,KAAK;gBAIC,KAAK;sBADX,MAAM;;;MEYI,qBAAsB,SAAQ,yBAAyB;IAmBlE,YACgC,UAAsB,EAC1C,QAAmB,EACnB,QAAkB,EAClB,MAAyB,EACzB,mBAA8C;QAExD,KAAK,CAAC,QAAQ,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;QANN,eAAU,GAAV,UAAU,CAAY;QAC1C,aAAQ,GAAR,QAAQ,CAAW;QACnB,aAAQ,GAAR,QAAQ,CAAU;QAClB,WAAM,GAAN,MAAM,CAAmB;QACzB,wBAAmB,GAAnB,mBAAmB,CAA2B;QAjB1C,YAAO,GAAG,IAAI,CAAC;QACf,YAAO,GAAG,IAAI,CAAC;QACf,YAAO,GAAG,IAAI,CAAC;QACf,YAAO,GAAG,IAAI,CAAC;QACf,eAAU,GAAG,IAAI,CAAC;QAClB,SAAI,GAAG,cAAc,CAAC,IAAI,CAAC;QAE3B,YAAO,GAAG,IAAI,CAAC;QAGxB,YAAO,GAAG,IAAI,YAAY,EAAO,CAAC;KAUxC;IAEM,UAAU,CAAC,KAAU;QAC1B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,MAAM,GAAG,mBAAmB,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACxD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE7B,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;KAC5B;IAEM,WAAW,CAAC,KAAK;QACtB,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,KAAK,EAAE;YAC1B,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;SACrB;QAED,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KACpG;IAEM,IAAI;QACT,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,cAAc,EAAE;YACzD,OAAO;SACR;QAED,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAE3D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAC7D,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,QAAQ,EACb;YACE,UAAU,EAAE,UAAU;YACtB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,qBAAqB,EAAE;SACzC,CAAC,CAAC;QAEH,KAAK,CAAC,IAAI,EAAE,CAAC;KACd;IAES,WAAW,CAAC,KAAK;QACzB,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;YAC/E,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC;YAE3C,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC/B;QAED,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KAC1B;IAEO,qBAAqB;QAC3B,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;YACxB,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;SAC5B;aAAM;YACL,OAAO,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC;SAChC;KACF;;AAvFM,8BAAQ,GAAG;;;GAGjB,CAAC;mHALS,qBAAqB,kBAoBtB,UAAU;uGApBT,qBAAqB,mPAdrB;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,qBAAqB,CAAC;YACpD,KAAK,EAAE,IAAI;SACZ;QACD;YACE,OAAO,EAAE,aAAa;YACtB,WAAW,EAAE,UAAU,CAAC,MAAM,qBAAqB,CAAC;YACpD,KAAK,EAAE,IAAI;SACZ;KACF;4FAGU,qBAAqB;kBAjBjC,SAAS;mBAAC;oBACT,QAAQ,EAAE,gBAAgB;oBAC1B,QAAQ,EAAE,sBAAsB,QAAQ;oBACxC,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,2BAA2B,CAAC;4BACpD,KAAK,EAAE,IAAI;yBACZ;wBACD;4BACE,OAAO,EAAE,aAAa;4BACtB,WAAW,EAAE,UAAU,CAAC,2BAA2B,CAAC;4BACpD,KAAK,EAAE,IAAI;yBACZ;qBACF;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAqBI,MAAM;2BAAC,UAAU;gKAbJ,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,UAAU;sBAAzB,KAAK;gBACU,IAAI;sBAAnB,KAAK;gBACU,MAAM;sBAArB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBAGC,OAAO;sBADb,MAAM;uBAAC,QAAQ;;;MCjDL,2BAA2B;;yHAA3B,2BAA2B;6GAA3B,2BAA2B,+DAJ5B,IAAI;4FAIH,2BAA2B;kBANvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,yBAAyB;oBACnC,QAAQ,EAAE,IAAI;oBACd,SAAS,EAAE,CAAC,uCAAuC,CAAC;oBACpD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;;SCLe,UAAU,CAAC,SAAS,EAAE,OAAO;IAC3C,OAAO,WAAW,CAAC,SAAS,EAAE,YAAY,CAAC,KAAK,WAAW,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;AACrF;;MC0BsB,oBAAoB;IA+DxC,YACY,MAAkB,EAClB,SAAmB,EACnB,kBAA6C,EAC7C,KAAK,EACL,MAAyB,EACzB,UAAqB;QALrB,WAAM,GAAN,MAAM,CAAY;QAClB,cAAS,GAAT,SAAS,CAAU;QACnB,uBAAkB,GAAlB,kBAAkB,CAA2B;QAC7C,UAAK,GAAL,KAAK,CAAA;QACL,WAAM,GAAN,MAAM,CAAmB;QACzB,eAAU,GAAV,UAAU,CAAW;QAjE1B,SAAI,GAAG,cAAc,CAAC,IAAI,CAAC;QAG3B,YAAO,GAAW,IAAI,CAAC;QAGvB,YAAO,GAAW,IAAI,CAAC;QAGvB,YAAO,GAAS,IAAI,CAAC;QAGrB,YAAO,GAAS,IAAI,CAAC;QAGrB,UAAK,GAAG,IAAI,CAAC;QAOb,aAAQ,GAAG,KAAK,CAAC;QAsBjB,aAAQ,GAAG,KAAK,CAAC;QAGjB,YAAO,GAAQ,SAAQ,CAAC;QAIrB,cAAS,GAAG,IAAI,OAAO,EAAE,CAAC;QAM5B,oBAAe,GAAG,KAAK,CAAC;;QAgQtB,oBAAe,GAAgB;YACvC,OAAO,IAAI,CAAC,eAAe;kBACvB,IAAI;kBACJ,EAAE,iBAAiB,EAAE,cAAc,EAAE,CAAC;SAC3C,CAAA;QA1PC,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;KAC/D;IA7CD,IACW,aAAa,CAAC,UAAkB;QACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,UAAU,IAAI,UAAU,KAAK,EAAE,CAAC;KACnD;IAQD,IACW,QAAQ,CAAC,KAAa;QAC/B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;KACpC;IA+BD,IAAW,IAAI;QACb,OAAO,IAAI,CAAC,KAAK,CAAC;KACnB;IAED,IAAW,QAAQ;QACjB,OAAO,IAAI,CAAC,SAAS,CAAC;KACvB;IAED,IAAW,KAAK,CAAC,KAAK;QACpB,IAAI,IAAI,CAAC,MAAM,KAAK,KAAK,EAAE;YACzB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YAEpB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACrB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACrB;KACF;IAEM,QAAQ;QACb,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;QACxC,MAAM,UAAU,GAAG,OAAO,CAAC,SAAS;cAChC,CAAE,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC;cAC1C,IAAI,CAAC,eAAe,CAAC;QACzB,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QAClC,OAAO,CAAC,sBAAsB,EAAE,CAAC;KAClC;IAED,IAAW,KAAK;QACd,OAAO,IAAI,CAAC,MAAM,CAAC;KACpB;IAED,IAAW,aAAa;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC;KAC5B;IAEM,UAAU,CAAC,KAAK;QACrB,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAEtC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAE1B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAEzB,MAAM,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEtE,IAAI,CAAC,cAAc,MAAM,CAAC,cAAc,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE;YACjE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAE9B,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;SAC5B;KACF;IAEM,gBAAgB,CAAC,UAAmB;QACzC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;KAC5B;IAGM,IAAI;QACT,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;YACzD,OAAM;SACP;;QAID,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAC1D,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,SAAS,EACd;YACE,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,IAAI,CAAC,OAAO;YACnD,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,UAAU,EAAE,IAAI,CAAC,qBAAqB,EAAE;YACxC,UAAU,EAAE,IAAI,CAAC,KAAK;YACtB,SAAS,EAAE,IAAI,CAAC,UAAU;YAC1B,SAAS,EAAE,IAAI,CAAC,KAAK;SACtB,CACF,CAAC;QAEF,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAElC,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAEjC,IAAI,CAAC,cAAc,CAAC,MAAM;aACvB,IAAI,CACH,IAAI,CAAC,CAAC,CAAC,EACP,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC;YACT,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,YAAY,EAAE,CAAC;YAEpB,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;SAC5B,CAAC,CAAC;KACN;;;;;IAMM,qBAAqB,CAAC,KAAW;QACtC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;;KAEzB;IAEM,WAAW,CAAC,KAAK;QACtB,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE;YAC/E,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC;YAE3C,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC/B;QAED,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE9B,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE;YAC1B,KAAK,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9C;QAED,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;KACrB;IAEM,WAAW,CAAC,KAAK;QACtB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KAChG;IAGM,WAAW,CAAC,KAAoB,EAAE,KAAa;QACpD,IAAG,KAAK,CAAC,GAAG,KAAK,OAAO,EAAE;YACxB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;KACF;IAGM,YAAY,CAAC,KAAa,EAAE,MAAM;;QACvC,IAAI,CAAA,MAAA,IAAI,CAAC,cAAc,0CAAE,QAAQ,MAAK,MAAM,EAAG;YAC7C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;KACF;IAEM,WAAW,CAAC,KAAa;QAC9B,MAAM,iBAAiB,GAAG,IAAI,CAAC,eAAe,CAAC;QAC/C,MAAM,IAAI,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;QAE9B,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;QAE9C,IAAI,CAACD,SAAO,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;YAC/B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SACxB;aAAM,IAAI,iBAAiB,KAAK,IAAI,CAAC,eAAe,EAAE;YACrD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC;SAClD;KACF;IAGM,UAAU,CAAC,KAAa;;QAC7B,IAAI,CAAA,MAAA,IAAI,CAAC,cAAc,0CAAE,QAAQ,MAAK,MAAM,EAAG;YAC7C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC9B;IAEM,gBAAgB,CAAC,EAAE,IAAI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAG;IAC7C,iBAAiB,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,EAAE;IAE5C,YAAY;QACjB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAClC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;QAEnC,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;IAES,iBAAiB,CAAC,IAAiB;QAC3C,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,IAAI,CAAC;SACb;QAED,OAAO,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KACjD;IAES,qBAAqB;QAC7B,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;YACxB,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;SAC5B;aAAM;YACL,OAAO,EAAE,aAAa,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;SACnD;KACF;IAES,YAAY;QACpB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;KACvB;IAES,aAAa;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KAEtB;IAES,UAAU,CAAC,UAAuB;QAC1C,IAAI,CAAC,MAAM,GAAG,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE9B,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;KAC5B;IAES,yBAAyB;QACjC,IAAI,CAAC,cAAc,CAAC,MAAM;aACvB,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,EACrC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC,CAAC,KAAW;YACrB,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;SACnC,CAAC,CAAC;KACN;IAES,oBAAoB,CAAC,QAAQ,EAAE,SAAS;QAChD,MAAM,cAAc,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC;QACxG,MAAM,iBAAiB,GAAG,cAAc;eACnC,UAAU,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QAErC,OAAO,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;KAC5C;;;;IAKS,mBAAmB;QAC3B,IACE,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,UAAU;eACpC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC;eACjC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,EACrC;YACA,OAAO,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;SAC9C;QAED,OAAO,KAAK,CAAC;KACd;IASS,YAAY,CAAC,IAAoB;QACzC,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;KAC/C;IAES,kBAAkB,CAAC,MAA+B;QAC1D,OAAO,MAAM;aACV,IAAI,CACH,IAAI,CAAC,CAAC,CAAC,EACP,QAAQ,EAAE,EACV,MAAM,CAAC,CAAC,OAAmC;;YACzC,MAAM,SAAS,GAAG,MAAA,OAAO,CAAC,CAAC,CAAC,0CAAE,OAAO,EAAE,CAAC;YACxC,MAAM,QAAQ,GAAG,MAAA,OAAO,CAAC,CAAC,CAAC,0CAAE,OAAO,EAAE,CAAC;YAEvC,OAAO,SAAS,KAAK,QAAQ;mBACxB,CAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,OAAO,EAAE,MAAK,QAAQ,CAAC;SACzC,CAAC,EACF,GAAG,CAAC,CAAC,OAAO,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,CAC7B,CAAC;KACL;;kHArVmB,oBAAoB;sGAApB,oBAAoB;4FAApB,oBAAoB;kBADzC,SAAS;0OAKD,IAAI;sBADV,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;gBAIC,KAAK;sBADX,KAAK;gBAIC,MAAM;sBADZ,KAAK;gBAKC,QAAQ;sBAFd,WAAW;uBAAC,yBAAyB;;sBACrC,WAAW;uBAAC,eAAe;gBAIjB,aAAa;sBADvB,KAAK;uBAAC,UAAU;gBAKD,cAAc;sBAA7B,KAAK;gBAOK,QAAQ;sBADlB,KAAK;gBASC,QAAQ;sBAFd,WAAW;uBAAC,yBAAyB;;sBACrC,WAAW;uBAAC,eAAe;gBAoFrB,IAAI;sBADV,YAAY;uBAAC,OAAO;gBA2Ed,WAAW;sBADjB,YAAY;uBAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,qBAAqB,CAAC;gBAQjD,YAAY;sBADlB,YAAY;uBAAC,OAAO,EAAE,CAAC,qBAAqB,EAAE,eAAe,CAAC;gBAqBxD,UAAU;sBADhB,YAAY;uBAAC,MAAM,EAAE,CAAC,qBAAqB,CAAC;;;SCnQ/B,SAAS,CAAC,QAAc;IACtC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE;QACrB,OAAO,IAAI,CAAC;KACb;IAED,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;AACtC;;SCAgB,WAAW,CAAC,MAAM,EAAE,IAAI,EAAE,IAAoB;IAC5D,IAAI,SAAS,EAAE,OAAO,CAAC;IAEvB,IAAI,IAAI,KAAK,cAAc,CAAC,IAAI,EAAE;QAChC,IAAI,IAAI,EAAE;YACR,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;SAC7B;QAED,IAAI,MAAM,EAAE;YACV,OAAO,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;SAC7B;KACF;SAAM;QACL,SAAS,GAAG,IAAI,CAAC;QACjB,OAAO,GAAG,MAAM,CAAC;KAClB;IAED,IAAI,CAAC,SAAS,IAAI,CAAC,OAAO,EAAE;QAC1B,OAAO,IAAI,CAAC;KACb;IAED,IAAI,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,SAAS,EAAE,OAAO,CAAC,EAAE;QAC5G,OAAO,IAAI,CAAC;KACb;IAED,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,QAAQ,IAAI,IAAI,KAAK,cAAc,CAAC,IAAI,KAAKA,SAAO,CAAC,SAAS,EAAE,OAAO,CAAC,EAAE;QACrG,OAAO,IAAI,CAAC;KACb;IAED,OAAO,OAAO,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;AACrC;;MC7Ba,cAAc;IAWzB,YAAmB,IAAY;QAAZ,SAAI,GAAJ,IAAI,CAAQ;QATvB,2BAAsB,GAAG,KAAK,CAAC;QAC/B,yBAAoB,GAAG,KAAK,CAAC;QAE7B,gBAAW,GAAG,IAAI,eAAe,CAAc,IAAI,CAAC,CAAC;QACrD,cAAS,GAAG,IAAI,eAAe,CAAc,IAAI,CAAC,CAAC;QAEnD,eAAU,GAAS,IAAI,CAAC;QACxB,aAAQ,GAAS,IAAI,CAAC;KAEK;IAEnC,IAAW,SAAS;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC;KACxB;IAED,IAAW,OAAO;QAChB,OAAO,IAAI,CAAC,QAAQ,CAAC;KACtB;IAED,IAAW,UAAU;QACnB,OAAO,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;KACxC;IAED,IAAW,QAAQ;QACjB,OAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;KACtC;IAED,IAAW,qBAAqB;QAC9B,OAAO,IAAI,CAAC,sBAAsB,CAAC;KACpC;IAED,IAAW,mBAAmB;QAC5B,OAAO,IAAI,CAAC,oBAAoB,CAAC;KAClC;IAED,IAAW,YAAY;QACrB,OAAO,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAsB,CAAC,CAAC;KACjF;;;;;IAMM,eAAe,CAAC,KAAW;QAChC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QAEnC,IAAI,CAAC,CAAC,KAAK;gBACL,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,UAAU,CAAC,EACjF;YACA,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;SAC3B;QAED,IAAI,CAAC,UAAU,GAAG,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;QACnD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KACxC;;;;;IAMM,aAAa,CAAC,KAAW;QAC9B,IAAI,CAAC,CAAC,KAAK;gBACL,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,UAAU,CAAC,EACjF;YACA,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,QAAQ,GAAG,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;QACjD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAEjC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACpC;IAEM,eAAe,CAAC,KAAW;QAChC,IAAI,CAAC,CAAC,KAAK;gBACL,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,UAAU,CAAC,EACjF;YACA,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;SAC3B;QAED,OAAO,IAAI,CAAC,UAAU,KAAK,KAAK,CAAC;KAClC;IAEM,aAAa,CAAC,KAAW;QAC9B,IAAI,CAAC,CAAC,KAAK;gBACL,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,UAAU,CAAC,EACjF;YACA,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;SACzB;QAED,OAAO,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC;KAChC;;;;IAKM,sBAAsB;QAC3B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;KACrC;;;;IAKM,oBAAoB;QACzB,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;KACnC;;;;IAKM,OAAO,MAAK;;;MCnHR,yBAAyB;IAGpC;QAFQ,WAAM,GAAG,IAAI,GAAG,EAA0B,CAAC;KAGlD;IAEM,kBAAkB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI;QACzC,IAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAE1C,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;QAIxC,OAAO,SAAS,CAAC;KAClB;IAEM,sBAAsB,CAAC,IAAY;QACxC,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAExC,IAAI,SAAS,EAAE;YACb,SAAS,CAAC,sBAAsB,EAAE,CAAC;YAEnC,IAAI,CAAC,6BAA6B,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;SACrD;KACF;IAEM,oBAAoB,CAAC,IAAY;QACtC,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAExC,IAAI,SAAS,EAAE;YACb,SAAS,CAAC,oBAAoB,EAAE,CAAC;YAEjC,IAAI,CAAC,6BAA6B,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;SACrD;KACF;IAEM,gBAAgB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI;QACvC,IAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAE1C,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;QAIxC,OAAO,SAAS,CAAC;KAClB;IAEO,wBAAwB,CAAC,IAAY,EAAE,IAAY;QACzD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAC1B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;SACjD;KACF;IAEO,6BAA6B,CAAC,IAAI,EAAE,GAAG;QAC7C,IAAI,CAAC,GAAG,CAAC,qBAAqB,IAAI,CAAC,GAAG,CAAC,mBAAmB,EAAE;YAC1D,GAAG,CAAC,OAAO,EAAE,CAAC;YACd,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAC1B;KACF;;uHAzDU,yBAAyB;2HAAzB,yBAAyB;4FAAzB,yBAAyB;kBADrC,UAAU;;;MCkBW,wBAAyB,SAAQ,oBAAoB;IAEzE,YACY,MAAkB,EAClB,SAAmB,EACnB,kBAA6C,EAC7C,MAAyB,EACL,UAAqB,EAC3C,iBAA4C;QAEpD,KAAK,CAAC,MAAM,EAAE,SAAS,EAAE,kBAAkB,EAAE,MAAM,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;QAP/D,WAAM,GAAN,MAAM,CAAY;QAClB,cAAS,GAAT,SAAS,CAAU;QACnB,uBAAkB,GAAlB,kBAAkB,CAA2B;QAC7C,WAAM,GAAN,MAAM,CAAmB;QACL,eAAU,GAAV,UAAU,CAAW;QAC3C,sBAAiB,GAAjB,iBAAiB,CAA2B;KAGrD;IAEM,QAAQ;QACb,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,KAAK,CAAC,QAAQ,EAAE,CAAC;KAClB;IAEM,WAAW;QAChB,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzD,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;KAC3B;IAEM,cAAc;QACnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;KAC/F;IAEM,UAAU,CAAC,KAAK;;;QAGrB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO;SACR;QACD,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAExB,MAAM,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAE1F,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE;YACzF,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC7C;KACF;IAEM,OAAO,CAAC,KAAK;QAClB,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAEtB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC1B;;;;;IAMM,qBAAqB,CAAC,KAAW;QACtC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAExB,KAAK,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;KACpC;IAEM,WAAW,CAAC,KAAK;QACtB,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,EAAE;YACrC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;SAC3B;QAED,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAEvC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KAC1B;IAES,UAAU,CAAC,UAAuB;;QAC1C,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAE7B,MAAA,IAAI,CAAC,UAAU,0CAAE,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC9C;IAES,iBAAiB,CAAC,IAAiB;QAC3C,IAAI,GAAG,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAErC,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,IAAI,EAAE;YAC7C,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;SACzB;QAED,OAAO,IAAI,CAAC;KACb;;sHAxFmB,wBAAwB;0GAAxB,wBAAwB;4FAAxB,wBAAwB;kBAD7C,SAAS;;0BAQL,QAAQ;;0BAAI,IAAI;;;MCZR,gCAAiC,SAAQ,wBAAwB;IAL9E;;QAgBS,SAAI,GAAG,cAAc,CAAC,QAAQ,CAAC;KAOvC;IAhBC,IAAa,mBAAmB,CAAC,KAAK;QACpC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,yBAAyB,CAAC,KAAK;QAC1C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAKM,WAAW,CAAC,KAAK;QACtB,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAEvC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KAC1B;;8HAjBU,gCAAgC;kHAAhC,gCAAgC;4FAAhC,gCAAgC;kBAL5C,SAAS;mBAAC;oBACT,QAAQ,EAAE,mDAAmD;oBAC7D,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,mBAAmB;sBAA/B,KAAK;gBAIO,yBAAyB;sBAArC,KAAK;gBAKC,IAAI;sBADV,KAAK;;;MCHc,sBAAuB,SAAQ,oBAAoB;IAEvE,YACY,MAAkB,EAClB,SAAmB,EACnB,kBAA6C,EAC7C,MAAyB,EACL,UAAqB,EAC3C,iBAA4C;QAEpD,KAAK,CAAC,MAAM,EAAE,SAAS,EAAE,kBAAkB,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;QAP7D,WAAM,GAAN,MAAM,CAAY;QAClB,cAAS,GAAT,SAAS,CAAU;QACnB,uBAAkB,GAAlB,kBAAkB,CAA2B;QAC7C,WAAM,GAAN,MAAM,CAAmB;QACL,eAAU,GAAV,UAAU,CAAW;QAC3C,sBAAiB,GAAjB,iBAAiB,CAA2B;;QA8E5C,oBAAe,GAAgB;YACvC,OAAO,IAAI,CAAC,UAAU,CAAC,YAAY;kBAC/B,IAAI;kBACJ,EAAE,iBAAiB,EAAE,eAAe,EAAE,CAAC;SAC5C,CAAA;KA/EA;IAEM,QAAQ;QACb,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,4BAA4B,EAAE,CAAC;QAEpC,KAAK,CAAC,QAAQ,EAAE,CAAC;KAClB;IAEM,WAAW;QAChB,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvD,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;KAC3B;IAEM,cAAc;QACnB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;KAC7F;IAEM,UAAU,CAAC,KAAK;;;QAGrB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO;SACR;QAED,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAExB,MAAM,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAExF,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,EAAE;YACrF,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC3C;KACF;IAEM,OAAO,CAAC,KAAM;QACnB,IAAI,KAAK,EAAE;YACT,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;SACxB;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAEtB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC1B;;;;;IAMM,qBAAqB,CAAC,KAAK;QAChC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAExB,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;KACtD;IAEM,WAAW,CAAC,KAAW;QAC5B,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,EAAE;YACrC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAa,CAAC,CAAC;QAE7C,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KAC1B;IAES,UAAU,CAAC,UAAuB;;QAC1C,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAE7B,MAAA,IAAI,CAAC,UAAU,0CAAE,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC5C;IASS,iBAAiB,CAAC,IAAiB;QAC3C,IAAI,GAAG,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAErC,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC,IAAI,IAAI,IAAI,EAAE;YAC7C,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;SACvB;QAED,OAAO,IAAI,CAAC;KACb;IAES,4BAA4B;QACpC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;aAChD,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC,CAAC,KAAkB;YAC5B,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE;gBACjC,IAAI,CAAC,OAAO,EAAE,CAAC;aAChB;YAED,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;gBACtC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC;aAClD;YAED,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;SAC5B,CAAC,CAAC;KACN;;oHAvHmB,sBAAsB;wGAAtB,sBAAsB;4FAAtB,sBAAsB;kBAD3C,SAAS;;0BAQL,QAAQ;;0BAAI,IAAI;;;MCdR,8BAA+B,SAAQ,sBAAsB;IAL1E;;QAgBS,SAAI,GAAG,cAAc,CAAC,QAAQ,CAAC;KAEvC;IAXC,IAAa,iBAAiB,CAAC,KAAK;QAClC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,uBAAuB,CAAC,KAAK;QACxC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;;4HARU,8BAA8B;gHAA9B,8BAA8B;4FAA9B,8BAA8B;kBAL1C,SAAS;mBAAC;oBACT,QAAQ,EAAE,+CAA+C;oBACzD,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,iBAAiB;sBAA7B,KAAK;gBAIO,uBAAuB;sBAAnC,KAAK;gBAKC,IAAI;sBADV,KAAK;;;MCVK,4BAA6B,SAAQ,wBAAwB;IAL1E;;QAgBS,SAAI,GAAG,cAAc,CAAC,IAAI,CAAC;KAOnC;IAhBC,IAAa,eAAe,CAAC,KAAK;QAChC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,qBAAqB,CAAC,KAAK;QACtC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAKM,WAAW,CAAC,KAAK;QACtB,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAEvC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;KAC1B;;0HAjBU,4BAA4B;8GAA5B,4BAA4B;4FAA5B,4BAA4B;kBALxC,SAAS;mBAAC;oBACT,QAAQ,EAAE,2CAA2C;oBACrD,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,eAAe;sBAA3B,KAAK;gBAIO,qBAAqB;sBAAjC,KAAK;gBAKC,IAAI;sBADV,KAAK;;;MCVK,0BAA2B,SAAQ,sBAAsB;IALtE;;QAgBS,SAAI,GAAG,cAAc,CAAC,IAAI,CAAC;KAEnC;IAXC,IAAa,aAAa,CAAC,KAAK;QAC9B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,mBAAmB,CAAC,KAAK;QACpC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;;wHARU,0BAA0B;4GAA1B,0BAA0B;4FAA1B,0BAA0B;kBALtC,SAAS;mBAAC;oBACT,QAAQ,EAAE,uCAAuC;oBACjD,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,aAAa;sBAAzB,KAAK;gBAIO,mBAAmB;sBAA/B,KAAK;gBAKC,IAAI;sBADV,KAAK;;;MCZK,4BAA6B,SAAQ,wBAAwB;IAExE,IAAa,eAAe,CAAC,KAAK;QAChC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,qBAAqB,CAAC,KAAK;QACtC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;;0HARU,4BAA4B;8GAA5B,4BAA4B;4FAA5B,4BAA4B;kBALxC,SAAS;mBAAC;oBACT,QAAQ,EAAE,2CAA2C;oBACrD,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,eAAe;sBAA3B,KAAK;gBAIO,qBAAqB;sBAAjC,KAAK;;;MCNK,0BAA2B,SAAQ,sBAAsB;IAEpE,IAAa,aAAa,CAAC,KAAK;QAC9B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,mBAAmB,CAAC,KAAK;QACpC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;;wHARU,0BAA0B;4GAA1B,0BAA0B;4FAA1B,0BAA0B;kBALtC,SAAS;mBAAC;oBACT,QAAQ,EAAE,uCAAuC;oBACjD,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,aAAa;sBAAzB,KAAK;gBAIO,mBAAmB;sBAA/B,KAAK;;;MCUK,2BAA4B,SAAQ,yBAAyB;IAYxE,YACY,QAAmB,EACnB,QAAkB,EACE,UAAsB,EAC1C,kBAA6C,EAC7C,MAAyB;QAEnC,KAAK,CAAC,QAAQ,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;QAN1B,aAAQ,GAAR,QAAQ,CAAW;QACnB,aAAQ,GAAR,QAAQ,CAAU;QACE,eAAU,GAAV,UAAU,CAAY;QAC1C,uBAAkB,GAAlB,kBAAkB,CAA2B;QAC7C,WAAM,GAAN,MAAM,CAAmB;QAdrB,YAAO,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,CAAC;QAC1C,YAAO,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,CAAC;QAE1C,cAAS,GAAG,IAAI,CAAC;QACjB,aAAQ,GAAG,IAAI,CAAC;QAChB,YAAO,GAAG,IAAI,CAAC;QAExB,SAAI,GAAG,oBAAoB,CAAC,IAAI,CAAC;KAUvC;IAEM,UAAU,CAAC,KAAU;QAC1B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,MAAM,GAAG,mBAAmB,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACxD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAExB,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;KAC5B;IAEM,WAAW,CAAC,KAAK;QAEtB,IAAI,MAAM,GAAG,oBAAoB,CAAC,IAAI,CAAC;QAEvC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACpD,MAAM,GAAG,oBAAoB,CAAC,SAAS,CAAC;SAEzC;aAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,EAAE;YAC3D,MAAM,GAAG,oBAAoB,CAAC,QAAQ,CAAC;SAExC;aAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAC5D,MAAM,GAAG,oBAAoB,CAAC,KAAK,CAAC;SAErC;aAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAC5D,MAAM,GAAG,oBAAoB,CAAC,IAAI,CAAC;SACpC;QAED,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,GAAG,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;KACrE;IAEM,IAAI;QAET,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;YACzD,OAAO;SACR;QAED,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAChE,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,QAAQ,EACb;YACE,UAAU,EAAE,IAAI,CAAC,KAAK;YACtB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CACF,CAAC;QAEF,KAAK,CAAC,IAAI,EAAE,CAAC;KACd;;yHAzEU,2BAA2B,mEAe5B,UAAU;6GAfT,2BAA2B,yLAP3B,CAAC;YACV,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,2BAA2B,CAAC;YAC1D,KAAK,EAAE,IAAI;SACZ,CAAC;4FAGS,2BAA2B;kBAVvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,sBAAsB;oBAChC,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,SAAS,EAAE,CAAC;4BACV,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,iCAAiC,CAAC;4BAC1D,KAAK,EAAE,IAAI;yBACZ,CAAC;oBACF,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAgBI,MAAM;2BAAC,UAAU;iHAZJ,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,SAAS;sBAAxB,KAAK;gBACU,QAAQ;sBAAvB,KAAK;gBACU,OAAO;sBAAtB,KAAK;;;MCfM,6BAA8B,SAAQ,2BAA2B;IAQ7E,YACE,QAAmB,EACnB,QAAkB,EAClB,UAAsB,EACtB,kBAA6C,EAC7C,MAAyB;QAEzB,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC;QAZ7D,YAAO,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,WAAW,EAAE,GAAG,GAAG,CAAC;QAG3C,YAAO,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,WAAW,EAAE,CAAC;KAU3C;;2HAhBW,6BAA6B;+GAA7B,6BAA6B,qGAP9B,CAAC;YACV,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,6BAA6B,CAAC;YAC5D,KAAK,EAAE,IAAI;SACZ,CAAC;4FAGU,6BAA6B;kBAV1C,SAAS;mBAAC;oBACT,QAAQ,EAAE,wBAAwB;oBAClC,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,SAAS,EAAE,CAAC;4BACV,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,mCAAmC,CAAC;4BAC5D,KAAK,EAAE,IAAI;yBACZ,CAAC;oBACF,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;qNAIQ,OAAO;sBADb,KAAK;gBAIC,OAAO;sBADb,KAAK;;;MCMK,yBAA0B,SAAQ,yBAAyB;IAatE,YACY,QAAmB,EACnB,QAAkB,EACE,UAAsB,EAC1C,MAAyB,EACzB,mBAA8C;QAExD,KAAK,CAAC,QAAQ,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;QAN1B,aAAQ,GAAR,QAAQ,CAAW;QACnB,aAAQ,GAAR,QAAQ,CAAU;QACE,eAAU,GAAV,UAAU,CAAY;QAC1C,WAAM,GAAN,MAAM,CAAmB;QACzB,wBAAmB,GAAnB,mBAAmB,CAA2B;QAhB1C,YAAO,GAAG,IAAI,CAAC;QACf,YAAO,GAAG,IAAI,CAAC;QACf,YAAO,GAAG,IAAI,CAAC;QACf,YAAO,GAAG,IAAI,CAAC;QACf,aAAQ,GAAG,IAAI,CAAC;QAChB,gBAAW,GAAG,CAAC,CAAC;QAChB,SAAI,GAAG,cAAc,CAAC,IAAI,CAAC;QAGpC,YAAO,GAAG,IAAI,YAAY,EAAO,CAAC;KAUxC;IAIM,UAAU;QACf,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACpC,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;KACF;IAEM,eAAe;QACpB,IAAI,CAAC,WAAW,EAAE,CAAC;KACpB;IAEM,UAAU,CAAC,KAAU;QAC1B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAExB,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;KAC5B;IAEM,WAAW,CAAC,KAAK;QACtB,IAAI,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;YACnD,IAAI,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,KAAK,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE;gBACtD,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;gBACzC,MAAM,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;gBAC1C,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM,EAAE,EAAE,CAAC;aAC3E;iBAAM;gBACL,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;gBAC9C,MAAM,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;gBAC1C,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM,EAAE,EAAE,CAAC;aAC3E;SACF;aAAM;YACL,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;SAC1C;KACF;IAEM,IAAI;QACT,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,OAAO;SACR;QAED,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAC3D,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,QAAQ,EACb;YACE,UAAU,EAAE,IAAI,CAAC,KAAK;YACtB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,UAAU,EAAE,IAAI,CAAC,qBAAqB,EAAE;YACxC,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,WAAW,EAAE,IAAI,CAAC,WAAW;SAC9B,CACF,CAAC;QAEF,KAAK,CAAC,IAAI,EAAE,CAAC;KACd;IAEO,qBAAqB;QAC3B,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;YACxB,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;SAC5B;aAAM;YACL,OAAO,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC;SAChC;KACF;;uHAzFU,yBAAyB,mEAgB1B,UAAU;2GAhBT,yBAAyB,oTAPzB,CAAC;YACV,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,yBAAyB,CAAC;YACxD,KAAK,EAAE,IAAI;SACZ,CAAC;4FAGS,yBAAyB;kBAVrC,SAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,SAAS,EAAE,CAAC;4BACV,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,+BAA+B,CAAC;4BACxD,KAAK,EAAE,IAAI;yBACZ,CAAC;oBACF,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;;0BAiBI,MAAM;2BAAC,UAAU;iHAdJ,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,OAAO;sBAAtB,KAAK;gBACU,QAAQ;sBAAvB,KAAK;gBACU,WAAW;sBAA1B,KAAK;gBACU,IAAI;sBAAnB,KAAK;gBAGC,OAAO;sBADb,MAAM;uBAAC,QAAQ;gBAeT,UAAU;sBAFhB,YAAY;uBAAC,OAAO;;sBACpB,YAAY;uBAAC,OAAO;;;MC9BV,yBAA0B,SAAQ,qBAAqB;IAjBpE;;QAmBkB,SAAI,GAAG,cAAc,CAAC,QAAQ,CAAC;KAEhD;;uHAJY,yBAAyB;2GAAzB,yBAAyB,uEAdzB;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,yBAAyB,CAAC;YACxD,KAAK,EAAE,IAAI;SACZ;QACD;YACE,OAAO,EAAE,aAAa;YACtB,WAAW,EAAE,UAAU,CAAC,MAAM,yBAAyB,CAAC;YACxD,KAAK,EAAE,IAAI;SACZ;KACF;4FAGU,yBAAyB;kBAjBrC,SAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,+BAA+B,CAAC;4BACxD,KAAK,EAAE,IAAI;yBACZ;wBACD;4BACE,OAAO,EAAE,aAAa;4BACtB,WAAW,EAAE,UAAU,CAAC,+BAA+B,CAAC;4BACxD,KAAK,EAAE,IAAI;yBACZ;qBACF;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGiB,IAAI;sBAAnB,KAAK;;;MCFK,qBAAsB,SAAQ,qBAAqB;IAjBhE;;QAmBkB,SAAI,GAAG,cAAc,CAAC,IAAI,CAAC;KAE5C;;mHAJY,qBAAqB;uGAArB,qBAAqB,mEAdrB;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,qBAAqB,CAAC;YACpD,KAAK,EAAE,IAAI;SACZ;QACD;YACE,OAAO,EAAE,aAAa;YACtB,WAAW,EAAE,UAAU,CAAC,MAAM,qBAAqB,CAAC;YACpD,KAAK,EAAE,IAAI;SACZ;KACF;4FAGU,qBAAqB;kBAjBjC,SAAS;mBAAC;oBACT,QAAQ,EAAE,gBAAgB;oBAC1B,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,2BAA2B,CAAC;4BACpD,KAAK,EAAE,IAAI;yBACZ;wBACD;4BACE,OAAO,EAAE,aAAa;4BACtB,WAAW,EAAE,UAAU,CAAC,2BAA2B,CAAC;4BACpD,KAAK,EAAE,IAAI;yBACZ;qBACF;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGiB,IAAI;sBAAnB,KAAK;;;MCRK,6BAA8B,SAAQ,wBAAwB;IAL3E;;QAeS,SAAI,GAAG,cAAc,CAAC,UAAU,CAAC;QAEhC,qBAAgB,GAAG,KAAK,CAAC;KAqElC;IA/EC,IAAa,gBAAgB,CAAC,KAAK;QACjC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,sBAAsB,CAAC,KAAK;QACvC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAMM,QAAQ;QACb,KAAK,CAAC,QAAQ,EAAE,CAAC;QAEjB,IAAI,CAAC,4BAA4B,EAAE,CAAC;KACrC;IAEM,OAAO,CAAC,KAAK;QAClB,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAErB,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;KACrC;IAEM,WAAW,CAAC,KAAW;QAC5B,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;QAE1B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE9B,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE;YAC1B,KAAK,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9C;QAED,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;KACrB;IAES,UAAU,CAAC,UAAuB;QAC1C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;KAC9B;IAES,iBAAiB,CAAC,IAAiB;QAC3C,IAAI,GAAG,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAErC,IAAI,IAAI,EAAE;YACR,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;SACzB;QAED,OAAO,IAAI,CAAC;KACb;;;;IAKS,yBAAyB;;KAElC;IAES,4BAA4B;QACpC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;aAChD,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC,CAAC,QAAqB;YAC/B,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBACzB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,OAAO;aACR;YAED,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAE3B,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC;YACjD,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;SAC5B,CAAC,CAAC;KACN;;2HAhFU,6BAA6B;+GAA7B,6BAA6B;4FAA7B,6BAA6B;kBALzC,SAAS;mBAAC;oBACT,QAAQ,EAAE,6CAA6C;oBACvD,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,gBAAgB;sBAA5B,KAAK;gBAIO,sBAAsB;sBAAlC,KAAK;;;MCPK,2BAA4B,SAAQ,sBAAsB;IALvE;;QAeS,SAAI,GAAG,cAAc,CAAC,UAAU,CAAC;QAEhC,qBAAgB,GAAG,KAAK,CAAC;KA2DlC;IArEC,IAAa,cAAc,CAAC,KAAK;QAC/B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAED,IAAa,oBAAoB,CAAC,KAAK;QACrC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;KACpB;IAMM,WAAW,CAAC,KAAW;QAC5B,IAAI,KAAK,EAAE;YACT,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE9B,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE;YAC1B,KAAK,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC9C;QAED,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;KACrB;IAES,UAAU,CAAC,UAAuB;QAC1C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;KAC9B;IAES,iBAAiB,CAAC,IAAiB;QAC3C,IAAI,GAAG,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAErC,IAAI,IAAI,EAAE;YACR,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;SACvB;QAED,OAAO,IAAI,CAAC;KACb;;;;IAKS,yBAAyB;;KAElC;IAES,4BAA4B;QACpC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;aAC9C,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAC1B;aACA,SAAS,CAAC,CAAC,QAAqB;YAC/B,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBACzB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,OAAO;aACR;YAED,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAE3B,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC;YACjD,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;SAC5B,CAAC,CAAC;KACN;;yHAtEU,2BAA2B;6GAA3B,2BAA2B;4FAA3B,2BAA2B;kBALvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,yCAAyC;oBACnD,QAAQ,EAAE,qBAAqB,CAAC,QAAQ;oBACxC,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;8BAGc,cAAc;sBAA1B,KAAK;gBAIO,oBAAoB;sBAAhC,KAAK;;;MC2DK,kBAAkB;IAC7B,OAAO,OAAO;QACZ,OAAO;YACL,QAAQ,EAAE,kBAAkB;YAC5B,SAAS,EAAE;gBACT,CAAC,GAAG,wBAAwB,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC;gBACjD,yBAAyB;aAC1B;SACF,CAAC;KACH;;gHATU,kBAAkB;iHAAlB,kBAAkB,iBAnC3B,qBAAqB;QACrB,2BAA2B;QAC3B,4BAA4B;QAC5B,0BAA0B;QAC1B,2BAA2B;QAC3B,6BAA6B;QAC7B,4BAA4B;QAC5B,yBAAyB;QACzB,qBAAqB;QACrB,gCAAgC;QAChC,8BAA8B;QAC9B,yBAAyB;QACzB,4BAA4B;QAC5B,0BAA0B;QAC1B,6BAA6B;QAC7B,2BAA2B,aA5B3B,YAAY;QACZ,WAAW;QACX,eAAe;QACf,aAAa;QACb,aAAa;QACb,aAAa;QACb,eAAe;QACf,YAAY;QACZ,aAAa;QACb,oBAAoB;QACpB,0BAA0B,aAqB1B,qBAAqB;QACrB,2BAA2B;QAC3B,4BAA4B;QAC5B,0BAA0B;QAC1B,2BAA2B;QAC3B,6BAA6B;QAC7B,yBAAyB;QACzB,qBAAqB;QACrB,gCAAgC;QAChC,8BAA8B;QAC9B,yBAAyB;QACzB,4BAA4B;QAC5B,0BAA0B;QAC1B,6BAA6B;QAC7B,2BAA2B;iHAGlB,kBAAkB,YAjDpB;YACP,YAAY;YACZ,WAAW;YACX,eAAe;YACf,aAAa;YACb,aAAa;YACb,aAAa;YACb,eAAe;YACf,YAAY;YACZ,aAAa;YACb,oBAAoB;YACpB,0BAA0B;SAC3B;4FAqCU,kBAAkB;kBAlD9B,QAAQ;mBAAC;oBACR,OAAO,EAAE;wBACP,YAAY;wBACZ,WAAW;wBACX,eAAe;wBACf,aAAa;wBACb,aAAa;wBACb,aAAa;wBACb,eAAe;wBACf,YAAY;wBACZ,aAAa;wBACb,oBAAoB;wBACpB,0BAA0B;qBAC3B;oBACD,YAAY,EAAE;wBACZ,qBAAqB;wBACrB,2BAA2B;wBAC3B,4BAA4B;wBAC5B,0BAA0B;wBAC1B,2BAA2B;wBAC3B,6BAA6B;wBAC7B,4BAA4B;wBAC5B,yBAAyB;wBACzB,qBAAqB;wBACrB,gCAAgC;wBAChC,8BAA8B;wBAC9B,yBAAyB;wBACzB,4BAA4B;wBAC5B,0BAA0B;wBAC1B,6BAA6B;wBAC7B,2BAA2B;qBAC5B;oBACD,OAAO,EAAE;wBACP,qBAAqB;wBACrB,2BAA2B;wBAC3B,4BAA4B;wBAC5B,0BAA0B;wBAC1B,2BAA2B;wBAC3B,6BAA6B;wBAC7B,yBAAyB;wBACzB,qBAAqB;wBACrB,gCAAgC;wBAChC,8BAA8B;wBAC9B,yBAAyB;wBACzB,4BAA4B;wBAC5B,0BAA0B;wBAC1B,6BAA6B;wBAC7B,2BAA2B;qBAC5B;iBACF;;;ACtFD;;;;ACAA;;;;;;"}